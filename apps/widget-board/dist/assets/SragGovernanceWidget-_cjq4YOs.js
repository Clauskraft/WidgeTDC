import{j as e}from"./index-DZEoTVC4.js";import{r as a,q as x,S as N,N as C,Q as D}from"./ui-DyG0g13d.js";import{M as W}from"./MatrixWidgetWrapper-mghho8C4.js";import"./vendor-Cv91Oj79.js";import"./graph-i8PIyU_l.js";import"./grid-BAREo1Ej.js";const S=()=>{const[s,g]=a.useState(""),[d,l]=a.useState(!1),[i,m]=a.useState(null),[n,o]=a.useState(""),[c,b]=a.useState(!1),u=async r=>{if(r.preventDefault(),!!s.trim()){l(!0),o("");try{if(await new Promise(p=>setTimeout(p,1e3)),s.toLowerCase().includes("fail"))throw new Error("Simulation of backend failure for demo purposes");const t=c||s.toLowerCase().includes("count")||s.toLowerCase().includes("total"),f={type:t?"analytical":"semantic",sqlQuery:t?`SELECT sum(amount) FROM supplier_spend WHERE category = '${s.split(" ")[0]}'`:null,result:t?[{total_spend:125e3,currency:"USD"}]:[{title:"Architecture Review.pdf",snippet:"...system architecture must enforce zero-trust..."},{title:"Meeting_Notes_Q1.txt",snippet:"...discussed governance policies..."}],metadata:{traceId:crypto.randomUUID().substring(0,8),docIds:[101,104]}};m(f)}catch(t){o(t.message||"An error occurred")}finally{l(!1)}}};return e.jsxDEV(W,{title:"SRAG Governance Engine",children:e.jsxDEV("div",{className:"flex flex-col h-full overflow-hidden",children:[e.jsxDEV("form",{onSubmit:u,className:"mb-4 flex flex-col gap-3 shrink-0",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:"absolute top-3 left-3 text-gray-500",children:e.jsxDEV(x,{size:16},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:68,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:67,columnNumber:13},void 0),e.jsxDEV("textarea",{value:s,onChange:r=>g(r.target.value),placeholder:"Ask about governance, spending, or compliance...",className:"w-full min-h-[80px] pl-10 pr-4 py-3 bg-black/20 border border-white/10 rounded-xl text-sm text-white placeholder-gray-500 focus:outline-none focus:border-[#00B5CB] focus:ring-1 focus:ring-[#00B5CB]/20 resize-none transition-all",onKeyDown:r=>{r.key==="Enter"&&!r.shiftKey&&(r.preventDefault(),u(r))}},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:70,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:66,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("label",{className:"flex items-center gap-2 text-xs text-gray-400 cursor-pointer hover:text-white transition-colors select-none",children:[e.jsxDEV("input",{type:"checkbox",checked:c,onChange:r=>b(r.target.checked),className:"w-3 h-3 rounded bg-black/40 border-gray-600 text-[#00B5CB] focus:ring-offset-0 focus:ring-transparent"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:86,columnNumber:17},void 0),"SQL-only Mode (Strict Analytical)"]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:85,columnNumber:13},void 0),e.jsxDEV("button",{type:"submit",disabled:d||!s.trim(),className:`px-4 py-1.5 rounded-lg flex items-center gap-2 text-xs font-semibold transition-all ${d||!s.trim()?"bg-white/5 text-gray-500 cursor-not-allowed":"bg-[#00B5CB] text-[#051e3c] hover:bg-[#009eb3] shadow-lg shadow-[#00B5CB]/20"}`,children:d?"Processing...":e.jsxDEV(e.Fragment,{children:["Execute ",e.jsxDEV(N,{size:12},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:104,columnNumber:56},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:104,columnNumber:46},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:95,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:84,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:65,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex-1 bg-white/5 rounded-xl border border-white/10 p-4 overflow-y-auto relative custom-scrollbar flex flex-col",children:[!i&&!n&&e.jsxDEV("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-500/40 gap-3",children:[e.jsxDEV(C,{size:48,strokeWidth:1},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:113,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs font-medium",children:"Ready for query"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:114,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:112,columnNumber:17},void 0),n&&e.jsxDEV("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 text-xs",children:["Error: ",n]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:119,columnNumber:17},void 0),i&&e.jsxDEV("div",{className:"animate-fade-in space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between pb-2 border-b border-white/5",children:[e.jsxDEV("div",{className:`text-[10px] font-bold uppercase px-2 py-0.5 rounded-full ${i.type==="analytical"?"bg-blue-500/20 text-blue-400":"bg-purple-500/20 text-purple-400"}`,children:i.type==="analytical"?"Analytical Result":"Semantic Search"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:128,columnNumber:25},void 0),e.jsxDEV("span",{className:"text-[10px] text-gray-600 font-mono",children:["Trace: ",i.metadata.traceId]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:131,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:127,columnNumber:22},void 0),i.sqlQuery&&e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"flex items-center gap-1 text-[10px] text-gray-400",children:[e.jsxDEV(D,{size:10},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:138,columnNumber:34},void 0)," SQL Generated"]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:137,columnNumber:30},void 0),e.jsxDEV("div",{className:"bg-black/40 p-3 rounded-lg border border-white/5 font-mono text-xs text-blue-300 overflow-x-auto",children:i.sqlQuery},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:140,columnNumber:30},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:136,columnNumber:26},void 0),e.jsxDEV("div",{className:"space-y-2",children:i.result.map((r,t)=>e.jsxDEV("div",{className:"bg-black/20 p-3 rounded-lg text-xs text-gray-300 font-mono whitespace-pre-wrap border border-white/5",children:JSON.stringify(r,null,2)},t,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:149,columnNumber:29},void 0))},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:147,columnNumber:22},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:125,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:110,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:63,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SragGovernanceWidget.tsx",lineNumber:62,columnNumber:5},void 0)};export{S as default};
