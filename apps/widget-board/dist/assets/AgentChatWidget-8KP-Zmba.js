import{j as e}from"./index-DZEoTVC4.js";import{r as i,B as g,U as D,S as h,b as w}from"./ui-DyG0g13d.js";import{u as W}from"./useMCP-CI-td5l2.js";import{M as j}from"./MatrixWidgetWrapper-mghho8C4.js";import"./vendor-Cv91Oj79.js";import"./graph-i8PIyU_l.js";import"./grid-BAREo1Ej.js";const B=({widgetId:T})=>{const{send:p}=W(),[a,n]=i.useState([]),[d,c]=i.useState(""),[l,m]=i.useState(!1),[r,b]=i.useState(!1),C=i.useRef(null);i.useEffect(()=>{var t;(t=C.current)==null||t.scrollIntoView({behavior:"smooth"})},[a]);const f=async()=>{if(!d.trim()||l)return;const t={id:`user-${Date.now()}`,content:d.trim(),sender:"user",timestamp:new Date};n(s=>[...s,t]);const x=d;c(""),m(!0);try{const s=await p("agent-orchestrator","srag.query",{naturalLanguageQuery:x,model:r?"deepseek-reasoner":"deepseek-chat",systemPrompt:"You are a specialized Agent focused on executing tasks."}),o={id:`agent-${Date.now()}`,content:s.response||s.content||JSON.stringify(s),sender:"agent",timestamp:new Date};n(u=>[...u,o])}catch(s){console.error("Chat error:",s);const o={id:`error-${Date.now()}`,content:`Fejl: Kunne ikke forbinde til agenten. ${s.message}`,sender:"agent",timestamp:new Date};n(u=>[...u,o])}finally{m(!1)}},N=t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),f())};return e.jsxDEV(j,{title:"Neural Agent Interface",controls:e.jsxDEV("button",{onClick:()=>b(!r),className:`p-1 rounded text-[10px] font-medium flex items-center gap-1 transition-all border ${r?"bg-purple-500/20 text-purple-300 border-purple-500/30":"text-gray-500 border-transparent hover:text-gray-300"}`,title:"Deep Reasoning Mode (R1)",children:[e.jsxDEV(w,{size:10,className:r?"text-purple-400":""},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:86,columnNumber:17},void 0),r?"Deep Think":"Standard"]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:81,columnNumber:14},void 0),children:e.jsxDEV("div",{className:"flex flex-col h-full",children:[e.jsxDEV("div",{className:"flex-1 overflow-y-auto pr-1 custom-scrollbar space-y-3",children:[a.length===0&&e.jsxDEV("div",{className:"h-full flex flex-col items-center justify-center text-gray-500/40 gap-2",children:[e.jsxDEV("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center",children:e.jsxDEV(g,{size:24,strokeWidth:1.5},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:97,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:96,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs",children:"System online. Awaiting input."},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:99,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:95,columnNumber:17},void 0),a.map(t=>e.jsxDEV("div",{className:`flex gap-2 ${t.sender==="user"?"flex-row-reverse":"flex-row"}`,children:[e.jsxDEV("div",{className:`w-6 h-6 rounded-full flex items-center justify-center shrink-0 mt-1 ${t.sender==="user"?"bg-white/10":"bg-[#00B5CB]/20"}`,children:t.sender==="user"?e.jsxDEV(D,{size:12,className:"text-gray-300"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:111,columnNumber:50},void 0):e.jsxDEV(g,{size:12,className:"text-[#00B5CB]"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:111,columnNumber:97},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:108,columnNumber:17},void 0),e.jsxDEV("div",{className:`p-2.5 rounded-xl max-w-[85%] text-xs leading-relaxed ${t.sender==="user"?"bg-[#00B5CB]/80 text-white rounded-tr-none shadow-lg shadow-[#00B5CB]/10":"bg-white/5 text-gray-300 border border-white/10 rounded-tl-none"}`,children:[e.jsxDEV("p",{className:"whitespace-pre-wrap",children:t.content},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:121,columnNumber:17},void 0),e.jsxDEV("span",{className:"text-[9px] opacity-50 mt-1 block text-right",children:t.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:122,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:114,columnNumber:17},void 0)]},t.id,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:104,columnNumber:13},void 0)),l&&e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("div",{className:"w-6 h-6 rounded-full bg-[#00B5CB]/20 flex items-center justify-center shrink-0 mt-1",children:e.jsxDEV(g,{size:12,className:"text-[#00B5CB]"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:132,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:131,columnNumber:17},void 0),e.jsxDEV("div",{className:"p-2.5 rounded-xl bg-white/5 border border-white/10 rounded-tl-none flex items-center gap-1",children:[e.jsxDEV("div",{className:"w-1 h-1 bg-[#00B5CB] rounded-full animate-bounce"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:135,columnNumber:21},void 0),e.jsxDEV("div",{className:"w-1 h-1 bg-[#00B5CB] rounded-full animate-bounce delay-75"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:136,columnNumber:21},void 0),e.jsxDEV("div",{className:"w-1 h-1 bg-[#00B5CB] rounded-full animate-bounce delay-150"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:137,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:134,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:130,columnNumber:14},void 0),e.jsxDEV("div",{ref:C},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:141,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:93,columnNumber:9},void 0),e.jsxDEV("div",{className:"mt-3 pt-3 border-t border-white/5",children:e.jsxDEV("div",{className:"relative group",children:[e.jsxDEV("textarea",{value:d,onChange:t=>c(t.target.value),onKeyDown:N,placeholder:"Execute command or ask question...",className:"w-full bg-black/20 border border-white/10 rounded-xl py-2.5 pl-3 pr-10 text-xs text-white placeholder-gray-600 focus:outline-none focus:border-[#00B5CB]/50 focus:ring-1 focus:ring-[#00B5CB]/20 resize-none transition-all",rows:1,style:{minHeight:"38px"}},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:147,columnNumber:13},void 0),e.jsxDEV("button",{onClick:f,disabled:l||!d.trim(),className:"absolute right-1.5 top-1/2 -translate-y-1/2 p-1.5 rounded-lg text-[#00B5CB] hover:bg-[#00B5CB]/10 disabled:opacity-30 disabled:hover:bg-transparent transition-colors",children:e.jsxDEV(h,{size:14},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:161,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:156,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:146,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:145,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:91,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentChatWidget.tsx",lineNumber:78,columnNumber:5},void 0)};export{B as default};
