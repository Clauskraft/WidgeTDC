import{j as e}from"./index-DZEoTVC4.js";import{r as t}from"./ui-DyG0g13d.js";import{G as C}from"./index-CHxrVzz6.js";import{B as D}from"./Button-D2-36h54.js";import"./vendor-Cv91Oj79.js";import"./graph-i8PIyU_l.js";import"./grid-BAREo1Ej.js";var f={};const W=i=>new Promise((c,l)=>{const r=new FileReader;r.readAsDataURL(i),r.onload=()=>c(r.result.split(",")[1]),r.onerror=o=>l(o)}),P=()=>{const[i,c]=t.useState(null),[l,r]=t.useState(null),[o,g]=t.useState(""),[m,u]=t.useState(!1),[p,d]=t.useState(null),b=a=>{var n;const s=(n=a.target.files)==null?void 0:n[0];if(s&&s.type.startsWith("video/")){if(s.size>50*1024*1024){d("Filen er for stor. Maksimal størrelse er 50MB.");return}c(s),r(URL.createObjectURL(s)),g(""),d(null)}else d("Vælg venligst en gyldig videofil.")},v=async()=>{if(!i||!f.API_KEY){d("Vælg en videofil og sørg for, at API-nøglen er sat.");return}u(!0),d(null),g("");try{const a=new C({apiKey:f.API_KEY}),s=await W(i),n={inlineData:{mimeType:i.type,data:s}},N={text:"Beskriv detaljeret, hvad der sker i denne video."},x=await a.models.generateContent({model:"gemini-2.5-pro",contents:{parts:[n,N]}});g(x.text)}catch(a){console.error("Video analysis failed:",a),d("Videoanalyse fejlede. Filen kan være for stor eller i et format, der ikke understøttes. Se konsollen for detaljer.")}finally{u(!1)}};return e.jsxDEV("div",{className:"h-full flex flex-col -m-4",children:e.jsxDEV("div",{className:"flex-1 p-4 space-y-4 overflow-y-auto",children:[e.jsxDEV("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center",children:[e.jsxDEV("input",{type:"file",accept:"video/*",onChange:b,className:"hidden",id:"video-upload"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/VideoAnalyzerWidget.tsx",lineNumber:77,columnNumber:21},void 0),e.jsxDEV("label",{htmlFor:"video-upload",className:"ms-focusable cursor-pointer",children:[e.jsxDEV("p",{children:"Klik for at vælge en video"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/VideoAnalyzerWidget.tsx",lineNumber:79,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500",children:"MP4, WEBM, etc. (Maks 50MB)"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/VideoAnalyzerWidget.tsx",lineNumber:80,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/VideoAnalyzerWidget.tsx",lineNumber:78,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/VideoAnalyzerWidget.tsx",lineNumber:76,columnNumber:17},void 0),l&&e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("video",{src:l,controls:!0,className:"w-full rounded-md max-h-64"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/VideoAnalyzerWidget.tsx",lineNumber:86,columnNumber:26},void 0),e.jsxDEV(D,{onClick:v,disabled:m||!i,className:"w-full",children:m?"Analyserer...":"Analyser Video"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/VideoAnalyzerWidget.tsx",lineNumber:87,columnNumber:26},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/VideoAnalyzerWidget.tsx",lineNumber:85,columnNumber:21},void 0),p&&e.jsxDEV("p",{className:"text-red-500 text-sm",children:p},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/VideoAnalyzerWidget.tsx",lineNumber:93,columnNumber:27},void 0),o&&e.jsxDEV("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsxDEV("h4",{className:"font-semibold mb-2",children:"Analyse Resultat:"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/VideoAnalyzerWidget.tsx",lineNumber:97,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-sm whitespace-pre-wrap",children:o},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/VideoAnalyzerWidget.tsx",lineNumber:98,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/VideoAnalyzerWidget.tsx",lineNumber:96,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/VideoAnalyzerWidget.tsx",lineNumber:75,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/VideoAnalyzerWidget.tsx",lineNumber:74,columnNumber:9},void 0)};export{P as default};
