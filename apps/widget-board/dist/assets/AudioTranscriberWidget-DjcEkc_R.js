import{j as r}from"./index-DZEoTVC4.js";import{r as s}from"./ui-DyG0g13d.js";import{G as C}from"./index-CHxrVzz6.js";import{B as W}from"./Button-D2-36h54.js";import"./vendor-Cv91Oj79.js";import"./graph-i8PIyU_l.js";import"./grid-BAREo1Ej.js";var p={};const R=()=>{const[t,c]=s.useState(!1),[u,m]=s.useState(""),[b,d]=s.useState(!1),[g,o]=s.useState(null),i=s.useRef(null),n=s.useRef([]),f=()=>{var e;t?(e=i.current)==null||e.stop():T()},T=async()=>{if(!p.API_KEY){o("API nøgle mangler.");return}try{const e=await navigator.mediaDevices.getUserMedia({audio:!0});i.current=new MediaRecorder(e),n.current=[],m(""),o(null),i.current.addEventListener("dataavailable",a=>{n.current.push(a.data)}),i.current.addEventListener("stop",x),i.current.start(),c(!0)}catch(e){console.error("Error accessing microphone:",e),o("Kunne ikke få adgang til mikrofon.")}},x=async()=>{c(!1),d(!0);const e=new Blob(n.current,{type:"audio/webm"});try{const a=new C({apiKey:p.API_KEY}),l=new FileReader;l.readAsDataURL(e),l.onloadend=async()=>{const N=l.result.split(",")[1],D={inlineData:{mimeType:e.type,data:N}},v=await a.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[D,{text:"Transcribe this audio."}]}});m(v.text),d(!1)}}catch(a){console.error("Transcription failed:",a),o("Transskription fejlede."),d(!1)}};return r.jsxDEV("div",{className:"h-full flex flex-col items-center justify-center text-center -m-4",children:[r.jsxDEV(W,{onClick:f,variant:t?"destructive":"primary",className:`px-8 py-4 rounded-full transition-all duration-300 ${t?"animate-pulse":""}`,children:t?"Stopper Optagelse...":"Start Optagelse"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AudioTranscriberWidget.tsx",lineNumber:81,columnNumber:13},void 0),r.jsxDEV("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400",children:t?"Taler...":"Klik for at starte optagelse"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AudioTranscriberWidget.tsx",lineNumber:88,columnNumber:13},void 0),g&&r.jsxDEV("p",{className:"text-red-500 text-sm mt-4",children:g},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AudioTranscriberWidget.tsx",lineNumber:92,columnNumber:23},void 0),b&&r.jsxDEV("p",{className:"text-sm mt-4",children:"Transskriberer..."},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AudioTranscriberWidget.tsx",lineNumber:94,columnNumber:27},void 0),u&&r.jsxDEV("div",{className:"w-full p-4 mt-4",children:r.jsxDEV("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-700 text-left",children:[r.jsxDEV("h4",{className:"font-semibold mb-2",children:"Transskription:"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AudioTranscriberWidget.tsx",lineNumber:99,columnNumber:25},void 0),r.jsxDEV("p",{className:"text-sm",children:u},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AudioTranscriberWidget.tsx",lineNumber:100,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AudioTranscriberWidget.tsx",lineNumber:98,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AudioTranscriberWidget.tsx",lineNumber:97,columnNumber:18},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AudioTranscriberWidget.tsx",lineNumber:80,columnNumber:9},void 0)};export{R as default};
