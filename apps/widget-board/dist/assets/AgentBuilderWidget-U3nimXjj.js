import{j as e}from"./index-DZEoTVC4.js";import{r,B as j,ae as U,af as S,ag as k,p as _}from"./ui-DyG0g13d.js";import{B as z}from"./Button-D2-36h54.js";import{u as L}from"./useWidgetSync-DeOUJzf9.js";import"./vendor-Cv91Oj79.js";import"./graph-i8PIyU_l.js";import"./grid-BAREo1Ej.js";import"./useMCP-CI-td5l2.js";function I(o,a){const[m,l]=r.useState(o);return r.useEffect(()=>{const b=setTimeout(()=>{l(o)},a);return()=>{clearTimeout(b)}},[o,a]),m}const C=[{name:"calculator",description:"Matematiske beregninger.",category:"Beregning"},{name:"public_search",description:"Søgning i offentlige kilder.",category:"Søgning"},{name:"private_search",description:"Søgning i interne kilder.",category:"Søgning"},{name:"gdpr_analyzer",description:"GDPR compliance analyse.",category:"Compliance"},{name:"code_interpreter",description:"Kør Python kode sikkert.",category:"Udvikling"},{name:"email_sender",description:"Send emails via Outlook.",category:"Kommunikation"}],H=({widgetId:o})=>{var T;const[a,m]=r.useState(""),[l,b]=r.useState(""),p=I(l,500),[D,W]=r.useState(C.map(i=>({...i,status:"optional"}))),[f,x]=r.useState(new Set),[h,w]=r.useState(!1),[u,v]=r.useState([]),[N,B]=r.useState(!0);L(o,{agentCount:u.length,lastAgent:(T=u[u.length-1])==null?void 0:T.name,draftName:a}),r.useEffect(()=>{async function i(){if(!p.trim()){W(C.map(t=>({...t,status:"optional"})));return}w(!0);try{const t=C.map(s=>{let d="optional";const n=p.toLowerCase();return n.includes("beregn")&&s.name==="calculator"&&(d="recommended"),n.includes("søg")&&s.name==="public_search"&&(d="recommended"),(n.includes("privat")||n.includes("intern"))&&(s.name==="private_search"&&(d="mandatory"),s.name==="public_search"&&(d="excluded")),n.includes("gdpr")&&s.name==="gdpr_analyzer"&&(d="mandatory"),n.includes("kode")&&s.name==="code_interpreter"&&(d="recommended"),n.includes("email")&&s.name==="email_sender"&&(d="recommended"),{...s,status:d}});W(t);const g=t.filter(s=>s.status==="mandatory").map(s=>s.name);x(s=>{const d=new Set([...s,...g]);return t.filter(c=>c.status==="excluded").map(c=>c.name).forEach(c=>d.delete(c)),d})}catch(t){console.error("Tool suggestion failed:",t)}finally{w(!1)}}i()},[p]);const A=()=>{const i={id:`agent-${Date.now()}`,name:a,instruction:l,tools:Array.from(f)};v(t=>[...t,i]),m(""),b(""),x(new Set)},E=i=>{const t=D.find(g=>g.name===i);!t||t.status==="mandatory"||t.status==="excluded"||x(g=>{const s=new Set(g);return s.has(i)?s.delete(i):s.add(i),s})},y=i=>({mandatory:"border-red-500/50 bg-red-500/10",recommended:"border-blue-500/50 bg-blue-500/10",excluded:"opacity-30 cursor-not-allowed",optional:"border-white/10 hover:border-white/20"})[i],V=i=>({mandatory:"bg-red-500/20 text-red-300",recommended:"bg-blue-500/20 text-blue-300",excluded:"bg-gray-500/20 text-gray-400",optional:"bg-white/10 text-gray-400"})[i],P=i=>({mandatory:"Krævet",recommended:"Anbefalet",excluded:"Ekskluderet",optional:"Valgfri"})[i];return e.jsxDEV("div",{className:"h-full flex flex-col -m-4","data-testid":"agent-builder-widget",children:[e.jsxDEV("div",{className:"flex-1 p-4 space-y-4 overflow-y-auto custom-scrollbar",children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxDEV(j,{size:20,className:"text-[#00B5CB]"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:133,columnNumber:17},void 0),e.jsxDEV("h3",{className:"text-lg font-semibold text-white",children:"Agent Builder"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:134,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:132,columnNumber:13},void 0),e.jsxDEV("div",{className:"border-b border-white/10 pb-4 mb-4",children:[e.jsxDEV("div",{className:"flex justify-between items-center cursor-pointer group",onClick:()=>B(!N),children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("h4",{className:"text-sm font-medium text-gray-300 group-hover:text-white transition-colors",children:"Dine Agenter"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:144,columnNumber:25},void 0),e.jsxDEV("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-[#00B5CB]/20 text-[#00B5CB]",children:u.length},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:145,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:143,columnNumber:21},void 0),e.jsxDEV("button",{className:"p-1 rounded-full hover:bg-white/10 text-gray-400",children:N?e.jsxDEV(U,{size:16},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:150,columnNumber:42},void 0):e.jsxDEV(S,{size:16},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:150,columnNumber:68},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:149,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:139,columnNumber:17},void 0),N&&e.jsxDEV("div",{className:"mt-3 space-y-2 max-h-40 overflow-y-auto custom-scrollbar pr-1",children:u.length>0?u.map(i=>e.jsxDEV("div",{className:"p-3 bg-[#0B3E6F]/20 rounded-lg border border-white/5 flex flex-col gap-2",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(j,{size:16,className:"text-[#00B5CB]"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:160,columnNumber:41},void 0),e.jsxDEV("p",{className:"font-medium text-sm text-white truncate",children:i.name},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:161,columnNumber:41},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:159,columnNumber:37},void 0),e.jsxDEV("div",{className:"flex flex-wrap items-center gap-1.5",children:i.tools.length>0?i.tools.map(t=>e.jsxDEV("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-white/5 text-gray-300 capitalize",children:t.replace("_"," ")},t,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:166,columnNumber:49},void 0)):e.jsxDEV("span",{className:"text-[10px] text-gray-500 italic",children:"Ingen værktøjer"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:171,columnNumber:45},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:163,columnNumber:37},void 0)]},i.id,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:158,columnNumber:33},void 0)):e.jsxDEV("div",{className:"text-center py-4 text-xs text-gray-500 border border-dashed border-white/10 rounded-lg",children:"Ingen agenter oprettet endnu"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:177,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:155,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:138,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-xs font-medium text-gray-400 mb-1 block",children:"Navn"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:188,columnNumber:21},void 0),e.jsxDEV("input",{value:a,onChange:i=>m(i.target.value),placeholder:"Eks: Support Agent",className:"w-full bg-black/20 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-[#00B5CB]"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:189,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:187,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-xs font-medium text-gray-400 mb-1 block",children:"Instruktion (Prompt)"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:198,columnNumber:22},void 0),e.jsxDEV("textarea",{value:l,onChange:i=>b(i.target.value),placeholder:"Beskriv agentens opgave...",rows:3,className:"w-full bg-black/20 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-[#00B5CB] resize-none"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:199,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:197,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-xs font-medium text-gray-400 mb-2 flex items-center gap-2",children:["Værktøjer",h&&e.jsxDEV("div",{className:"w-3 h-3 border-2 border-[#00B5CB] border-t-transparent rounded-full animate-spin"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:211,columnNumber:39},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:209,columnNumber:21},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:D.map(i=>e.jsxDEV("div",{onClick:()=>E(i.name),className:`p-2 rounded-lg border flex flex-col gap-1 transition-all cursor-pointer ${y(i.status)} ${f.has(i.name)?"border-[#00B5CB] bg-[#00B5CB]/10":"bg-[#0B3E6F]/10"}`,children:[e.jsxDEV("div",{className:"flex justify-between items-start",children:[e.jsxDEV("div",{className:"flex items-center gap-1.5",children:[e.jsxDEV(k,{size:12,className:"text-gray-400"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:222,columnNumber:41},void 0),e.jsxDEV("span",{className:"text-xs font-medium text-gray-200 capitalize",children:i.name.replace("_"," ")},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:223,columnNumber:41},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:221,columnNumber:37},void 0),f.has(i.name)&&e.jsxDEV("div",{className:"w-2 h-2 rounded-full bg-[#00B5CB]"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:225,columnNumber:70},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:220,columnNumber:33},void 0),e.jsxDEV("p",{className:"text-[10px] text-gray-500 line-clamp-1",children:i.description},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:227,columnNumber:33},void 0),e.jsxDEV("div",{className:"mt-auto pt-1",children:e.jsxDEV("span",{className:`text-[9px] px-1.5 py-0.5 rounded-full font-medium ${V(i.status)}`,children:P(i.status)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:229,columnNumber:35},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:228,columnNumber:33},void 0)]},i.name,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:215,columnNumber:29},void 0))},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:213,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:208,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:186,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:130,columnNumber:9},void 0),e.jsxDEV("div",{className:"p-4 border-t border-white/10 bg-[#0B3E6F]/20",children:e.jsxDEV(z,{onClick:A,className:"w-full flex items-center justify-center gap-2 bg-[#00B5CB] hover:bg-[#009eb3] text-[#051e3c] font-semibold transition-colors",disabled:!a.trim()||!l.trim(),children:[e.jsxDEV(_,{size:16},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:245,columnNumber:17},void 0)," Opret Agent"]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:240,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:239,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/AgentBuilderWidget.tsx",lineNumber:129,columnNumber:5},void 0)};export{H as default};
