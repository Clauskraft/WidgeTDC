import{j as e}from"./index-DZEoTVC4.js";import{r as t}from"./ui-DyG0g13d.js";import{G as y}from"./index-CHxrVzz6.js";import{B as w}from"./Button-D2-36h54.js";import"./vendor-Cv91Oj79.js";import"./graph-i8PIyU_l.js";import"./grid-BAREo1Ej.js";var f={};const j=l=>new Promise((o,n)=>{const r=new FileReader;r.readAsDataURL(l),r.onload=()=>o(r.result.split(",")[1]),r.onerror=g=>n(g)}),z=()=>{const[l,o]=t.useState(null),[n,r]=t.useState(null),[g,N]=t.useState("Hvad er der på dette billede?"),[c,m]=t.useState(""),[u,p]=t.useState(!1),[b,d]=t.useState(null),D=a=>{var i;const s=(i=a.target.files)==null?void 0:i[0];s&&(o(s),r(URL.createObjectURL(s)),m(""),d(null))},v=t.useCallback(a=>{var i;a.preventDefault(),a.stopPropagation();const s=(i=a.dataTransfer.files)==null?void 0:i[0];s&&s.type.startsWith("image/")&&(o(s),r(URL.createObjectURL(s)),m(""),d(null))},[]),C=async()=>{if(!l||!f.API_KEY){d("Vælg venligst en fil og sørg for at API nøglen er sat.");return}p(!0),d(null),m("");try{const a=new y({apiKey:f.API_KEY}),s=await j(l),i={inlineData:{mimeType:l.type,data:s}},x={text:g},W=await a.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[i,x]}});m(W.text)}catch(a){console.error("Image analysis failed:",a),d("Analyse fejlede. Se konsollen for detaljer.")}finally{p(!1)}};return e.jsxDEV("div",{className:"h-full flex flex-col -m-4",children:e.jsxDEV("div",{className:"flex-1 p-4 space-y-4 overflow-y-auto",children:[e.jsxDEV("div",{onDrop:v,onDragOver:a=>a.preventDefault(),className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center cursor-pointer hover:border-blue-500 dark:hover:border-blue-400",children:[e.jsxDEV("input",{type:"file",accept:"image/*",onChange:D,className:"hidden",id:"image-upload"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/ImageAnalyzerWidget.tsx",lineNumber:88,columnNumber:21},void 0),n?e.jsxDEV("img",{src:n,alt:"Forhåndsvisning",className:"max-h-48 mx-auto rounded-md"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/ImageAnalyzerWidget.tsx",lineNumber:90,columnNumber:25},void 0):e.jsxDEV("label",{htmlFor:"image-upload",className:"ms-focusable cursor-pointer",children:[e.jsxDEV("p",{children:"Træk og slip et billede her, eller klik for at vælge"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/ImageAnalyzerWidget.tsx",lineNumber:93,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500",children:"PNG, JPG, WEBP"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/ImageAnalyzerWidget.tsx",lineNumber:94,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/ImageAnalyzerWidget.tsx",lineNumber:92,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/ImageAnalyzerWidget.tsx",lineNumber:83,columnNumber:17},void 0),l&&e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("textarea",{value:g,onChange:a=>N(a.target.value),placeholder:"Stil et spørgsmål om billedet...",rows:2,className:"ms-focusable w-full p-2 rounded-lg border bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/ImageAnalyzerWidget.tsx",lineNumber:101,columnNumber:25},void 0),e.jsxDEV(w,{onClick:C,disabled:u,className:"w-full",children:u?"Analyserer...":"Analyser Billede"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/ImageAnalyzerWidget.tsx",lineNumber:108,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/ImageAnalyzerWidget.tsx",lineNumber:100,columnNumber:21},void 0),b&&e.jsxDEV("p",{className:"text-red-500 text-sm",children:b},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/ImageAnalyzerWidget.tsx",lineNumber:114,columnNumber:27},void 0),c&&e.jsxDEV("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsxDEV("h4",{className:"font-semibold mb-2",children:"Analyse Resultat:"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/ImageAnalyzerWidget.tsx",lineNumber:118,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-sm whitespace-pre-wrap",children:c},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/ImageAnalyzerWidget.tsx",lineNumber:119,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/ImageAnalyzerWidget.tsx",lineNumber:117,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/ImageAnalyzerWidget.tsx",lineNumber:82,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/ImageAnalyzerWidget.tsx",lineNumber:81,columnNumber:9},void 0)};export{z as default};
