import{j as e}from"./index-DZEoTVC4.js";import{r as l,o as h,F as j,R as T,p as v,q as y,d as E,j as I,s as P}from"./ui-DyG0g13d.js";import{B as p}from"./Button-D2-36h54.js";import{u as U}from"./useMCP-CI-td5l2.js";import"./vendor-Cv91Oj79.js";import"./graph-i8PIyU_l.js";import"./grid-BAREo1Ej.js";const M=({widgetId:V})=>{var f;const{send:n}=U(),[u,c]=l.useState([]),[m,N]=l.useState(!1),[a,C]=l.useState(""),[x,o]=l.useState(!1),[s,r]=l.useState({}),g=async()=>{N(!0);try{const t=await n("agent-orchestrator","notes.list",{});t&&t.notes&&c(t.notes)}catch(t){console.error("Failed to fetch notes:",t),c([])}finally{N(!1)}};l.useEffect(()=>{g()},[]);const D=async()=>{if(s.title)try{s.id?await n("agent-orchestrator","notes.update",{id:s.id,title:s.title,content:s.body,tags:s.tags}):await n("agent-orchestrator","notes.create",{title:s.title,content:s.body,tags:s.tags}),o(!1),r({}),g()}catch(t){console.error("Failed to save note:",t)}},W=async t=>{if(confirm("Er du sikker?"))try{await n("agent-orchestrator","notes.delete",{id:t}),g()}catch(i){console.error("Failed to delete note:",i)}},b=l.useMemo(()=>u.filter(t=>{var i,d;return t.title.toLowerCase().includes(a.toLowerCase())||((i=t.body)==null?void 0:i.toLowerCase().includes(a.toLowerCase()))||((d=t.tags)==null?void 0:d.some(w=>w.toLowerCase().includes(a.toLowerCase())))}),[u,a]);return x?e.jsxDEV("div",{className:"h-full flex flex-col p-4 bg-[#0B3E6F]/20",children:[e.jsxDEV("div",{className:"flex justify-between mb-4",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-white",children:s.id?"Rediger Note":"Ny Note"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:96,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(p,{variant:"subtle",size:"small",onClick:()=>o(!1),children:"Annuller"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:98,columnNumber:13},void 0),e.jsxDEV(p,{variant:"primary",size:"small",onClick:D,children:[e.jsxDEV(h,{size:14,className:"mr-1"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:99,columnNumber:73},void 0)," Gem"]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:99,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:97,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:95,columnNumber:9},void 0),e.jsxDEV("input",{className:"bg-black/20 border border-white/10 rounded-lg p-2 mb-2 text-white placeholder-gray-400 focus:outline-none focus:border-[#00B5CB]",placeholder:"Titel",value:s.title||"",onChange:t=>r(i=>({...i,title:t.target.value}))},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:102,columnNumber:9},void 0),e.jsxDEV("textarea",{className:"flex-1 bg-black/20 border border-white/10 rounded-lg p-2 mb-2 text-white placeholder-gray-400 focus:outline-none focus:border-[#00B5CB] resize-none font-mono text-sm",placeholder:"Skriv dine tanker...",value:s.body||"",onChange:t=>r(i=>({...i,body:t.target.value}))},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:108,columnNumber:9},void 0),e.jsxDEV("input",{className:"bg-black/20 border border-white/10 rounded-lg p-2 text-white placeholder-gray-400 focus:outline-none focus:border-[#00B5CB] text-sm",placeholder:"Tags (komma separeret)",value:((f=s.tags)==null?void 0:f.join(", "))||"",onChange:t=>r(i=>({...i,tags:t.target.value.split(",").map(d=>d.trim())}))},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:114,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:94,columnNumber:7},void 0):e.jsxDEV("div",{className:"h-full flex flex-col","data-testid":"intelligent-notes-widget",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4 px-1",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsxDEV(j,{size:18},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:128,columnNumber:11},void 0)," Noter"]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:127,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{onClick:g,className:`p-1.5 rounded-lg hover:bg-white/10 text-gray-400 hover:text-white transition-colors ${m?"animate-spin":""}`,children:e.jsxDEV(T,{size:16},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:135,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:131,columnNumber:11},void 0),e.jsxDEV("button",{onClick:()=>{r({}),o(!0)},className:"px-3 py-1.5 bg-[#00B5CB] hover:bg-[#009eb3] text-[#051e3c] rounded-lg text-sm font-medium flex items-center gap-1 transition-colors",children:[e.jsxDEV(v,{size:16},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:141,columnNumber:13},void 0)," Ny"]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:137,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:130,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:126,columnNumber:7},void 0),e.jsxDEV("div",{className:"relative mb-4",children:[e.jsxDEV(y,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:14},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:147,columnNumber:9},void 0),e.jsxDEV("input",{type:"text",placeholder:"Søg i noter...",value:a,onChange:t=>C(t.target.value),className:"w-full bg-black/20 border border-white/10 rounded-lg py-2 pl-9 pr-3 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-[#00B5CB]/50 transition-colors"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:148,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:146,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex-1 overflow-y-auto space-y-2 pr-1",children:b.length>0?b.map(t=>{var i;return e.jsxDEV("div",{onClick:()=>{r(t),o(!0)},className:"p-3 bg-[#0B3E6F]/20 hover:bg-[#0B3E6F]/40 border border-white/5 hover:border-[#00B5CB]/30 rounded-xl transition-all cursor-pointer group",children:[e.jsxDEV("div",{className:"flex justify-between items-start mb-1",children:[e.jsxDEV("h4",{className:"font-medium text-gray-200 group-hover:text-white truncate pr-2",children:t.title},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:166,columnNumber:17},void 0),t.compliance!=="clean"&&e.jsxDEV(E,{size:12,className:"text-amber-400 shrink-0"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:167,columnNumber:49},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:165,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-xs text-gray-400 line-clamp-2 mb-2",children:t.body},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:169,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex gap-1",children:(i=t.tags)==null?void 0:i.slice(0,3).map(d=>e.jsxDEV("span",{className:"text-[10px] px-1.5 py-0.5 bg-white/5 rounded text-gray-400 flex items-center gap-1",children:[e.jsxDEV(I,{size:8},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:174,columnNumber:23},void 0)," ",d]},d,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:173,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:171,columnNumber:17},void 0),e.jsxDEV("button",{onClick:d=>{d.stopPropagation(),W(t.id)},className:"p-1 hover:bg-red-500/20 text-gray-500 hover:text-red-400 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxDEV(P,{size:12},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:182,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:178,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:170,columnNumber:15},void 0)]},t.id,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:160,columnNumber:13},void 0)}):e.jsxDEV("div",{className:"text-center py-8 text-gray-500 text-xs",children:m?"Indlæser...":"Ingen noter fundet"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:188,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:157,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/IntelligentNotesWidget.tsx",lineNumber:125,columnNumber:5},void 0)};export{M as default};
