import{u as c,j as s}from"./index-DZEoTVC4.js";import{r as l,e as u}from"./ui-DyG0g13d.js";import{B as g}from"./Button-D2-36h54.js";import"./vendor-Cv91Oj79.js";import"./graph-i8PIyU_l.js";import"./grid-BAREo1Ej.js";function w(){const{state:{user:i}}=c(),[a,n]=l.useState(!1),d=async()=>{n(!0);const e=await fetch("/api/auth/aula/initiate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:i.id,orgId:i.org_id})}).then(t=>t.text());window.location.href=e},r=async(e,t)=>{await fetch("/api/auth/aula/callback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e,state:t,userId:i.id,orgId:i.org_id})})};return u.useEffect(()=>{const e=new URLSearchParams(window.location.hash.substring(1)),t=e.get("code"),o=e.get("state");t&&o&&(r(t,o),window.history.replaceState({},document.title,window.location.pathname))},[]),s.jsxDEV("div",{children:[s.jsxDEV("h4",{children:"Aula Integration"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SystemSettingsWidget.tsx",lineNumber:45,columnNumber:7},this),s.jsxDEV(g,{onClick:d,disabled:a,children:a?"Authenticating...":"Connect Aula via OAuth"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SystemSettingsWidget.tsx",lineNumber:46,columnNumber:7},this),s.jsxDEV("p",{children:["Status: ",i.aulaConnected?"Connected":"Not Connected"]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SystemSettingsWidget.tsx",lineNumber:49,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SystemSettingsWidget.tsx",lineNumber:44,columnNumber:5},this)}export{w as default};
