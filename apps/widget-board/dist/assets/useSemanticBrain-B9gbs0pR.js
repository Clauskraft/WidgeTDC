import{r as n}from"./ui-DyG0g13d.js";const s="http://localhost:3001",j=f=>{const[o,l]=n.useState([]),[y,h]=n.useState(!1),[i,w]=n.useState(null),[m,p]=n.useState(null),u=f||"UnknownWidget";n.useEffect(()=>{const t=async()=>{try{const e=await fetch(`${s}/api/hyper/status`);if(e.ok){const r=await e.json();w(r)}}catch(e){console.warn("[SemanticBrain] Could not fetch brain status:",e)}};t();const a=setInterval(t,3e4);return()=>clearInterval(a)},[]);const d=n.useCallback(async(t,a={})=>{h(!0),p(t);try{const e=await fetch(`${s}/api/hyper/dream`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,limit:a.limit||5,minScore:a.minScore||.6})});if(!e.ok)throw new Error("Dream request failed");const r=await e.json();return l(r.results),r.results}catch(e){return console.error("[SemanticBrain] Recall failed:",e),l([]),[]}finally{h(!1)}},[]),c=n.useCallback(async(t,a,e={})=>{try{const r=await fetch(`${s}/api/hyper/broadcast`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:t,agent:u,content:a,metadata:e})});if(!r.ok)throw new Error("Broadcast failed");return(await r.json()).eventId}catch(r){return console.error("[SemanticBrain] Broadcast failed:",r),null}},[u]),S=n.useCallback(async(t,a=5)=>{try{const e=await fetch(`${s}/api/hyper/similar/${t}?limit=${a}`);if(!e.ok)throw new Error("Similarity search failed");return(await e.json()).results}catch(e){return console.error("[SemanticBrain] FindSimilar failed:",e),[]}},[]),g=n.useCallback(async(t,a=50)=>{try{const e=await fetch(`${s}/api/hyper/rewind/${t}?maxDepth=${a}`);if(!e.ok)throw new Error("Rewind failed");return(await e.json()).path}catch(e){return console.error("[SemanticBrain] Rewind failed:",e),[]}},[]),k=n.useCallback(async(t=20)=>{try{const a=await fetch(`${s}/api/hyper/events`);if(!a.ok)throw new Error("Failed to fetch events");return(await a.json()).events.slice(0,t)}catch(a){return console.error("[SemanticBrain] GetRecentThoughts failed:",a),[]}},[]),C=n.useCallback(async t=>{try{const a=await fetch(`${s}/api/hyper/chain/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({label:t})});if(!a.ok)throw new Error("Failed to start chain");return(await a.json()).correlationId}catch(a){return console.error("[SemanticBrain] StartChain failed:",a),null}},[]),T=(i==null?void 0:i.canDream)??!1,I=o.length>0?o[0]:null,b=o.some(t=>t.score>.8);return{thoughts:o,isThinking:y,brainStatus:i,lastQuery:m,canDream:T,topThought:I,hasHighRelevance:b,recall:d,broadcast:c,findSimilar:S,rewind:g,getRecentThoughts:k,startChain:C,async thinkAbout(t){return await c("THOUGHT",`Considering: ${t}`),d(t)},async shareInsight(t,a){return c("INSIGHT",t,{confidence:a})},async shareDecision(t,a){return c("CRITICAL_DECISION",t,{alternatives:a})}}};export{j as u};
