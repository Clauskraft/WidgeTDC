import{j as e}from"./index-DZEoTVC4.js";import{r as a,T as C,d as W,W as D,R as h}from"./ui-DyG0g13d.js";import{M as j}from"./MatrixWidgetWrapper-mghho8C4.js";import{u as v}from"./useMCP-CI-td5l2.js";import{u as T}from"./useWidgetSync-DeOUJzf9.js";import"./vendor-Cv91Oj79.js";import"./graph-i8PIyU_l.js";import"./grid-BAREo1Ej.js";const c={Google:"bg-blue-500",Microsoft:"bg-blue-400",Amazon:"bg-orange-500",Cloudflare:"bg-yellow-500",Unknown:"bg-gray-600"},z=({widgetId:f})=>{const{send:g}=v(),[r,u]=a.useState({connections:[],stats:{}}),[m,N]=a.useState(!1),[p,b]=a.useState(null);T(f,{activeConnections:r.connections.length,topProvider:Object.keys(r.stats)[0]||"None"});const o=a.useCallback(async()=>{N(!0),b(null);try{try{const i=await g("agent-orchestrator","widgets.network.scan",{});if(i&&i.data){u(i.data);return}}catch{}const t=["Google","Amazon","Cloudflare","Microsoft","Unknown"],s={},d=[];for(let i=0;i<15;i++){const n=t[Math.floor(Math.random()*t.length)];s[n]=(s[n]||0)+1,d.push({provider:n,process:"chrome.exe",destination:`192.168.1.${100+i}`,port:443,status:Math.random()>.3?"established":"listening"})}u({connections:d,stats:s})}catch(t){console.warn("Network scan failed:",t),b("Network Agent unreachable")}finally{N(!1)}},[g]);a.useEffect(()=>{o();const t=setInterval(o,5e3);return()=>clearInterval(t)},[o]);const l=Object.entries(r.stats).sort((t,s)=>s[1]-t[1]),w=r.connections.filter(t=>t.status==="established").length,x=r.connections.filter(t=>t.status==="listening").length;return e.jsxDEV(j,{title:"Network Spy",isLoading:m&&l.length===0,controls:e.jsxDEV("button",{onClick:o,className:"p-1 text-gray-400 hover:text-[#00B5CB] transition-colors",children:e.jsxDEV(h,{size:14,className:m?"animate-spin":""},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:96,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:95,columnNumber:17},void 0),children:e.jsxDEV("div",{className:"flex flex-col h-full gap-4",children:[e.jsxDEV("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxDEV("div",{className:"bg-white/5 rounded-lg p-2 border border-white/10 text-center hover:bg-white/10 transition-colors",children:[e.jsxDEV("div",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-1",children:"Active"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:104,columnNumber:25},void 0),e.jsxDEV("div",{className:"text-lg font-bold text-green-400",children:w},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:105,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:103,columnNumber:21},void 0),e.jsxDEV("div",{className:"bg-white/5 rounded-lg p-2 border border-white/10 text-center hover:bg-white/10 transition-colors",children:[e.jsxDEV("div",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-1",children:"Listening"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:108,columnNumber:25},void 0),e.jsxDEV("div",{className:"text-lg font-bold text-blue-400",children:x},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:109,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:107,columnNumber:21},void 0),e.jsxDEV("div",{className:"bg-white/5 rounded-lg p-2 border border-white/10 text-center hover:bg-white/10 transition-colors",children:[e.jsxDEV("div",{className:"text-[10px] text-gray-500 uppercase tracking-wider mb-1",children:"Blocked"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:112,columnNumber:25},void 0),e.jsxDEV("div",{className:"text-lg font-bold text-red-400",children:"0"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:113,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:111,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:102,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex-1 overflow-y-auto pr-1 space-y-2 custom-scrollbar",children:p?e.jsxDEV("div",{className:"flex flex-col items-center justify-center h-32 text-center text-gray-500/50",children:[e.jsxDEV(C,{size:32,className:"mb-2"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:121,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-xs",children:p},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:122,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:120,columnNumber:26},void 0):l.length===0?e.jsxDEV("div",{className:"flex flex-col items-center justify-center h-32 text-center text-gray-500/50",children:[e.jsxDEV(W,{size:32,className:"mb-2"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:126,columnNumber:29},void 0),e.jsxDEV("p",{className:"text-xs",children:"No active traffic detected"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:127,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:125,columnNumber:25},void 0):l.map(([t,s])=>{var d;return e.jsxDEV("div",{className:"relative group bg-white/5 rounded-lg overflow-hidden border border-white/5 hover:border-white/20 transition-all",children:[e.jsxDEV("div",{className:`absolute inset-0 opacity-10 transition-all duration-1000 group-hover:opacity-20 ${c[t]||"bg-gray-500"}`,style:{width:`${s/r.connections.length*100}%`}},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:133,columnNumber:33},void 0),e.jsxDEV("div",{className:"relative flex justify-between items-center p-3 z-10",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:`w-2 h-2 rounded-full shadow-[0_0_5px_currentColor] ${((d=c[t])==null?void 0:d.replace("bg-","text-"))||"text-gray-500"} ${c[t]||"bg-gray-500"}`},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:139,columnNumber:41},void 0),e.jsxDEV("span",{className:"font-medium text-sm text-gray-200",children:t},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:140,columnNumber:41},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:138,columnNumber:37},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"text-xs font-mono text-[#00B5CB]",children:s},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:143,columnNumber:41},void 0),e.jsxDEV(D,{size:12,className:"text-gray-600"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:144,columnNumber:41},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:142,columnNumber:37},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:137,columnNumber:33},void 0)]},t,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:131,columnNumber:29},void 0)})},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:118,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:100,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/NetworkSpyWidget.tsx",lineNumber:91,columnNumber:9},void 0)};export{z as default};
