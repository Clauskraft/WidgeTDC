import{j as e}from"./index-DZEoTVC4.js";import{r as d,i as U,b as V,a6 as D,Z as S,k as $,a as k,a7 as z,a8 as O,a9 as R}from"./ui-DyG0g13d.js";import{u as B}from"./useSemanticBrain-B9gbs0pR.js";import{M as G}from"./MatrixWidgetWrapper-mghho8C4.js";import"./vendor-Cv91Oj79.js";import"./graph-i8PIyU_l.js";import"./grid-BAREo1Ej.js";const Q=({widgetId:H})=>{const[s,g]=d.useState(""),[c,n]=d.useState(""),[p,b]=d.useState(!1),[h,f]=d.useState(!1),[u,m]=d.useState(!1),[x,W]=d.useState([]),[N,j]=d.useState(!1),{thoughts:r,isThinking:v,recall:C,broadcast:T}=B("TheArchitect");d.useEffect(()=>{if(s.length>10){const t=setTimeout(()=>{C(s,{limit:3,minScore:.5})},800);return()=>clearTimeout(t)}},[s,C]);const A=d.useCallback(()=>{if(r.length===0)return s;const t=r.map(i=>`- Previously noted: "${i.content}" (${i.agent}, relevance: ${(i.score*100).toFixed(0)}%)`).join(`
`);return`
USER REQUEST: ${s}

CONTEXT FROM MEMORY (Use these to match user's style/preferences):
${t}

Generate clean, production-ready React TypeScript code. Apply any relevant patterns from memory.
    `.trim()},[s,r]),E=async()=>{var t;if(s.trim()){b(!0),await T("TOOL_SELECTION",`Starting code generation for: ${s.substring(0,50)}...`);try{const i=A(),o=await fetch("/api/mcp/route",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tool:"architect.generate",params:{prompt:i,memories:r.map(a=>a.content),format:"react-typescript"}})});let l="";if(o.ok){const a=await o.json();l=a.code||((t=a.result)==null?void 0:t.code)||w(s)}else l=w(s);n(l);const P={id:`comp-${Date.now()}`,prompt:s,code:l,timestamp:Date.now(),memories:r.map(a=>a.content)};W(a=>[P,...a].slice(0,10)),await T("INSIGHT",`Generated component: ${s.substring(0,60)}`,{promptLength:s.length,memoriesUsed:r.length,codeLength:l.length})}catch(i){console.error("Generation failed:",i),n("// Error generating code. Please try again.")}finally{b(!1)}}},w=t=>{const i=t.split(" ").slice(0,2).map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join("")+"Component";return`import React, { useState } from 'react';

interface ${i}Props {
  className?: string;
}

/**
 * ${i}
 * Generated by The Architect based on: "${t}"
 * ${r.length>0?`
 * Applied memories:
${r.map(o=>` *  - ${o.content}`).join(`
`)}`:""}
 */
export const ${i}: React.FC<${i}Props> = ({ className }) => {
  const [isActive, setIsActive] = useState(false);

  return (
    <div className={\`p-4 rounded-lg border border-slate-700 bg-slate-900 \${className}\`}>
      <h3 className="text-lg font-semibold text-white mb-2">
        ${i}
      </h3>
      <p className="text-slate-400 text-sm mb-4">
        {/* Component based on: ${t} */}
        Your content here...
      </p>
      <button
        onClick={() => setIsActive(!isActive)}
        className={\`px-4 py-2 rounded-lg transition-colors \${
          isActive
            ? 'bg-green-600 hover:bg-green-500'
            : 'bg-blue-600 hover:bg-blue-500'
        } text-white\`}
      >
        {isActive ? 'Active' : 'Activate'}
      </button>
    </div>
  );
};

export default ${i};
`},y=async()=>{await navigator.clipboard.writeText(c),f(!0),setTimeout(()=>f(!1),2e3)};return e.jsxDEV(G,{title:"The Architect",controls:e.jsxDEV("button",{onClick:()=>m(!u),className:`p-1 rounded hover:text-[#00B5CB] transition-colors ${u?"text-[#00B5CB]":"text-gray-400"}`,title:"History",children:e.jsxDEV(R,{size:14},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:196,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:191,columnNumber:13},void 0),children:e.jsxDEV("div",{className:"flex flex-col gap-4 h-full",children:[r.length>0&&e.jsxDEV("div",{className:"p-2 bg-purple-500/10 border border-purple-500/20 rounded-lg flex items-start gap-2 animate-fade-in",children:[e.jsxDEV(U,{className:"w-3 h-3 text-purple-400 mt-0.5 shrink-0"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:204,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex-1 overflow-hidden",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-[10px] font-bold text-purple-300 uppercase tracking-wider mb-1",children:["Active Memory Context (",r.length,")",v&&e.jsxDEV(V,{className:"w-2 h-2 animate-pulse"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:208,columnNumber:41},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:206,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-1",children:r.slice(0,3).map((t,i)=>e.jsxDEV("span",{className:"text-[9px] px-1.5 py-0.5 bg-purple-500/20 rounded text-purple-200 truncate max-w-[150px]",title:t.content,children:t.content},i,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:212,columnNumber:29},void 0))},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:210,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:205,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:203,columnNumber:13},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:"absolute top-3 left-3 text-amber-500/50",children:e.jsxDEV(D,{size:16},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:224,columnNumber:18},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:223,columnNumber:13},void 0),e.jsxDEV("textarea",{value:s,onChange:t=>g(t.target.value),placeholder:"Describe the component you want to build...",className:"w-full bg-black/20 border border-white/10 rounded-xl pl-10 pr-4 py-3 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-amber-500/50 focus:ring-1 focus:ring-amber-500/20 resize-none min-h-[80px]"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:226,columnNumber:14},void 0),e.jsxDEV("button",{onClick:E,disabled:p||!s.trim(),className:"absolute bottom-2 right-2 p-1.5 bg-amber-600 hover:bg-amber-500 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-lg shadow-amber-900/20",children:p?e.jsxDEV("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:237,columnNumber:33},void 0):e.jsxDEV(S,{size:16},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:237,columnNumber:129},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:232,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:222,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex-1 min-h-0 flex flex-col relative",children:c?e.jsxDEV("div",{className:"flex-1 bg-[#0F1117] border border-white/10 rounded-xl overflow-hidden flex flex-col",children:[e.jsxDEV("div",{className:"h-8 flex items-center justify-between px-3 border-b border-white/5 bg-white/5",children:[e.jsxDEV("span",{className:"text-[10px] font-mono text-gray-400 flex items-center gap-1",children:[e.jsxDEV($,{size:10},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:247,columnNumber:30},void 0)," REACT COMPONENT"]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:246,columnNumber:26},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{onClick:()=>j(!N),className:`text-[10px] px-2 py-0.5 rounded transition-colors ${N?"bg-amber-500/20 text-amber-400":"text-gray-400 hover:text-white"}`,children:[e.jsxDEV(k,{size:10,className:"inline mr-1"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:254,columnNumber:33},void 0)," Preview"]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:250,columnNumber:29},void 0),e.jsxDEV("button",{onClick:y,className:"text-[10px] px-2 py-0.5 rounded text-gray-400 hover:text-white hover:bg-white/10 transition-colors",children:[h?e.jsxDEV(z,{size:10,className:"inline mr-1 text-green-400"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:260,columnNumber:43},void 0):e.jsxDEV(O,{size:10,className:"inline mr-1"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:260,columnNumber:104},void 0),h?"Copied":"Copy"]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:256,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:249,columnNumber:26},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:245,columnNumber:22},void 0),e.jsxDEV("div",{className:"flex-1 overflow-auto p-3 custom-scrollbar",children:e.jsxDEV("pre",{className:"text-xs font-mono text-gray-300 leading-relaxed",children:c},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:266,columnNumber:26},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:265,columnNumber:22},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:244,columnNumber:18},void 0):e.jsxDEV("div",{className:"flex-1 flex flex-col items-center justify-center border border-dashed border-white/10 rounded-xl text-gray-500/40 gap-2",children:[e.jsxDEV(D,{size:32,strokeWidth:1},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:273,columnNumber:22},void 0),e.jsxDEV("p",{className:"text-xs",children:"Awaiting architecture specifications"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:274,columnNumber:22},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:272,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:242,columnNumber:9},void 0),u&&x.length>0&&e.jsxDEV("div",{className:"absolute inset-x-4 bottom-4 top-20 bg-[#0B1015]/95 backdrop-blur-xl border border-white/10 rounded-xl p-3 z-20 flex flex-col animate-fade-in",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2 pb-2 border-b border-white/5",children:[e.jsxDEV("h4",{className:"text-xs font-bold text-gray-300 uppercase",children:"Build History"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:283,columnNumber:22},void 0),e.jsxDEV("button",{onClick:()=>m(!1),className:"text-gray-500 hover:text-white",children:"Close"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:284,columnNumber:22},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:282,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex-1 overflow-y-auto space-y-2 custom-scrollbar",children:x.map(t=>e.jsxDEV("button",{onClick:()=>{g(t.prompt),n(t.code),m(!1)},className:"w-full text-left p-2 rounded-lg hover:bg-white/5 transition-colors group",children:[e.jsxDEV("p",{className:"text-xs text-gray-300 truncate group-hover:text-amber-400 transition-colors",children:t.prompt},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:297,columnNumber:29},void 0),e.jsxDEV("span",{className:"text-[10px] text-gray-600",children:new Date(t.timestamp).toLocaleTimeString()},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:298,columnNumber:29},void 0)]},t.id,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:288,columnNumber:25},void 0))},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:286,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:281,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:200,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/TheArchitectWidget.tsx",lineNumber:188,columnNumber:5},void 0)};export{Q as default};
