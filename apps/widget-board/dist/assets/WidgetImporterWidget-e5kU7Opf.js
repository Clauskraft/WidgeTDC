import{j as e,a as k}from"./index-DZEoTVC4.js";import{e as I,r as o}from"./ui-DyG0g13d.js";import{B as N}from"./Button-D2-36h54.js";import"./vendor-Cv91Oj79.js";import"./graph-i8PIyU_l.js";import"./grid-BAREo1Ej.js";const c=({label:r,children:t})=>e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:r},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:12,columnNumber:9},void 0),e.jsxDEV("div",{className:"text-gray-800 dark:text-gray-200",children:t},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:13,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:11,columnNumber:5},void 0),M=({widget:r})=>{var t;return e.jsxDEV("div",{className:"h-full flex flex-col -m-4",children:[e.jsxDEV("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[e.jsxDEV("h3",{className:"font-semibold",children:r.displayName},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:24,columnNumber:9},void 0),e.jsxDEV("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"Microsoft"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:25,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:23,columnNumber:7},void 0),e.jsxDEV("div",{className:"p-4 flex-1 overflow-y-auto space-y-4 text-sm",children:[e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxDEV(c,{label:"Size",children:e.jsxDEV("p",{className:"capitalize",children:r.size||"Ukendt"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:33,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:32,columnNumber:13},void 0),r.detectionSource&&e.jsxDEV(c,{label:"Detection Source",children:e.jsxDEV("p",{className:"capitalize",children:r.detectionSource},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:37,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:36,columnNumber:17},void 0),e.jsxDEV(c,{label:"Widget ID",children:e.jsxDEV("p",{className:"font-mono text-xs break-all",children:r.id},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:41,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:40,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:31,columnNumber:9},void 0),((t=r.dataSource)==null?void 0:t.url)&&e.jsxDEV(c,{label:"Data Source",children:e.jsxDEV("a",{href:r.dataSource.url,target:"_blank",rel:"noopener noreferrer",className:"ms-focusable text-blue-500 hover:underline break-all",children:r.dataSource.url},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:47,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:46,columnNumber:13},void 0),e.jsxDEV(c,{label:"Capabilities",children:e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:r.capabilities.length>0?r.capabilities.map(d=>e.jsxDEV("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-200 text-gray-700 dark:bg-gray-600 dark:text-gray-200 capitalize",children:d},d,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:56,columnNumber:17},void 0)):e.jsxDEV("span",{className:"text-xs italic text-gray-500",children:"Ingen specificeret"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:59,columnNumber:22},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:54,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:53,columnNumber:9},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2",children:"Template Preview"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:64,columnNumber:11},void 0),e.jsxDEV("pre",{className:"p-3 text-xs bg-gray-100 dark:bg-gray-900 rounded-md overflow-x-auto max-h-40 border border-gray-200 dark:border-gray-700",children:e.jsxDEV("code",{children:JSON.stringify(r.template,null,2)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:66,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:65,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:63,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:29,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/compatibility/MSWidgetRenderer.tsx",lineNumber:22,columnNumber:5},void 0)};class S{transformToWidgetDefinition(t){const d=`Transformed-${t.id.replace(/[^a-zA-Z0-9]/g,"")}`,s=({widgetId:u})=>I.createElement(M,{widget:t,widgetId:u});return s.displayName=`TransformedWidget(${t.displayName})`,{id:d,name:`(MS) ${t.displayName}`,component:s,defaultLayout:{w:5,h:6},source:"microsoft",category:"system",msWidgetData:t}}}const x=class x{static async detectInstalledWidgets(){console.log("Scanning system for Microsoft widgets (simplified)..."),await new Promise(s=>setTimeout(s,500));const t=[this.scanRegistry()];return(await Promise.all(t)).filter(s=>s.widgets.length>0)}static async scanRegistry(){return{widgets:[{id:"ms-weather",displayName:"Vejr",template:this.getWeatherTemplate(),capabilities:["location","weather"],size:"medium"},{id:"ms-news",displayName:"Nyheder",template:this.getNewsTemplate(),capabilities:["news"],size:"large"}],source:"registry",confidence:.8}}static getWeatherTemplate(){return{type:"AdaptiveCard",version:"1.5",body:[{type:"TextBlock",text:"Vejr",size:"Large",weight:"Bolder"}]}}static getNewsTemplate(){return{type:"AdaptiveCard",version:"1.5",body:[{type:"TextBlock",text:"Seneste Nyheder",size:"Large",weight:"Bolder"}]}}};x.MS_WIDGETS_REGISTRY_PATH="HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Widgets";let W=x;const R={id:"SalesTracker-v1",displayName:"Kvartalsvis Salg",template:{type:"AdaptiveCard",version:"1.5",body:[{type:"TextBlock",text:"Salgs-dashboard",weight:"Bolder",size:"Medium"}]},dataSource:{url:"https://api.contoso.com/sales/quarterly"},capabilities:["interactive","data-driven"]},O=()=>{const{registerWidget:r,availableWidgets:t}=k(),[d,s]=o.useState("importer"),[g,u]=o.useState(JSON.stringify(R,null,2)),[p,C]=o.useState(""),[b,D]=o.useState(""),[T,j]=o.useState(!1),[w,y]=o.useState([]),[v,f]=o.useState(""),E=()=>{try{C(""),D("");const i=JSON.parse(g);if(!i.id||!i.displayName||!i.template)throw new Error("Ugyldigt JSON format. 'id', 'displayName', og 'template' er påkrævet.");h(i,l=>{D(l)})}catch(i){C(`Fejl ved transformation: ${i.message}`)}},h=(i,l)=>{const a=new S().transformToWidgetDefinition(i);if(t.some(m=>m.id===a.id)){l(`Widget'en "${a.name}" er allerede importeret.`);return}r(a),l(`Widget'en "${a.name}" er blevet tilføjet til sidebaren og er klar til brug.`)},P=async()=>{j(!0),f(""),y([]);try{const l=(await W.detectInstalledWidgets()).flatMap(n=>n.widgets.map(a=>({...a,detectionSource:n.source})));l.length===0?f("Ingen widgets fundet på systemet."):y(l)}catch{f("Kunne ikke scanne efter widgets. Denne funktion er muligvis kun tilgængelig i en desktop-app.")}finally{j(!1)}},U=()=>e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"flex flex-col gap-2 flex-1",children:[e.jsxDEV("label",{htmlFor:"ms-widget-json",className:"font-semibold",children:"Indsæt Microsoft Widget JSON"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:104,columnNumber:9},void 0),e.jsxDEV("textarea",{id:"ms-widget-json",value:g,onChange:i=>u(i.target.value),className:"ms-focusable w-full flex-1 p-2 rounded-lg border bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 resize-none font-mono text-xs"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:105,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:103,columnNumber:7},void 0),(p||b)&&e.jsxDEV("div",{className:"pt-2",children:[p&&e.jsxDEV("div",{className:"p-3 text-sm rounded-lg bg-red-50 dark:bg-red-900/50 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-200",children:p},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:114,columnNumber:27},void 0),b&&e.jsxDEV("div",{className:"p-3 text-sm rounded-lg bg-green-50 dark:bg-green-900/50 border border-green-200 dark:border-green-800 text-green-800 dark:text-green-200",children:[e.jsxDEV("p",{className:"font-bold",children:"Success!"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:117,columnNumber:15},void 0),e.jsxDEV("p",{children:b},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:118,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:116,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:113,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:102,columnNumber:5},void 0),V=()=>e.jsxDEV("div",{className:"flex flex-col gap-4",children:[e.jsxDEV(N,{onClick:P,disabled:T,children:T?"Scanner...":"Scan efter Installerede Widgets"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:128,columnNumber:7},void 0),v&&e.jsxDEV("p",{className:"text-red-500 text-sm text-center",children:v},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:131,columnNumber:21},void 0),w.length>0&&e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("h4",{className:"font-semibold text-sm",children:"Fundne Widgets:"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:134,columnNumber:11},void 0),w.map(i=>{const n=new S().transformToWidgetDefinition(i),a=t.some(m=>m.id===n.id);return e.jsxDEV("div",{className:"p-3 flex items-center justify-between rounded-lg bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-700",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium",children:i.displayName},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:143,columnNumber:19},void 0),i.detectionSource&&e.jsxDEV("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Fundet i: ",i.detectionSource]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:145,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:142,columnNumber:17},void 0),e.jsxDEV(N,{size:"small",disabled:a,onClick:()=>h(i,m=>alert(m)),children:a?"Importeret":"Importér"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:150,columnNumber:17},void 0)]},i.id,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:141,columnNumber:15},void 0)})]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:133,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:127,columnNumber:5},void 0);return e.jsxDEV("div",{className:"h-full flex flex-col -m-4",children:[e.jsxDEV("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxDEV("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[e.jsxDEV("button",{onClick:()=>s("importer"),className:`flex-1 p-2 rounded-md text-sm font-semibold transition-colors ${d==="importer"?"bg-white dark:bg-gray-700 shadow-sm":"hover:bg-gray-200 dark:hover:bg-gray-700/50"}`,children:"Manuel Import"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:169,columnNumber:11},void 0),e.jsxDEV("button",{onClick:()=>s("detector"),className:`flex-1 p-2 rounded-md text-sm font-semibold transition-colors ${d==="detector"?"bg-white dark:bg-gray-700 shadow-sm":"hover:bg-gray-200 dark:hover:bg-gray-700/50"}`,children:"Auto-detektér"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:175,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:168,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:167,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex-1 p-4 flex flex-col gap-4 overflow-y-auto",children:d==="importer"?U():V()},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:184,columnNumber:7},void 0),d==="importer"&&e.jsxDEV("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxDEV(N,{onClick:E,className:"w-full",children:"Importér og Registrér Widget"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:190,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:189,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/WidgetImporterWidget.tsx",lineNumber:166,columnNumber:5},void 0)};export{O as default};
