import{j as s}from"./index-DZEoTVC4.js";import{N as $,ao as ne,F as R,ap as ae,G as oe,aq as le,a9 as ce,H as ue,a7 as pe,r as T,q as me,K as ge,p as fe,ar as be,as as xe,a1 as Ne,a2 as we,ac as A,h as he,$ as De,R as Ce,s as J,b as X,n as ve}from"./ui-DyG0g13d.js";import{c as Me,p as Te}from"./middleware-C5DhYBon.js";import"./vendor-Cv91Oj79.js";import"./graph-i8PIyU_l.js";import"./grid-BAREo1Ej.js";import"./vanilla-m3Xdu9cz.js";const E={search:"#00FFFF",expanded:"#8B5CF6",manual:"#00FF88",suggested:"#FF8800"},je={web:"#3B82F6",drive:"#10B981",pubmed:"#EF4444",wikipedia:"#6B7280",manual:"#F59E0B"},We={relates_to:"#6B7280",causes:"#EF4444",part_of:"#3B82F6",leads_to:"#10B981",contradicts:"#F59E0B",supports:"#8B5CF6"},F=()=>`node-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,H=()=>`edge-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,ye=(i,r,e,t)=>{if(i.length===0)return i;const d=50,a=5e3,m=.05,u=.9;let o=i.map(c=>({id:c.id,x:c.position.x||e+(Math.random()-.5)*200,y:c.position.y||t+(Math.random()-.5)*200,vx:0,vy:0,fixed:c.isRoot}));for(let c=0;c<d;c++){for(let p=0;p<o.length;p++)for(let n=p+1;n<o.length;n++){const g=o[n].x-o[p].x,f=o[n].y-o[p].y,b=Math.sqrt(g*g+f*f)||1,w=a/(b*b),D=g/b*w,N=f/b*w;o[p].fixed||(o[p].vx-=D,o[p].vy-=N),o[n].fixed||(o[n].vx+=D,o[n].vy+=N)}for(const p of r){const n=o.find(M=>M.id===p.sourceId),g=o.find(M=>M.id===p.targetId);if(!n||!g)continue;const f=g.x-n.x,b=g.y-n.y,w=Math.sqrt(f*f+b*b)||1,D=w*m,N=f/w*D,C=b/w*D;n.fixed||(n.vx+=N,n.vy+=C),g.fixed||(g.vx-=N,g.vy-=C)}for(const p of o)p.fixed||(p.x+=p.vx*u,p.y+=p.vy*u,p.vx*=u,p.vy*=u)}return i.map(c=>{const p=o.find(n=>n.id===c.id);return p?{...c,position:{x:p.x,y:p.y}}:c})},Ee=Me()(Te((i,r)=>({nodes:[],edges:[],selectedNodeId:null,hoveredNodeId:null,viewport:{x:0,y:0,zoom:1},isSearching:!1,searchQuery:"",searchResults:[],autoTrackEnabled:!1,trackingInterval:3e4,history:[],historyIndex:-1,setSearchQuery:e=>i({searchQuery:e}),setSearching:e=>i({isSearching:e}),setSearchResults:e=>i({searchResults:e}),clearSearch:()=>i({searchQuery:"",searchResults:[],isSearching:!1}),addNodeFromSearch:(e,t)=>{const a=r().nodes.length===0,m=600,u=400,o={id:F(),label:e,description:t,type:"search",source:"web",position:a?{x:m,y:u}:{x:m+(Math.random()-.5)*300,y:u+(Math.random()-.5)*300},size:a?50:40,color:E.search,isRoot:a,createdAt:new Date().toISOString()};return r().saveHistory(),i(c=>({nodes:[...c.nodes,o],selectedNodeId:o.id,searchQuery:"",searchResults:[]})),o},addNode:e=>{const t={...e,id:F(),createdAt:new Date().toISOString()};return r().saveHistory(),i(d=>({nodes:[...d.nodes,t]})),t},removeNode:e=>{r().saveHistory(),i(t=>({nodes:t.nodes.filter(d=>d.id!==e),edges:t.edges.filter(d=>d.sourceId!==e&&d.targetId!==e),selectedNodeId:t.selectedNodeId===e?null:t.selectedNodeId}))},updateNode:(e,t)=>{i(d=>({nodes:d.nodes.map(a=>a.id===e?{...a,...t}:a)}))},moveNode:(e,t)=>{i(d=>({nodes:d.nodes.map(a=>a.id===e?{...a,position:t}:a)}))},selectNode:e=>i({selectedNodeId:e}),hoverNode:e=>i({hoveredNodeId:e}),setNodeExpanding:(e,t)=>{i(d=>({nodes:d.nodes.map(a=>a.id===e?{...a,isExpanding:t}:a)}))},toggleNodeTracking:e=>{i(t=>({nodes:t.nodes.map(d=>d.id===e?{...d,isTracking:!d.isTracking}:d)}))},addEdge:e=>{const t={...e,id:H()};r().saveHistory(),i(d=>({edges:[...d.edges,t]}))},removeEdge:e=>{r().saveHistory(),i(t=>({edges:t.edges.filter(d=>d.id!==e)}))},updateEdge:(e,t)=>{i(d=>({edges:d.edges.map(a=>a.id===e?{...a,...t}:a)}))},expandNode:(e,t,d)=>{const m=r().nodes.find(n=>n.id===e);if(!m)return;r().saveHistory();const u=2*Math.PI/t.length,o=150,c=t.map((n,g)=>{const f=u*g-Math.PI/2;return{...n,id:F(),position:{x:m.position.x+Math.cos(f)*o,y:m.position.y+Math.sin(f)*o},size:35,color:E.expanded,createdAt:new Date().toISOString()}}),p=d.map((n,g)=>{var f;return{...n,id:H(),sourceId:e,targetId:((f=c[g])==null?void 0:f.id)||e}});i(n=>({nodes:[...n.nodes.map(g=>g.id===e?{...g,isExpanding:!1,expandedAt:new Date().toISOString()}:g),...c],edges:[...n.edges,...p]})),setTimeout(()=>r().applyForceLayout(),100)},setViewport:e=>i({viewport:e}),setZoom:e=>{const t=Math.max(.2,Math.min(3,e));i(d=>({viewport:{...d.viewport,zoom:t}}))},pan:(e,t)=>{i(d=>({viewport:{...d.viewport,x:d.viewport.x+e,y:d.viewport.y+t}}))},resetViewport:()=>i({viewport:{x:0,y:0,zoom:1}}),centerOnNode:e=>{const t=r(),d=t.nodes.find(a=>a.id===e);d&&i({viewport:{x:-d.position.x+600,y:-d.position.y+400,zoom:t.viewport.zoom}})},applyForceLayout:()=>{const e=r(),t=ye(e.nodes,e.edges,600,400);i({nodes:t})},applyRadialLayout:()=>{const e=r(),t=e.nodes.find(n=>n.isRoot);if(!t)return;const d=600,a=400,m=150,u=new Map,o=[{id:t.id,level:0}];for(u.set(t.id,0);o.length>0;){const{id:n,level:g}=o.shift(),f=e.edges.filter(b=>b.sourceId===n||b.targetId===n);for(const b of f){const w=b.sourceId===n?b.targetId:b.sourceId;u.has(w)||(u.set(w,g+1),o.push({id:w,level:g+1}))}}const c=new Map;u.forEach((n,g)=>{c.has(n)||c.set(n,[]),c.get(n).push(g)});const p=e.nodes.map(n=>{const g=u.get(n.id)??0,f=c.get(g)??[n.id],b=f.indexOf(n.id),D=2*Math.PI/f.length*b-Math.PI/2,N=g*m;return{...n,position:{x:d+Math.cos(D)*N,y:a+Math.sin(D)*N}}});i({nodes:p})},setAutoTrack:e=>i({autoTrackEnabled:e}),setTrackingInterval:e=>i({trackingInterval:e}),saveHistory:()=>{const e=r(),t=e.history.slice(0,e.historyIndex+1);t.push({nodes:JSON.parse(JSON.stringify(e.nodes)),edges:JSON.parse(JSON.stringify(e.edges))}),i({history:t.slice(-50),historyIndex:t.length-1})},undo:()=>{const e=r();if(e.historyIndex>0){const t=e.history[e.historyIndex-1];i({nodes:t.nodes,edges:t.edges,historyIndex:e.historyIndex-1})}},redo:()=>{const e=r();if(e.historyIndex<e.history.length-1){const t=e.history[e.historyIndex+1];i({nodes:t.nodes,edges:t.edges,historyIndex:e.historyIndex+1})}},clear:()=>{r().saveHistory(),i({nodes:[],edges:[],selectedNodeId:null})},loadState:(e,t)=>{r().saveHistory(),i({nodes:e,edges:t})}}),{name:"mindmap-builder-storage",partialize:i=>({nodes:i.nodes,edges:i.edges,viewport:i.viewport,autoTrackEnabled:i.autoTrackEnabled})})),k="http://localhost:3000/api",Pe="ws://localhost:3001/mcp/ws",P=[{type:"vidensarkiv",enabled:!0,label:"Vidensarkiv",color:"#8B5CF6",icon:"ðŸ§ "},{type:"local_files",enabled:!0,label:"Lokale Filer",color:"#10B981",icon:"ðŸ“"},{type:"browser_history",enabled:!0,label:"Browser Historik",color:"#3B82F6",icon:"ðŸŒ"},{type:"outlook_emails",enabled:!0,label:"Outlook Emails",color:"#F59E0B",icon:"ðŸ“§"},{type:"web_search",enabled:!0,label:"Web SÃ¸gning",color:"#06B6D4",icon:"ðŸ”"},{type:"wikipedia",enabled:!0,label:"Wikipedia",color:"#6B7280",icon:"ðŸ“š"},{type:"pubmed",enabled:!0,label:"PubMed",color:"#EF4444",icon:"ðŸ”¬"},{type:"google_drive",enabled:!1,label:"Google Drive",color:"#4285F4",icon:"ðŸ“„"}];async function ke(i,r=10){try{const e=await fetch(`${k}/vector/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:i,namespace:"vidensarkiv",limit:r})});return e.ok?(await e.json()).map(d=>{var a,m;return{id:d.id,title:Fe(d.content),snippet:d.content.slice(0,200),source:((a=d.metadata)==null?void 0:a.source)||"web",url:(m=d.metadata)==null?void 0:m.url,relevance:d.similarity}}):(console.warn("[DataSource] Vidensarkiv search failed:",e.statusText),[])}catch(e){return console.error("[DataSource] Vidensarkiv error:",e),[]}}async function Be(i,r=10){try{const e=await fetch(`${k}/ingestion/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:i,source:"local_file_scanner",limit:r})});return e.ok?(await e.json()).map(d=>{var a;return{id:d.id,title:d.title||d.filename||"Fil",snippet:((a=d.content)==null?void 0:a.slice(0,200))||"",source:"drive",url:d.path,relevance:d.score||.5}}):[]}catch(e){return console.error("[DataSource] Local files error:",e),[]}}async function Se(i,r=10){try{const e=await fetch(`${k}/ingestion/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:i,source:"browser_history",limit:r})});return e.ok?(await e.json()).map(d=>{var a;return{id:d.id,title:d.title||d.url||"Side",snippet:((a=d.content)==null?void 0:a.slice(0,200))||d.url||"",source:"web",url:d.url,relevance:d.score||.5}}):[]}catch(e){return console.error("[DataSource] Browser history error:",e),[]}}async function Ue(i,r=10){try{const e=await fetch(`${k}/ingestion/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:i,source:"outlook_email",limit:r})});return e.ok?(await e.json()).map(d=>{var a,m;return{id:d.id,title:d.subject||d.title||"Email",snippet:((a=d.body)==null?void 0:a.slice(0,200))||((m=d.content)==null?void 0:m.slice(0,200))||"",source:"drive",url:d.mailId,relevance:d.score||.5}}):[]}catch(e){return console.error("[DataSource] Outlook error:",e),[]}}async function O(i,r,e={}){return new Promise(t=>{try{const d=new WebSocket(Pe),a=setTimeout(()=>{d.close(),t([])},1e4);d.onopen=()=>{d.send(JSON.stringify({type:"tool_call",tool:r,params:{query:i,...e}}))},d.onmessage=m=>{clearTimeout(a);try{const u=JSON.parse(m.data);if(u.type==="tool_result"&&u.result){const o=Array.isArray(u.result)?u.result:[u.result];t(o.map((c,p)=>{var n;return{id:c.id||`mcp-${r}-${p}`,title:c.title||c.name||i,snippet:c.snippet||c.description||((n=c.content)==null?void 0:n.slice(0,200))||"",source:r.includes("wiki")?"wikipedia":r.includes("pubmed")?"pubmed":"web",url:c.url||c.link,relevance:c.relevance||.7}}))}else t([])}catch{t([])}d.close()},d.onerror=()=>{clearTimeout(a),t([])}}catch(d){console.error("[DataSource] MCP error:",d),t([])}})}async function _(i,r=["vidensarkiv","local_files"],e=5){const t=[];r.includes("vidensarkiv")&&t.push(ke(i,e)),r.includes("local_files")&&t.push(Be(i,e)),r.includes("browser_history")&&t.push(Se(i,e)),r.includes("outlook_emails")&&t.push(Ue(i,e)),r.includes("web_search")&&t.push(O(i,"web_search",{limit:e})),r.includes("wikipedia")&&t.push(O(i,"mediawiki-mcp-server:search-page",{query:i,limit:e})),r.includes("pubmed")&&t.push(O(i,"pubmed-mcp-server:search_pubmed_key_words",{key_words:i,num_results:e}));const d=await Promise.allSettled(t),a=[];return d.forEach(m=>{m.status==="fulfilled"&&a.push(...m.value)}),a.sort((m,u)=>u.relevance-m.relevance).slice(0,e*2)}async function Ve(i,r=["vidensarkiv","web_search"]){try{const e=await _(i.label,r,5),t=await fetch(`${k}/llm/complete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:`Baseret pÃ¥ emnet "${i.label}" og fÃ¸lgende sÃ¸geresultater, identificer 3-5 relaterede nÃ¸glebegreber der ville vÃ¦re relevante at udforske:

SÃ¸geresultater:
${e.map(o=>`- ${o.title}: ${o.snippet}`).join(`
`)}

Svar i JSON format:
{
  "concepts": [
    { "label": "Koncept navn", "relation": "relates_to|causes|part_of|leads_to", "description": "Kort beskrivelse" }
  ]
}`,max_tokens:500})});if(!t.ok)return Y(i,e);const d=await t.json();let a;try{a=JSON.parse(d.text||d.content||"{}").concepts||[]}catch{return Y(i,e)}const m=a.map(o=>({id:"",label:o.label,description:o.description,type:"expanded",source:Ie(e,o.label),size:35,color:E.expanded,createdAt:new Date().toISOString()})),u=a.map(o=>({sourceId:i.id,targetId:"",label:o.relation,type:o.relation||"relates_to",weight:.7,animated:!0}));return{nodes:m,edges:u,suggestions:e.slice(0,3).map(o=>o.title)}}catch(e){return console.error("[DataSource] AI expansion error:",e),{nodes:[],edges:[]}}}function Y(i,r){const e=r.slice(0,3).map(d=>({id:"",label:d.title.slice(0,30),description:d.snippet,type:"expanded",source:d.source,sourceUrl:d.url,size:35,color:E.expanded,createdAt:new Date().toISOString()})),t=e.map(()=>({sourceId:i.id,targetId:"",type:"relates_to",weight:.6,animated:!0}));return{nodes:e,edges:t}}function Ie(i,r){const e=i.find(t=>t.title.toLowerCase().includes(r.toLowerCase())||r.toLowerCase().includes(t.title.toLowerCase()));return(e==null?void 0:e.source)||"web"}function Fe(i){const r=i.match(/Title:\s*(.+?)(?:\n|$)/);if(r)return r[1].trim();const e=i.split(`
`)[0];return e.slice(0,50)+(e.length>50?"...":"")}const Oe={vidensarkiv:$,local_files:ue,browser_history:ce,outlook_emails:le,web_search:oe,wikipedia:ae,pubmed:R,google_drive:R},_e=i=>({vidensarkiv:"Alle indekserede dokumenter og data",local_files:"Scannede filer fra din computer",browser_history:"BesÃ¸gte websites og sÃ¸gninger",outlook_emails:"Emails fra Outlook",web_search:"SÃ¸g pÃ¥ internettet",wikipedia:"Wikipedia artikler",pubmed:"Medicinske forskningsartikler",google_drive:"Google Drive dokumenter"})[i]||"",$e=({onClose:i})=>{const r=t=>{const d=P.find(a=>a.type===t);d&&(d.enabled=!d.enabled)},e=P.filter(t=>t.enabled).length;return s.jsxDEV("div",{className:"absolute top-16 right-4 z-40 w-80 bg-slate-900/95 backdrop-blur-xl border border-white/10 rounded-xl shadow-2xl overflow-hidden",children:[s.jsxDEV("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/10 bg-white/5",children:[s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV($,{className:"w-4 h-4 text-purple-400"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/DataSourcesPanel.tsx",lineNumber:64,columnNumber:11},void 0),s.jsxDEV("h3",{className:"text-sm font-medium text-white",children:"Data Kilder"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/DataSourcesPanel.tsx",lineNumber:65,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/DataSourcesPanel.tsx",lineNumber:63,columnNumber:9},void 0),s.jsxDEV("button",{onClick:i,className:"p-1 hover:bg-white/10 rounded transition-colors",children:s.jsxDEV(ne,{className:"w-4 h-4 text-white/60"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/DataSourcesPanel.tsx",lineNumber:71,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/DataSourcesPanel.tsx",lineNumber:67,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/DataSourcesPanel.tsx",lineNumber:62,columnNumber:7},void 0),s.jsxDEV("div",{className:"p-2 max-h-[400px] overflow-y-auto",children:P.map(t=>{const d=Oe[t.type];return s.jsxDEV("button",{onClick:()=>r(t.type),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all ${t.enabled?"bg-white/10 border border-white/20":"hover:bg-white/5 border border-transparent"}`,children:[s.jsxDEV("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:`${t.color}20`,color:t.color},children:s.jsxDEV(d,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/DataSourcesPanel.tsx",lineNumber:95,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/DataSourcesPanel.tsx",lineNumber:91,columnNumber:15},void 0),s.jsxDEV("div",{className:"flex-1 text-left",children:[s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV("span",{className:"text-sm font-medium text-white",children:t.label},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/DataSourcesPanel.tsx",lineNumber:101,columnNumber:19},void 0),s.jsxDEV("span",{className:"text-xs text-white/40",children:t.icon},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/DataSourcesPanel.tsx",lineNumber:104,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/DataSourcesPanel.tsx",lineNumber:100,columnNumber:17},void 0),s.jsxDEV("span",{className:"text-[10px] text-white/40",children:_e(t.type)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/DataSourcesPanel.tsx",lineNumber:106,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/DataSourcesPanel.tsx",lineNumber:99,columnNumber:15},void 0),s.jsxDEV("div",{className:`w-5 h-5 rounded-full flex items-center justify-center transition-colors ${t.enabled?"bg-green-500":"bg-white/10"}`,children:t.enabled&&s.jsxDEV(pe,{className:"w-3 h-3 text-white"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/DataSourcesPanel.tsx",lineNumber:117,columnNumber:36},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/DataSourcesPanel.tsx",lineNumber:112,columnNumber:15},void 0)]},t.type,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/DataSourcesPanel.tsx",lineNumber:81,columnNumber:13},void 0)})},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/DataSourcesPanel.tsx",lineNumber:76,columnNumber:7},void 0),s.jsxDEV("div",{className:"px-4 py-2.5 border-t border-white/10 bg-white/5",children:s.jsxDEV("span",{className:"text-[10px] text-white/40",children:[e," af ",P.length," kilder aktive"]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/DataSourcesPanel.tsx",lineNumber:126,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/DataSourcesPanel.tsx",lineNumber:125,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/DataSourcesPanel.tsx",lineNumber:60,columnNumber:5},void 0)},ze=({node:i,isSelected:r,isHovered:e,zoom:t,onSelect:d,onHover:a,onMove:m,onExpand:u,onDelete:o,onToggleTracking:c})=>{const[p,n]=T.useState(!1),[g,f]=T.useState({x:0,y:0}),b=i.color||E[i.type],w=i.source?je[i.source]:b,D=N=>{N.stopPropagation(),n(!0),f({x:N.clientX-i.position.x*t,y:N.clientY-i.position.y*t}),d()};return T.useEffect(()=>{if(!p)return;const N=M=>{m({x:(M.clientX-g.x)/t,y:(M.clientY-g.y)/t})},C=()=>n(!1);return window.addEventListener("mousemove",N),window.addEventListener("mouseup",C),()=>{window.removeEventListener("mousemove",N),window.removeEventListener("mouseup",C)}},[p,g,t,m]),s.jsxDEV("g",{transform:`translate(${i.position.x}, ${i.position.y})`,onMouseDown:D,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),style:{cursor:p?"grabbing":"grab"},children:[(r||e)&&s.jsxDEV("circle",{r:i.size+8,fill:"none",stroke:b,strokeWidth:2,strokeOpacity:.3,className:"animate-pulse"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:116,columnNumber:9},void 0),s.jsxDEV("circle",{r:i.size,fill:`${b}20`,stroke:b,strokeWidth:r?3:2,style:{filter:r?`drop-shadow(0 0 10px ${b})`:"none"}},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:127,columnNumber:7},void 0),i.isTracking&&s.jsxDEV("circle",{r:i.size+4,fill:"none",stroke:"#00FF88",strokeWidth:2,strokeDasharray:"4 4",className:"animate-spin",style:{animationDuration:"10s"}},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:139,columnNumber:9},void 0),i.isExpanding&&s.jsxDEV("g",{children:s.jsxDEV("circle",{r:i.size+6,fill:"none",stroke:b,strokeWidth:2,strokeOpacity:.5,children:[s.jsxDEV("animate",{attributeName:"r",from:i.size,to:i.size+20,dur:"1s",repeatCount:"indefinite"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:154,columnNumber:13},void 0),s.jsxDEV("animate",{attributeName:"stroke-opacity",from:"0.8",to:"0",dur:"1s",repeatCount:"indefinite"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:155,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:153,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:152,columnNumber:9},void 0),i.source&&s.jsxDEV("circle",{cx:i.size*.7,cy:-i.size*.7,r:8,fill:w,stroke:"#0F172A",strokeWidth:2},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:162,columnNumber:9},void 0),i.isRoot&&s.jsxDEV("circle",{cx:-i.size*.7,cy:-i.size*.7,r:6,fill:"#FFD700",stroke:"#0F172A",strokeWidth:2},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:174,columnNumber:9},void 0),s.jsxDEV("text",{y:4,textAnchor:"middle",fill:"white",fontSize:i.size>40?12:10,fontWeight:"500",style:{pointerEvents:"none",userSelect:"none"},children:i.label.length>15?`${i.label.slice(0,15)}...`:i.label},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:185,columnNumber:7},void 0),e&&!p&&s.jsxDEV("g",{transform:`translate(0, ${i.size+20})`,children:[s.jsxDEV("rect",{x:-60,y:-10,width:120,height:28,rx:4,fill:"#1E293B",stroke:"#334155"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:199,columnNumber:11},void 0),s.jsxDEV("g",{transform:"translate(-40, 0)",onClick:N=>{N.stopPropagation(),u()},style:{cursor:"pointer"},children:[s.jsxDEV("circle",{r:10,fill:"#8B5CF620",stroke:"#8B5CF6"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:207,columnNumber:13},void 0),s.jsxDEV(X,{x:-5,y:-5,width:10,height:10,color:"#8B5CF6"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:208,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:202,columnNumber:11},void 0),s.jsxDEV("g",{transform:"translate(0, 0)",onClick:N=>{N.stopPropagation(),c()},style:{cursor:"pointer"},children:[s.jsxDEV("circle",{r:10,fill:i.isTracking?"#00FF8820":"#33415520",stroke:i.isTracking?"#00FF88":"#334155"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:217,columnNumber:13},void 0),s.jsxDEV(ve,{x:-5,y:-5,width:10,height:10,color:i.isTracking?"#00FF88":"#64748B"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:218,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:212,columnNumber:11},void 0),s.jsxDEV("g",{transform:"translate(40, 0)",onClick:N=>{N.stopPropagation(),o()},style:{cursor:"pointer"},children:[s.jsxDEV("circle",{r:10,fill:"#EF444420",stroke:"#EF4444"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:227,columnNumber:13},void 0),s.jsxDEV(J,{x:-5,y:-5,width:10,height:10,color:"#EF4444"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:228,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:222,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:198,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:107,columnNumber:5},void 0)},Le=({edge:i,sourceNode:r,targetNode:e,isSelected:t})=>{const d=We[i.type]||"#6B7280",a=e.position.x-r.position.x,m=e.position.y-r.position.y,u=Math.sqrt(a*a+m*m),o=(r.position.x+e.position.x)/2,c=(r.position.y+e.position.y)/2,p=-m/u,n=a/u,g=Math.min(u*.15,40),f=o+p*g,b=c+n*g,w=Math.atan2(m,a),D=r.position.x+Math.cos(w)*r.size,N=r.position.y+Math.sin(w)*r.size,C=e.position.x-Math.cos(w)*e.size,M=e.position.y-Math.sin(w)*e.size,W=`M ${D} ${N} Q ${f} ${b} ${C} ${M}`;return s.jsxDEV("g",{children:[s.jsxDEV("path",{d:W,fill:"none",stroke:d,strokeWidth:4*i.weight,strokeOpacity:.1},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:273,columnNumber:7},void 0),s.jsxDEV("path",{d:W,fill:"none",stroke:d,strokeWidth:2*i.weight,strokeOpacity:t?.8:.5,markerEnd:"url(#arrowhead)"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:282,columnNumber:7},void 0),i.animated&&s.jsxDEV("path",{d:W,fill:"none",stroke:d,strokeWidth:1,strokeDasharray:"6 6",strokeOpacity:.6,children:s.jsxDEV("animate",{attributeName:"stroke-dashoffset",from:"0",to:"-24",dur:"1s",repeatCount:"indefinite"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:301,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:293,columnNumber:9},void 0),i.label&&s.jsxDEV("text",{x:f,y:b-8,textAnchor:"middle",fill:"rgba(255,255,255,0.5)",fontSize:9,children:i.label},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:307,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:271,columnNumber:5},void 0)},Qe=()=>{const i=T.useRef(null),[r,e]=T.useState(!1),[t,d]=T.useState({x:0,y:0}),[a,m]=T.useState(!1),{nodes:u,edges:o,selectedNodeId:c,hoveredNodeId:p,viewport:n,isSearching:g,searchQuery:f,autoTrackEnabled:b,setSearchQuery:w,setSearching:D,addNodeFromSearch:N,removeNode:C,moveNode:M,selectNode:W,hoverNode:K,setNodeExpanding:U,toggleNodeTracking:Q,expandNode:z,setViewport:L,setZoom:B,resetViewport:Z,applyForceLayout:G,applyRadialLayout:q,setAutoTrack:ee,undo:V,redo:I,clear:ie}=Ee(),se=async l=>{if(l.preventDefault(),!!f.trim()){D(!0);try{const x=P.filter(y=>y.enabled).map(y=>y.type),h=await _(f.trim(),x,5),v=h.length>0?`Fundet ${h.length} resultater i dine data`:void 0,j=N(f.trim(),v);h.length>0&&console.log(`[MindMap] Found ${h.length} results for "${f}"`)}catch(x){console.error("Search error:",x),N(f.trim())}finally{D(!1)}}},te=async l=>{const x=u.find(h=>h.id===l);if(!(!x||x.isExpanding)){U(l,!0);try{const h=P.filter(j=>j.enabled).map(j=>j.type),v=await Ve(x,h);if(v.nodes.length>0){const j=v.edges.map(y=>({...y,sourceId:l}));z(l,v.nodes,j)}else{const j=await _(x.label,h,3);if(j.length>0){const y=j.map(S=>({label:S.title.slice(0,30),description:S.snippet,type:"expanded",source:S.source,sourceUrl:S.url,size:35,color:E.expanded})),re=y.map(()=>({sourceId:l,targetId:"",type:"relates_to",weight:.6,animated:!0}));z(l,y,re)}else U(l,!1),console.warn("No expansion results found")}}catch(h){console.error("Expansion error:",h),U(l,!1)}}};T.useEffect(()=>{const l=i.current;if(!l)return;const x=h=>{h.preventDefault();const v=h.deltaY>0?-.1:.1;B(n.zoom+v)};return l.addEventListener("wheel",x,{passive:!1}),()=>l.removeEventListener("wheel",x)},[n.zoom,B]);const de=l=>{(l.target===i.current||l.target.tagName==="svg")&&(e(!0),d({x:l.clientX-n.x,y:l.clientY-n.y}),W(null))};return T.useEffect(()=>{if(!r)return;const l=h=>{L({...n,x:h.clientX-t.x,y:h.clientY-t.y})},x=()=>e(!1);return window.addEventListener("mousemove",l),window.addEventListener("mouseup",x),()=>{window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",x)}},[r,t,n,L]),T.useEffect(()=>{const l=x=>{x.key==="Delete"&&c&&C(c),x.ctrlKey&&x.key==="z"&&V(),x.ctrlKey&&x.key==="y"&&I(),x.key==="Escape"&&W(null)};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[c,C,V,I,W]),s.jsxDEV("div",{className:"relative w-full h-full min-h-[600px] bg-slate-950 overflow-hidden",children:[s.jsxDEV("header",{className:"absolute top-0 left-0 right-0 z-30 h-14 border-b border-white/10 bg-black/50 backdrop-blur-xl",children:s.jsxDEV("div",{className:"h-full px-4 flex items-center justify-between",children:[s.jsxDEV("form",{onSubmit:se,className:"flex items-center gap-2",children:[s.jsxDEV("div",{className:"relative",children:[s.jsxDEV(me,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/40"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:518,columnNumber:15},void 0),s.jsxDEV("input",{type:"text",value:f,onChange:l=>w(l.target.value),placeholder:"SÃ¸g efter emne â†’ bliver til node...",className:"w-80 pl-10 pr-4 py-2 bg-white/5 border border-white/10 rounded-lg text-sm text-white placeholder-white/40 focus:outline-none focus:border-cyan-500/50 focus:ring-1 focus:ring-cyan-500/30"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:519,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:517,columnNumber:13},void 0),s.jsxDEV("button",{type:"submit",disabled:!f.trim()||g,className:"px-4 py-2 bg-cyan-500/20 hover:bg-cyan-500/30 border border-cyan-500/30 rounded-lg text-sm text-cyan-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[g?s.jsxDEV(ge,{className:"w-4 h-4 animate-spin"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:533,columnNumber:17},void 0):s.jsxDEV(fe,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:535,columnNumber:17},void 0),"TilfÃ¸j Node"]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:527,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:516,columnNumber:11},void 0),s.jsxDEV("div",{className:"flex items-center gap-4",children:[s.jsxDEV("span",{className:"text-xs text-white/40",children:[u.length," nodes Â· ",o.length," edges"]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:543,columnNumber:13},void 0),s.jsxDEV("div",{className:"flex items-center gap-1 bg-white/5 rounded-lg p-1",children:[s.jsxDEV("button",{onClick:V,className:"p-1.5 hover:bg-white/10 rounded",title:"Undo (Ctrl+Z)",children:s.jsxDEV(be,{className:"w-4 h-4 text-white/60"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:549,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:548,columnNumber:15},void 0),s.jsxDEV("button",{onClick:I,className:"p-1.5 hover:bg-white/10 rounded",title:"Redo (Ctrl+Y)",children:s.jsxDEV(xe,{className:"w-4 h-4 text-white/60"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:552,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:551,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:547,columnNumber:13},void 0),s.jsxDEV("div",{className:"flex items-center gap-1 bg-white/5 rounded-lg p-1",children:[s.jsxDEV("button",{onClick:()=>B(n.zoom-.2),className:"p-1.5 hover:bg-white/10 rounded",children:s.jsxDEV(Ne,{className:"w-4 h-4 text-white/60"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:558,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:557,columnNumber:15},void 0),s.jsxDEV("span",{className:"text-xs text-white/50 w-12 text-center",children:[Math.round(n.zoom*100),"%"]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:560,columnNumber:15},void 0),s.jsxDEV("button",{onClick:()=>B(n.zoom+.2),className:"p-1.5 hover:bg-white/10 rounded",children:s.jsxDEV(we,{className:"w-4 h-4 text-white/60"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:562,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:561,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:556,columnNumber:13},void 0),s.jsxDEV("div",{className:"flex items-center gap-1 bg-white/5 rounded-lg p-1",children:[s.jsxDEV("button",{onClick:G,className:"p-1.5 hover:bg-white/10 rounded",title:"Force Layout",children:s.jsxDEV(A,{className:"w-4 h-4 text-white/60"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:568,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:567,columnNumber:15},void 0),s.jsxDEV("button",{onClick:q,className:"p-1.5 hover:bg-white/10 rounded",title:"Radial Layout",children:s.jsxDEV(he,{className:"w-4 h-4 text-white/60"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:571,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:570,columnNumber:15},void 0),s.jsxDEV("button",{onClick:Z,className:"p-1.5 hover:bg-white/10 rounded",title:"Reset View",children:s.jsxDEV(De,{className:"w-4 h-4 text-white/60"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:574,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:573,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:566,columnNumber:13},void 0),s.jsxDEV("button",{onClick:()=>ee(!b),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs transition-colors ${b?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-white/5 text-white/50 border border-white/10"}`,children:[s.jsxDEV(Ce,{className:`w-3.5 h-3.5 ${b?"animate-spin":""}`,style:{animationDuration:"3s"}},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:586,columnNumber:15},void 0),"Auto-Track"]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:578,columnNumber:13},void 0),s.jsxDEV("button",{onClick:ie,className:"p-2 hover:bg-red-500/20 rounded-lg transition-colors group",title:"Clear All",children:s.jsxDEV(J,{className:"w-4 h-4 text-white/40 group-hover:text-red-400"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:595,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:590,columnNumber:13},void 0),s.jsxDEV("button",{onClick:()=>m(!a),className:`p-2 rounded-lg transition-colors ${a?"bg-cyan-500/20 text-cyan-400":"hover:bg-white/10 text-white/60"}`,title:"Data Sources",children:s.jsxDEV($,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:605,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:598,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:542,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:514,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:513,columnNumber:7},void 0),a&&s.jsxDEV($e,{onClose:()=>m(!1)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:613,columnNumber:9},void 0),s.jsxDEV("div",{ref:i,className:"absolute inset-0 top-14",style:{cursor:r?"grabbing":"grab"},onMouseDown:de,children:[s.jsxDEV("div",{className:"absolute inset-0",style:{backgroundImage:`
              radial-gradient(circle at 50% 50%, rgba(139, 92, 246, 0.03) 0%, transparent 50%),
              linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px),
              linear-gradient(90deg, rgba(255,255,255,0.02) 1px, transparent 1px)
            `,backgroundSize:"100% 100%, 40px 40px, 40px 40px",backgroundPosition:`center, ${n.x}px ${n.y}px, ${n.x}px ${n.y}px`}},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:624,columnNumber:9},void 0),s.jsxDEV("svg",{className:"absolute inset-0",style:{transform:`translate(${n.x}px, ${n.y}px) scale(${n.zoom})`,transformOrigin:"0 0"},width:"2000",height:"1200",children:[s.jsxDEV("defs",{children:s.jsxDEV("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:s.jsxDEV("polygon",{points:"0 0, 10 3.5, 0 7",fill:"rgba(255,255,255,0.3)"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:656,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:648,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:647,columnNumber:11},void 0),o.map(l=>{const x=u.find(v=>v.id===l.sourceId),h=u.find(v=>v.id===l.targetId);return!x||!h?null:s.jsxDEV(Le,{edge:l,sourceNode:x,targetNode:h,isSelected:c===l.sourceId||c===l.targetId},l.id,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:666,columnNumber:15},void 0)}),u.map(l=>s.jsxDEV(ze,{node:l,isSelected:l.id===c,isHovered:l.id===p,zoom:n.zoom,onSelect:()=>W(l.id),onHover:x=>K(x?l.id:null),onMove:x=>M(l.id,x),onExpand:()=>te(l.id),onDelete:()=>C(l.id),onToggleTracking:()=>Q(l.id)},l.id,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:678,columnNumber:13},void 0))]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:638,columnNumber:9},void 0),u.length===0&&s.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxDEV("div",{className:"text-center",children:[s.jsxDEV("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-purple-500/10 border border-purple-500/20 flex items-center justify-center",children:s.jsxDEV(A,{className:"w-10 h-10 text-purple-400"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:699,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:698,columnNumber:15},void 0),s.jsxDEV("h3",{className:"text-lg font-medium text-white mb-2",children:"Start din MindMap"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:701,columnNumber:15},void 0),s.jsxDEV("p",{className:"text-sm text-white/50 max-w-md",children:["SÃ¸g efter et emne ovenfor. Det bliver din fÃ¸rste node.",s.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:703,columnNumber:71},void 0),"Klik pÃ¥ ",s.jsxDEV(X,{className:"inline w-4 h-4 text-purple-400"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:704,columnNumber:25},void 0)," for at lade AI udvide med relaterede emner."]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:702,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:697,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:696,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:617,columnNumber:7},void 0),s.jsxDEV("div",{className:"absolute bottom-4 left-4 bg-black/60 backdrop-blur-sm rounded-lg border border-white/10 p-3",children:[s.jsxDEV("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-2",children:"Node Typer"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:713,columnNumber:9},void 0),s.jsxDEV("div",{className:"space-y-1.5",children:Object.entries(E).map(([l,x])=>s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:x}},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:717,columnNumber:15},void 0),s.jsxDEV("span",{className:"text-[10px] text-white/60 capitalize",children:l},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:718,columnNumber:15},void 0)]},l,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:716,columnNumber:13},void 0))},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:714,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:712,columnNumber:7},void 0),s.jsxDEV("div",{className:"absolute bottom-4 right-4 text-[10px] text-white/30 space-y-1",children:[s.jsxDEV("p",{children:"Scroll: Zoom Â· Drag: Pan Â· Del: Slet node"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:726,columnNumber:9},void 0),s.jsxDEV("p",{children:"Ctrl+Z: Undo Â· Ctrl+Y: Redo Â· Esc: Deselect"},void 0,!1,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:727,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:725,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/MindMapBuilder/index.tsx",lineNumber:511,columnNumber:5},void 0)};export{Qe as MindMapBuilderWidget,Qe as default};
