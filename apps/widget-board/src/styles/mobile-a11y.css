/**
 * Mobile Accessibility Fixes
 * FIX: Touch target sizes (minimum 44x44px)
 *
 * Ensures proper touch targets for mobile devices
 * Following WCAG 2.1 Level AAA recommendation (44x44 CSS pixels)
 */

/* Global button sizing for mobile */
@media (max-width: 768px) {
  /* Ensure minimum touch target size */
  button,
  a[role="button"],
  input[type="button"],
  input[type="submit"],
  input[type="reset"],
  input[type="file"]::file-selector-button {
    min-width: 44px;
    min-height: 44px;
    padding: 12px 16px;
    font-size: 16px; /* Prevents zoom on iOS */
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
  }

  /* Interactive form elements */
  input[type="checkbox"],
  input[type="radio"] {
    min-width: 44px;
    min-height: 44px;
    margin: 6px; /* Adds extra spacing around smaller controls */
    cursor: pointer;
  }

  /* Select dropdowns */
  select {
    min-height: 44px;
    padding: 10px;
    font-size: 16px;
  }

  /* Text inputs */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="search"],
  input[type="url"],
  input[type="tel"],
  textarea {
    min-height: 44px;
    padding: 10px;
    font-size: 16px;
  }

  /* Icons that are clickable */
  .icon-button,
  [class*="icon"][role="button"],
  svg[role="button"] {
    min-width: 44px;
    min-height: 44px;
    padding: 8px;
  }

  /* Widget header controls */
  .widget-header button,
  .widget-close-button,
  .widget-settings-button,
  .widget-minimize-button {
    min-width: 44px;
    min-height: 44px;
    padding: 8px;
  }

  /* Navigation elements */
  nav button,
  nav a,
  .sidebar button,
  .menu-item {
    min-height: 44px;
    padding: 12px 16px;
  }

  /* Spacing between touch targets */
  button + button,
  a[role="button"] + a[role="button"],
  input[type="checkbox"] + input[type="checkbox"],
  input[type="radio"] + input[type="radio"] {
    margin-left: 8px;
  }

  /* Grid of buttons */
  .button-grid button,
  .button-row button {
    min-width: 44px;
    min-height: 44px;
    margin: 4px;
  }

  /* Link targets */
  a {
    min-height: 44px;
    padding: 6px 8px;
    display: inline-block;
  }

  /* Focus indicators (critical for accessibility) */
  button:focus,
  a:focus,
  input:focus,
  select:focus,
  textarea:focus,
  [role="button"]:focus {
    outline: 3px solid #4A90E2;
    outline-offset: 2px;
  }

  /* Touch feedback */
  button:active,
  a:active,
  input:active,
  [role="button"]:active {
    opacity: 0.8;
    transform: scale(0.98);
    transition: all 100ms ease-out;
  }

  /* Prevent double-tap zoom on interactive elements */
  button,
  a[role="button"],
  input[type="button"],
  select,
  textarea {
    touch-action: manipulation;
  }

  /* Hover states for larger targets on touch devices */
  @media (hover: none) and (pointer: coarse) {
    button:hover,
    a:hover,
    [role="button"]:hover {
      background-color: rgba(74, 144, 226, 0.05);
    }
  }
}

/* Tablet optimization (medium touch targets) */
@media (min-width: 769px) and (max-width: 1024px) {
  button,
  a[role="button"],
  input[type="button"],
  input[type="submit"] {
    min-width: 40px;
    min-height: 40px;
    padding: 10px 14px;
  }

  input[type="checkbox"],
  input[type="radio"] {
    min-width: 40px;
    min-height: 40px;
  }
}

/* Desktop - standard button sizes */
@media (min-width: 1025px) {
  button,
  a[role="button"],
  input[type="button"],
  input[type="submit"] {
    min-width: 32px;
    min-height: 32px;
    padding: 8px 12px;
  }

  /* Focus indicators */
  button:focus,
  a:focus,
  input:focus {
    outline: 2px solid #4A90E2;
    outline-offset: 1px;
  }
}

/* Prevent text selection on repeatedly tapped targets */
button,
[role="button"],
a[role="button"] {
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

/* Ensure proper spacing in lists of clickable items */
ul.button-list li,
.item-list > .item,
.menu-list > .menu-item {
  min-height: 44px;
  display: flex;
  align-items: center;
}

/* High contrast focus indicators */
@media (prefers-contrast: more) {
  button:focus,
  a:focus,
  input:focus,
  select:focus,
  textarea:focus,
  [role="button"]:focus {
    outline: 4px solid #000;
    outline-offset: 2px;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  button:active,
  a:active,
  input:active,
  [role="button"]:active {
    transform: none;
    transition: none;
  }
}
