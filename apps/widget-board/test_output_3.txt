
[1m[46m RUN [49m[22m [36mv4.0.12 [39m[90mC:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board[39m

 [32mÃ”Â£Ã´[39m src/hooks/__tests__/useMCP.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 21[2mms[22m[39m
stderr | widgets/__tests__/LocalScanWidget.test.tsx > LocalScanWidget > renders form with path and keyword inputs
Unknown event handler property `onValueChange`. It will be ignored.
You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.

stderr | widgets/__tests__/LocalScanWidget.test.tsx > LocalScanWidget > renders start scan button
You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.

 [32mÃ”Â£Ã´[39m App.test.tsx [2m([22m[2m2 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32mÃ”Â£Ã´[39m widgets/__tests__/FeedIngestionWidget.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 66[2mms[22m[39m
stderr | request (C:\Users\claus\Projects\WidgeTDC\WidgeTDC\apps\widget-board\utils\request.ts:52:13)
Request failed: Error: HTTP error! status: 500
    at request (C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/utils/request.ts:46:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at getWidgetPermissions (C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/utils/permissionsApi.ts:11:20)
    at loadPermissions (C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/contexts/PermissionContext.tsx:18:21)

stderr | request (C:\Users\claus\Projects\WidgeTDC\WidgeTDC\apps\widget-board\utils\request.ts:52:13)
Request failed: Error: HTTP error! status: 500
    at request (C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/utils/request.ts:46:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at getWidgetPermissions (C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/utils/permissionsApi.ts:11:20)
    at loadPermissions (C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/contexts/PermissionContext.tsx:18:21)

stderr | request (C:\Users\claus\Projects\WidgeTDC\WidgeTDC\apps\widget-board\utils\request.ts:52:13)
Request failed: Error: HTTP error! status: 500
    at request (C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/utils/request.ts:46:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at getWidgetPermissions (C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/utils/permissionsApi.ts:11:20)
    at loadPermissions (C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/contexts/PermissionContext.tsx:18:21)

[90mstdout[2m | src/utils/securityApi.test.ts[2m > [22m[2mSecurityApi[2m > [22m[2mingests feed with dedupe and emits event
[22m[39mIngesting feed (mock) test-feed

 [32mÃ”Â£Ã´[39m src/utils/securityApi.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 5[2mms[22m[39m
stderr | widgets/__tests__/LocalScanWidget.test.tsx > LocalScanWidget > renders auto-scan checkbox
You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.

stderr | widgets/__tests__/LocalScanWidget.test.tsx > LocalScanWidget > toggles auto-scan checkbox state
You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.

stderr | widgets/__tests__/LocalScanWidget.test.tsx > LocalScanWidget > allows button click without errors
You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.

stderr | widgets/__tests__/LocalScanWidget.test.tsx > LocalScanWidget > allows button click without errors
MCP send failed: TypeError: Failed to parse URL from /api/mcp/route
    at node:internal/deps/undici/undici:13510:13
    at C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/src/hooks/useMCP.ts:38:26
    at C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/LocalScanWidget.tsx:62:24 {
  [cause]: TypeError: Invalid URL
      at new URL (node:internal/url:825:25)
      at new URL$1 (file:///C:/Users/claus/Projects/WidgeTDC/WidgeTDC/node_modules/vitest/dist/chunks/index.QWbK7rHY.js:556:9)
      at new Request (node:internal/deps/undici/undici:9586:25)
      at fetch (node:internal/deps/undici/undici:10315:25)
      at fetch (node:internal/deps/undici/undici:13508:10)
      at fetch (node:internal/bootstrap/web/exposed-window-or-worker:75:12)
      at C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/src/hooks/useMCP.ts:38:32
      at C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/LocalScanWidget.tsx:62:30
      at executeDispatch (C:\Users\claus\Projects\WidgeTDC\WidgeTDC\node_modules\react-dom\cjs\react-dom-client.development.js:19116:9)
      at runWithFiberInDEV (C:\Users\claus\Projects\WidgeTDC\WidgeTDC\node_modules\react-dom\cjs\react-dom-client.development.js:874:13) {
    code: 'ERR_INVALID_URL',
    input: '/api/mcp/route'
  }
}

stderr | widgets/__tests__/LocalScanWidget.test.tsx > LocalScanWidget > allows button click without errors
Scan error (discreet mode): TypeError: Failed to parse URL from /api/mcp/route
    at node:internal/deps/undici/undici:13510:13
    at C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/src/hooks/useMCP.ts:38:26
    at C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/LocalScanWidget.tsx:62:24 {
  [cause]: TypeError: Invalid URL
      at new URL (node:internal/url:825:25)
      at new URL$1 (file:///C:/Users/claus/Projects/WidgeTDC/WidgeTDC/node_modules/vitest/dist/chunks/index.QWbK7rHY.js:556:9)
      at new Request (node:internal/deps/undici/undici:9586:25)
      at fetch (node:internal/deps/undici/undici:10315:25)
      at fetch (node:internal/deps/undici/undici:13508:10)
      at fetch (node:internal/bootstrap/web/exposed-window-or-worker:75:12)
      at C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/src/hooks/useMCP.ts:38:32
      at C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/LocalScanWidget.tsx:62:30
      at executeDispatch (C:\Users\claus\Projects\WidgeTDC\WidgeTDC\node_modules\react-dom\cjs\react-dom-client.development.js:19116:9)
      at runWithFiberInDEV (C:\Users\claus\Projects\WidgeTDC\WidgeTDC\node_modules\react-dom\cjs\react-dom-client.development.js:874:13) {
    code: 'ERR_INVALID_URL',
    input: '/api/mcp/route'
  }
}

stderr | widgets/__tests__/SearchInterfaceWidget.test.tsx
Security search bootstrap failed TypeError: fetch failed
    at node:internal/deps/undici/undici:13510:13
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at request (C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/utils/securityApi.ts:5:20)
    at async Promise.all (index 1)
    at C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SearchInterfaceWidget.tsx:156:53 {
  [cause]: AggregateError: 
      at internalConnectMultiple (node:net:1134:18)
      at afterConnectMultiple (node:net:1715:7) {
    code: 'ECONNREFUSED',
    [errors]: [ [Error], [Error] ]
  }
}

stderr | widgets/__tests__/SearchInterfaceWidget.test.tsx
Security search bootstrap failed TypeError: fetch failed
    at node:internal/deps/undici/undici:13510:13
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at request (C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/utils/securityApi.ts:5:20)
    at async Promise.all (index 0)
    at C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SearchInterfaceWidget.tsx:156:53 {
  [cause]: AggregateError: 
      at internalConnectMultiple (node:net:1134:18)
      at afterConnectMultiple (node:net:1715:7) {
    code: 'ECONNREFUSED',
    [errors]: [ [Error], [Error] ]
  }
}

stderr | widgets/__tests__/SearchInterfaceWidget.test.tsx
Security search bootstrap failed TypeError: fetch failed
    at node:internal/deps/undici/undici:13510:13
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at request (C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/utils/securityApi.ts:5:20)
    at async Promise.all (index 0)
    at C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SearchInterfaceWidget.tsx:156:53 {
  [cause]: AggregateError: 
      at internalConnectMultiple (node:net:1134:18)
      at afterConnectMultiple (node:net:1715:7) {
    code: 'ECONNREFUSED',
    [errors]: [ [Error], [Error] ]
  }
}

stderr | widgets/__tests__/SearchInterfaceWidget.test.tsx
Security search bootstrap failed TypeError: fetch failed
    at node:internal/deps/undici/undici:13510:13
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at request (C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/utils/securityApi.ts:5:20)
    at async Promise.all (index 0)
    at C:/Users/claus/Projects/WidgeTDC/WidgeTDC/apps/widget-board/widgets/SearchInterfaceWidget.tsx:156:53 {
  [cause]: AggregateError: 
      at internalConnectMultiple (node:net:1134:18)
      at afterConnectMultiple (node:net:1715:7) {
    code: 'ECONNREFUSED',
    [errors]: [ [Error], [Error] ]
  }
}

 [32mÃ”Â£Ã´[39m widgets/__tests__/SearchInterfaceWidget.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[33m 358[2mms[22m[39m
 [32mÃ”Â£Ã´[39m widgets/__tests__/LocalScanWidget.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[33m 421[2mms[22m[39m
 [32mÃ”Â£Ã´[39m widgets/__tests__/ActivityStreamWidget.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 120[2mms[22m[39m
[90mstdout[2m | src/components/Dashboard/DashboardShell.test.tsx[2m > [22m[2mDashboardShell[2m > [22m[2mshould update active nav item when clicked
[22m[39mNavigating to: widgets

[90mstdout[2m | src/components/Dashboard/DashboardShell.test.tsx[2m > [22m[2mDashboardShell[2m > [22m[2mshould log navigation actions to console
[22m[39mNavigating to: widgets

 [32mÃ”Â£Ã´[39m src/components/Dashboard/DashboardShell.test.tsx [2m([22m[2m12 tests[22m[2m)[22m[33m 332[2mms[22m[39m
Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â» Unhandled Errors Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»

Vitest caught 5 unhandled errors during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â» Unhandled Rejection Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»
Error: HTTP error! status: 500
 Ã”Ã˜Â» request utils/request.ts:46:13
     44| 
     45|     if (!response.ok) {
     46|       throw new Error(`HTTP error! status: ${response.status}`);
       |             ^
     47|     }
     48| 
 Ã”Ã˜Â» processTicksAndRejections node:internal/process/task_queues:105:5
 Ã”Ã˜Â» getWidgetPermissions utils/permissionsApi.ts:11:20
 Ã”Ã˜Â» loadPermissions contexts/PermissionContext.tsx:18:21

This error originated in "widgets/__tests__/FeedIngestionWidget.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â» Unhandled Rejection Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»
Error: HTTP error! status: 500
 Ã”Ã˜Â» request utils/request.ts:46:13
     44| 
     45|     if (!response.ok) {
     46|       throw new Error(`HTTP error! status: ${response.status}`);
       |             ^
     47|     }
     48| 
 Ã”Ã˜Â» processTicksAndRejections node:internal/process/task_queues:105:5
 Ã”Ã˜Â» getWidgetPermissions utils/permissionsApi.ts:11:20
 Ã”Ã˜Â» loadPermissions contexts/PermissionContext.tsx:18:21

This error originated in "widgets/__tests__/FeedIngestionWidget.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â» Unhandled Rejection Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»
Error: HTTP error! status: 500
 Ã”Ã˜Â» request utils/request.ts:46:13
     44| 
     45|     if (!response.ok) {
     46|       throw new Error(`HTTP error! status: ${response.status}`);
       |             ^
     47|     }
     48| 
 Ã”Ã˜Â» processTicksAndRejections node:internal/process/task_queues:105:5
 Ã”Ã˜Â» getWidgetPermissions utils/permissionsApi.ts:11:20
 Ã”Ã˜Â» loadPermissions contexts/PermissionContext.tsx:18:21

This error originated in "widgets/__tests__/FeedIngestionWidget.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â» Unhandled Rejection Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»
Error: [vitest-worker]: Closing rpc while "onUnhandledError" was pending
 Ã”Ã˜Â» ../../node_modules/vitest/dist/chunks/init.D-GGeAxo.js:79:28
 Ã”Ã˜Â» ../../node_modules/vitest/dist/chunks/index.0kCJoeWi.js:133:14
 Ã”Ã˜Â» Proxy.$rejectPendingCalls ../../node_modules/vitest/dist/chunks/index.0kCJoeWi.js:129:36
 Ã”Ã˜Â» ../../node_modules/vitest/dist/chunks/init.D-GGeAxo.js:78:26
 Ã”Ã˜Â» ../../node_modules/vitest/dist/chunks/init.D-GGeAxo.js:107:42
 Ã”Ã˜Â» execute ../../node_modules/vitest/dist/chunks/init.D-GGeAxo.js:107:30
 Ã”Ã˜Â» processTicksAndRejections node:internal/process/task_queues:105:5
 Ã”Ã˜Â» process.onMessage ../../node_modules/vitest/dist/chunks/init.D-GGeAxo.js:232:14

This error originated in "widgets/__tests__/FeedIngestionWidget.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â» Unhandled Rejection Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»
Error: [vitest-worker]: Closing rpc while "onUnhandledError" was pending
 Ã”Ã˜Â» ../../node_modules/vitest/dist/chunks/init.D-GGeAxo.js:79:28
 Ã”Ã˜Â» ../../node_modules/vitest/dist/chunks/index.0kCJoeWi.js:133:14
 Ã”Ã˜Â» Proxy.$rejectPendingCalls ../../node_modules/vitest/dist/chunks/index.0kCJoeWi.js:129:36
 Ã”Ã˜Â» ../../node_modules/vitest/dist/chunks/init.D-GGeAxo.js:78:26
 Ã”Ã˜Â» ../../node_modules/vitest/dist/chunks/init.D-GGeAxo.js:107:42
 Ã”Ã˜Â» execute ../../node_modules/vitest/dist/chunks/init.D-GGeAxo.js:107:30
 Ã”Ã˜Â» processTicksAndRejections node:internal/process/task_queues:105:5
 Ã”Ã˜Â» process.onMessage ../../node_modules/vitest/dist/chunks/init.D-GGeAxo.js:232:14

This error originated in "widgets/__tests__/FeedIngestionWidget.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»


[2m Test Files [22m [1m[32m8 passed[39m[22m[90m (8)[39m
[2m      Tests [22m [1m[32m34 passed[39m[22m[90m (34)[39m
[2m     Errors [22m [1m[31m5 errors[39m[22m
[2m   Start at [22m 00:07:57
[2m   Duration [22m 1.97s[2m (transform 694ms, setup 1.39s, collect 867ms, tests 1.33s, environment 7.07s, prepare 154ms)[22m

