import{r as o,j as e,y as b,z as w,c as y,C as k,S as C,U as S,d as f,J as p}from"./ui-d27jHJxv.js";import"./vendor-BerfLJhL.js";const g=[{id:"architecture",name:"Architecture Expert",icon:w,color:"#3b82f6",focus:"System design, scalability, patterns"},{id:"security",name:"Security Expert",icon:y,color:"#ef4444",focus:"Vulnerabilities, compliance, auth"},{id:"backend",name:"Backend Expert",icon:k,color:"#10b981",focus:"APIs, databases, performance"},{id:"frontend",name:"Frontend Expert",icon:C,color:"#f59e0b",focus:"UX, accessibility, responsive"}],U=()=>{const[n,j]=o.useState(["architecture","security"]),[i,m]=o.useState(!1),[l,x]=o.useState(null),[E,u]=o.useState(null),N=s=>{j(r=>r.includes(s)?r.filter(t=>t!==s):[...r,s])},v=async s=>{var t;const r=(t=s.target.files)==null?void 0:t[0];if(r){u(r),m(!0);try{const a=new FormData;a.append("file",r),a.append("personas",JSON.stringify(n));const d=await(await fetch("/api/commands/sc/spec-panel",{method:"POST",body:a})).json();x(d)}catch(a){console.error("Review error:",a)}finally{m(!1)}}},h=s=>s>=.8?"text-success":s>=.6?"text-warning":"text-destructive";return e.jsxs("div",{className:"group flex flex-col h-full bg-card/5 backdrop-blur-sm rounded-lg border border-border/20 transition-all duration-300 hover:scale-[1.02] hover:-translate-y-1 shadow-[var(--shadow-card)] hover:shadow-[var(--shadow-hero)] overflow-hidden",children:[e.jsx("div",{className:"flex items-center justify-between p-4 border-b border-border/20 bg-gradient-to-r from-primary/5 to-accent/5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/20 rounded-lg animate-glow-pulse",children:e.jsx(b,{className:"w-6 h-6",style:{color:"hsl(var(--primary))"}})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Persona Coordinator"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Multi-Expert Review Panel"})]})]})}),e.jsxs("div",{className:"p-4 border-b border-border/20 bg-gradient-subtle",children:[e.jsx("p",{className:"text-sm font-semibold text-card-foreground mb-3",children:"Vælg eksperter til review:"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(s=>{const r=s.icon,t=n.includes(s.id);return e.jsxs("button",{onClick:()=>N(s.id),className:`p-4 rounded-lg border-2 transition-all duration-200 text-left backdrop-blur-sm ${t?"border-primary bg-primary/10 scale-105":"border-border bg-card/30 hover:bg-accent/50 hover:scale-[1.02]"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(r,{className:"w-6 h-6 transition-colors",style:{color:t?s.color:"hsl(var(--muted-foreground))"}}),e.jsx("span",{className:`font-semibold transition-colors ${t?"text-card-foreground":"text-muted-foreground"}`,children:s.name})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.focus})]},s.id)})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gradient-subtle",children:[!l&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center animate-fade-in",children:[e.jsxs("div",{className:"p-6 bg-card/50 backdrop-blur-sm rounded-2xl border border-border/10 mb-6",children:[e.jsx(b,{className:"w-16 h-16 mx-auto mb-4",style:{color:"hsl(var(--primary))"}}),e.jsx("h4",{className:"text-xl font-semibold text-card-foreground mb-2",children:"Upload specification for review"}),e.jsxs("p",{className:"text-muted-foreground mb-6 max-w-md",children:["Få feedback fra ",n.length," eksperter på din arkitektur, design eller specification"]}),e.jsxs("label",{className:"inline-flex items-center gap-2 btn-primary cursor-pointer",children:[e.jsx(S,{className:"w-5 h-5"}),e.jsx("span",{children:"Upload dokument"}),e.jsx("input",{type:"file",onChange:v,className:"hidden",accept:".md,.txt,.pdf,.docx",disabled:i||n.length===0})]}),n.length===0&&e.jsx("p",{className:"mt-4 text-sm text-destructive animate-fade-in",children:"⚠️ Vælg mindst én ekspert"}),i&&e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-muted-foreground animate-fade-in",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-t-transparent rounded-full animate-spin",style:{borderColor:"hsl(var(--primary))"}}),e.jsxs("span",{children:["Gennemgår med ",n.length," eksperter..."]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-left max-w-2xl",children:[e.jsxs("div",{className:"p-4 bg-success/10 backdrop-blur rounded-lg border border-success/20 transition-transform hover:scale-105",children:[e.jsx(f,{className:"w-8 h-8 mb-2",style:{color:"hsl(var(--success))"}}),e.jsx("p",{className:"text-sm font-semibold text-card-foreground",children:"Consensus"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Where experts agree"})]}),e.jsxs("div",{className:"p-4 bg-warning/10 backdrop-blur rounded-lg border border-warning/20 transition-transform hover:scale-105",children:[e.jsx(p,{className:"w-8 h-8 mb-2",style:{color:"hsl(var(--warning))"}}),e.jsx("p",{className:"text-sm font-semibold text-card-foreground",children:"Trade-offs"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Productive tensions"})]})]})]}),l&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("div",{className:"p-6 bg-gradient-card backdrop-blur-sm border border-primary/30 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:`text-4xl font-bold ${h(l.overallScore/100)}`,children:l.overallScore}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-card-foreground",children:"Overall Assessment"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.summary})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-success/10 backdrop-blur border border-success/30 rounded-lg transition-transform hover:scale-[1.02]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(f,{className:"w-5 h-5 text-success"}),e.jsx("h5",{className:"font-semibold text-success",children:"Expert Consensus"})]}),e.jsx("ul",{className:"space-y-2",children:l.consensus.map((s,r)=>e.jsxs("li",{className:"text-sm text-card-foreground",children:["• ",s]},r))})]}),e.jsxs("div",{className:"p-4 bg-warning/10 backdrop-blur border border-warning/30 rounded-lg transition-transform hover:scale-[1.02]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(p,{className:"w-5 h-5 text-warning"}),e.jsx("h5",{className:"font-semibold text-warning",children:"Trade-offs Found"})]}),e.jsx("ul",{className:"space-y-2",children:l.disagreements.map((s,r)=>e.jsxs("li",{className:"text-sm text-card-foreground",children:["• ",s]},r))})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-card-foreground mb-4",children:["Expert Feedback (",l.personas.length,")"]}),e.jsx("div",{className:"space-y-4",children:l.personas.map((s,r)=>{const t=g.find(c=>c.id===s.persona);if(!t)return null;const a=t.icon;return e.jsxs("div",{className:"p-5 bg-card/50 backdrop-blur-sm border border-border/20 rounded-lg transition-all hover:scale-[1.01] hover:shadow-[var(--shadow-card)]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(a,{className:"w-6 h-6",style:{color:t.color}}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-card-foreground",children:t.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.role})]})]}),e.jsxs("div",{className:`text-xl font-bold ${h(s.confidence)}`,children:[Math.round(s.confidence*100),"%"]})]}),e.jsx("p",{className:"text-card-foreground mb-4",children:s.feedback}),s.recommendations.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-semibold text-success mb-2",children:"✅ Recommendations:"}),e.jsx("ul",{className:"space-y-1",children:s.recommendations.map((c,d)=>e.jsxs("li",{className:"text-sm text-card-foreground ml-4",children:["• ",c]},d))})]}),s.concerns.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-destructive mb-2",children:"⚠️ Concerns:"}),e.jsx("ul",{className:"space-y-1",children:s.concerns.map((c,d)=>e.jsxs("li",{className:"text-sm text-card-foreground ml-4",children:["• ",c]},d))})]})]},r)})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{x(null),u(null)},className:"btn-secondary",children:"New Review"}),e.jsx("button",{onClick:()=>{const s=JSON.stringify(l,null,2),r=new Blob([s],{type:"application/json"}),t=URL.createObjectURL(r),a=document.createElement("a");a.href=t,a.download=`review-${Date.now()}.json`,a.click()},className:"btn-primary",children:"Export Review"})]})]})]})]})};export{U as PersonaCoordinatorWidget,U as default};
