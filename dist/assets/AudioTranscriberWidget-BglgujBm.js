import{r,j as t}from"./ui-d27jHJxv.js";import{G as k}from"./index-CHxrVzz6.js";import{B as v}from"./Button-CUGYQXiP.js";import"./vendor-BerfLJhL.js";var f={};const S=()=>{const[s,d]=r.useState(!1),[u,m]=r.useState(""),[g,i]=r.useState(!1),[p,o]=r.useState(null),a=r.useRef(null),c=r.useRef([]),x=()=>{var e;s?(e=a.current)==null||e.stop():h()},h=async()=>{if(!f.API_KEY){o("API nøgle mangler.");return}try{const e=await navigator.mediaDevices.getUserMedia({audio:!0});a.current=new MediaRecorder(e),c.current=[],m(""),o(null),a.current.addEventListener("dataavailable",n=>{c.current.push(n.data)}),a.current.addEventListener("stop",y),a.current.start(),d(!0)}catch(e){console.error("Error accessing microphone:",e),o("Kunne ikke få adgang til mikrofon.")}},y=async()=>{d(!1),i(!0);const e=new Blob(c.current,{type:"audio/webm"});try{const n=new k({apiKey:f.API_KEY}),l=new FileReader;l.readAsDataURL(e),l.onloadend=async()=>{const b=l.result.split(",")[1],j={inlineData:{mimeType:e.type,data:b}},R=await n.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[j,{text:"Transcribe this audio."}]}});m(R.text),i(!1)}}catch(n){console.error("Transcription failed:",n),o("Transskription fejlede."),i(!1)}};return t.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center -m-4",children:[t.jsx(v,{onClick:x,variant:s?"destructive":"primary",className:`px-8 py-4 rounded-full transition-all duration-300 ${s?"animate-pulse":""}`,children:s?"Stopper Optagelse...":"Start Optagelse"}),t.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400",children:s?"Taler...":"Klik for at starte optagelse"}),p&&t.jsx("p",{className:"text-red-500 text-sm mt-4",children:p}),g&&t.jsx("p",{className:"text-sm mt-4",children:"Transskriberer..."}),u&&t.jsx("div",{className:"w-full p-4 mt-4",children:t.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-700 text-left",children:[t.jsx("h4",{className:"font-semibold mb-2",children:"Transskription:"}),t.jsx("p",{className:"text-sm",children:u})]})})]})};export{S as default};
