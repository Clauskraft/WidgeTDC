import{r as s,j as e}from"./ui-d27jHJxv.js";import"./vendor-BerfLJhL.js";const S=()=>{const[d,f]=s.useState(""),[a,c]=s.useState(!1),[t,p]=s.useState(null),[u,i]=s.useState(""),[x,g]=s.useState(!1),h=async r=>{var o;r.preventDefault(),c(!0),i("");try{const l=await fetch("/api/mcp/route",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tool:"srag.governance-check",payload:{query:d,checkCompliance:!0},context:{orgId:"org-1",userId:"user-1"}})});if(!l.ok)throw new Error("Failed to query SRAG");const y=await l.json(),n=y.queryResult;x&&n.type==="semantic"?(i("This query requires semantic search, but SQL-only mode is enabled"),p(null)):p({type:n.type,result:n.result||[],sqlQuery:n.sqlQuery||null,metadata:{traceId:((o=y.metadata)==null?void 0:o.timestamp)||Math.random().toString(36),docIds:n.docIds||[]}})}catch(l){i(l.message||"An error occurred")}finally{c(!1)}};return e.jsxs("div",{style:{padding:"20px",height:"100%",display:"flex",flexDirection:"column",backgroundColor:"#1a1a1a",color:"#ffffff"},children:[e.jsx("h2",{style:{margin:"0 0 20px 0",fontSize:"20px",fontWeight:"600"},children:"SRAG Data Governance"}),e.jsxs("form",{onSubmit:h,style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px"},children:"Natural Language Query"}),e.jsx("textarea",{value:d,onChange:r=>f(r.target.value),placeholder:"e.g., What is the total supplier spending? or Find meeting notes about architecture",style:{width:"100%",minHeight:"80px",padding:"10px",backgroundColor:"#2a2a2a",border:"1px solid #444",borderRadius:"4px",color:"#ffffff",fontSize:"14px",resize:"vertical"},required:!0})]}),e.jsxs("div",{style:{marginBottom:"15px",display:"flex",alignItems:"center"},children:[e.jsx("input",{type:"checkbox",id:"sqlOnly",checked:x,onChange:r=>g(r.target.checked),style:{marginRight:"8px"}}),e.jsx("label",{htmlFor:"sqlOnly",style:{fontSize:"14px",cursor:"pointer"},children:"SQL-based answers only (analytical queries)"})]}),e.jsx("button",{type:"submit",disabled:a,style:{width:"100%",padding:"12px",backgroundColor:a?"#555":"#10b981",color:"#ffffff",border:"none",borderRadius:"4px",fontSize:"14px",fontWeight:"600",cursor:a?"not-allowed":"pointer"},children:a?"Querying...":"Execute Query"})]}),u&&e.jsx("div",{style:{padding:"10px",backgroundColor:"#ff3333",borderRadius:"4px",marginBottom:"15px",fontSize:"14px"},children:u}),t&&e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",margin:0},children:"Results"}),e.jsx("div",{style:{padding:"4px 12px",backgroundColor:t.type==="analytical"?"#3b82f6":"#8b5cf6",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:t.type==="analytical"?"SQL":"Semantic"})]}),t.sqlQuery&&e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("div",{style:{fontSize:"13px",marginBottom:"5px",color:"#888"},children:"SQL Query:"}),e.jsx("div",{style:{backgroundColor:"#2a2a2a",padding:"10px",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace",overflowX:"auto"},children:t.sqlQuery})]}),e.jsxs("div",{style:{marginBottom:"10px",fontSize:"13px",color:"#888"},children:["Trace ID: ",t.metadata.traceId,t.metadata.docIds&&t.metadata.docIds.length>0&&e.jsxs("span",{children:[" â€¢ Documents: ",t.metadata.docIds.join(", ")]})]}),e.jsx("div",{style:{flex:1,backgroundColor:"#2a2a2a",borderRadius:"4px",padding:"15px",overflowY:"auto"},children:t.result.length===0?e.jsx("div",{style:{color:"#888",fontSize:"14px"},children:"No results found"}):e.jsx("div",{style:{fontSize:"13px"},children:t.result.map((r,o)=>e.jsx("div",{style:{marginBottom:"15px",paddingBottom:"15px",borderBottom:o<t.result.length-1?"1px solid #444":"none"},children:e.jsx("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:"inherit"},children:JSON.stringify(r,null,2)})},o))})}),e.jsxs("div",{style:{marginTop:"10px",fontSize:"12px",color:"#888",textAlign:"right"},children:[t.result.length," result",t.result.length!==1?"s":""]})]})]})};export{S as default};
