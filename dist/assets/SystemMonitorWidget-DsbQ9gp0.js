import{r as a,j as e}from"./ui-d27jHJxv.js";import"./vendor-BerfLJhL.js";const j=()=>{const[o,n]=a.useState([]),[t,m]=a.useState(null),[g,h]=a.useState(!0),[c,i]=a.useState(null),x=async()=>{try{const[r,s]=await Promise.all([fetch("http://localhost:3001/api/sys/processes"),fetch("http://localhost:3001/api/sys/system")]);if(!r.ok||!s.ok)throw new Error("Failed to fetch system data");const l=await r.json(),y=await s.json();n(l),m(y),i(null)}catch(r){i(r instanceof Error?r.message:"Unknown error")}finally{h(!1)}};a.useEffect(()=>{x();const r=setInterval(x,2e3);return()=>clearInterval(r)},[]);const d=r=>{const s=["Bytes","KB","MB","GB","TB"];if(r===0)return"0 Bytes";const l=Math.floor(Math.log(r)/Math.log(1024));return Math.round(r/Math.pow(1024,l)*100)/100+" "+s[l]};return g?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading system data..."})}):c?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-red-500 text-sm text-center",children:[e.jsx("div",{className:"mb-2",children:"Failed to load system data"}),e.jsx("div",{className:"text-xs text-gray-500",children:c})]})}):e.jsx("div",{className:"h-full flex flex-col -m-4",children:e.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"CPU"}),e.jsxs("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:[t==null?void 0:t.load.currentLoad.toFixed(1),"%"]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:t!=null&&t.cpu.temperature?`${t.cpu.temperature}Â°C`:"No temp sensor"})]}),e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Memory"}),e.jsxs("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:[t==null?void 0:t.memory.usedPercent.toFixed(1),"%"]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[d((t==null?void 0:t.memory.used)||0)," / ",d((t==null?void 0:t.memory.total)||0)]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Top Processes"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-600 pb-1 mb-1",children:[e.jsx("span",{className:"w-2/3",children:"PROCESS"}),e.jsx("span",{className:"w-1/3 text-right",children:"CPU %"})]}),e.jsx("div",{className:"flex flex-col gap-1 max-h-48 overflow-y-auto",children:o.map((r,s)=>e.jsxs("div",{className:"flex justify-between items-center text-xs hover:bg-gray-50 dark:hover:bg-gray-700 p-2 rounded cursor-pointer transition-colors",children:[e.jsx("div",{className:"flex-1 truncate mr-2 text-gray-800 dark:text-gray-200 font-mono",children:r.name}),e.jsxs("div",{className:`font-bold text-right min-w-[40px] ${r.cpu>10?"text-red-500 dark:text-red-400":r.cpu>5?"text-yellow-500 dark:text-yellow-400":"text-green-500 dark:text-green-400"}`,children:[r.cpu,"%"]})]},`${r.pid}-${s}`))})]}),t&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-600 pt-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:["CPU: ",t.cpu.brand]}),e.jsxs("div",{children:["Cores: ",t.cpu.cores," (",t.cpu.physicalCores," physical)"]}),e.jsxs("div",{children:["Load Avg: ",t.load.avgLoad.toFixed(2)]}),e.jsxs("div",{children:["Memory: ",d(t.memory.available)," free"]})]})})]})})};export{j as default};
