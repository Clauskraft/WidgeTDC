import{r as n}from"./ui-d27jHJxv.js";import{u as a}from"./useMCP-C6vkw6pp.js";const l=(t,r,s=2e3)=>{const{send:c}=a(),o=n.useRef(""),e=n.useRef(null);n.useEffect(()=>{const u=JSON.stringify(r);if(u!==o.current)return e.current&&clearTimeout(e.current),e.current=setTimeout(()=>{console.log(`ðŸ§  Synkroniserer widget memory: ${t}`),c("agent-orchestrator","widgets.update_state",{widgetId:t,state:{...r,_syncedAt:new Date().toISOString()}}).catch(i=>{console.warn(`âš ï¸ Fejl ved widget sync (${t}):`,i)}),o.current=u},s),()=>{e.current&&clearTimeout(e.current)}},[t,r,s,c])};export{l as u};
