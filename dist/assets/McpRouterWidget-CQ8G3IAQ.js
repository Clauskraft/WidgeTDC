import{r as o,j as t}from"./ui-d27jHJxv.js";import{u as R}from"./useMCP-C6vkw6pp.js";import"./vendor-BerfLJhL.js";const M=()=>{const[g,h]=o.useState([]),[p,j]=o.useState([]),[c,v]=o.useState(""),[x,C]=o.useState(""),[f,k]=o.useState(""),[l,y]=o.useState("cma.context"),[m,w]=o.useState(JSON.stringify({orgId:"org-1",userId:"user-1",userQuery:"Test query",keywords:["test"]},null,2)),[b,i]=o.useState(""),S=o.useRef(null),{send:z,isLoading:n}=R();o.useEffect(()=>{(async()=>{try{const s=await fetch("/api/mcp/tools");if(!s.ok)throw new Error("Failed to load tools");const a=(await s.json()).tools||[];j(a),a.length>0&&y(d=>a.includes(d)?d:a[0])}catch(s){console.error("Failed to load tools:",s),i("Kunne ikke hente MCP værktøjer")}})()},[]),o.useEffect(()=>{var e;(e=S.current)==null||e.scrollIntoView({behavior:"smooth"})},[g]);const T=async()=>{i("");try{let e;try{e=JSON.parse(m)}catch{i("Payload skal være gyldig JSON");return}const s=l.split(".")[0],r=await z(s,l,e,{sourceId:"mcp-inspector"}),a={id:(r==null?void 0:r.messageId)??`msg-${Date.now()}`,sourceId:"mcp-inspector",targetId:s,tool:l,payload:e,createdAt:new Date().toISOString(),result:r==null?void 0:r.result,success:(r==null?void 0:r.success)??!0};h(d=>[...d,a])}catch(e){i(e.message||"Failed to send message")}},u=g.filter(e=>!(c&&e.tool!==c||x&&e.sourceId!==x||f&&e.targetId!==f));return t.jsxs("div",{style:{padding:"20px",height:"100%",display:"flex",flexDirection:"column",backgroundColor:"#1a1a1a",color:"#ffffff"},children:[t.jsx("h2",{style:{margin:"0 0 20px 0",fontSize:"20px",fontWeight:"600"},children:"MCP Inspector"}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsxs("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"10px"},children:["Available Tools (",p.length,")"]}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:p.map(e=>t.jsx("div",{style:{padding:"4px 12px",backgroundColor:"#2a2a2a",borderRadius:"12px",fontSize:"12px",border:"1px solid #444"},children:e},e))})]}),t.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#2a2a2a",borderRadius:"4px"},children:[t.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"10px"},children:"Test Message"}),t.jsxs("div",{style:{marginBottom:"10px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"12px"},children:"Tool"}),t.jsx("select",{value:l,onChange:e=>y(e.target.value),style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #444",borderRadius:"4px",color:"#ffffff",fontSize:"13px"},children:p.map(e=>t.jsx("option",{value:e,children:e},e))})]}),t.jsxs("div",{style:{marginBottom:"10px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"12px"},children:"Payload (JSON)"}),t.jsx("textarea",{value:m,onChange:e=>w(e.target.value),style:{width:"100%",minHeight:"100px",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid #444",borderRadius:"4px",color:"#ffffff",fontSize:"12px",fontFamily:"monospace",resize:"vertical"}})]}),t.jsx("button",{onClick:T,disabled:n,style:{width:"100%",padding:"10px",backgroundColor:n?"#555":"#8b5cf6",color:"#ffffff",border:"none",borderRadius:"4px",fontSize:"13px",fontWeight:"600",cursor:n?"not-allowed":"pointer"},children:n?"Sending...":"Send Test Message"}),b&&t.jsx("div",{style:{marginTop:"10px",padding:"8px",backgroundColor:"#ff3333",borderRadius:"4px",fontSize:"12px"},children:b})]}),t.jsxs("div",{style:{marginBottom:"15px",display:"flex",gap:"10px"},children:[t.jsx("input",{type:"text",placeholder:"Filter by tool...",value:c,onChange:e=>v(e.target.value),style:{flex:1,padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid #444",borderRadius:"4px",color:"#ffffff",fontSize:"12px"}}),t.jsx("input",{type:"text",placeholder:"Filter by source...",value:x,onChange:e=>C(e.target.value),style:{flex:1,padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid #444",borderRadius:"4px",color:"#ffffff",fontSize:"12px"}}),t.jsx("input",{type:"text",placeholder:"Filter by target...",value:f,onChange:e=>k(e.target.value),style:{flex:1,padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid #444",borderRadius:"4px",color:"#ffffff",fontSize:"12px"}})]}),t.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[t.jsxs("h3",{style:{fontSize:"14px",fontWeight:"600",margin:0},children:["Message Stream (",u.length,")"]}),t.jsx("button",{onClick:()=>h([]),style:{padding:"4px 12px",backgroundColor:"#dc2626",color:"#ffffff",border:"none",borderRadius:"4px",fontSize:"12px",cursor:"pointer"},children:"Clear"})]}),t.jsxs("div",{style:{flex:1,backgroundColor:"#2a2a2a",borderRadius:"4px",padding:"10px",overflowY:"auto"},children:[u.length===0?t.jsx("div",{style:{color:"#888",fontSize:"13px",textAlign:"center",padding:"20px"},children:"No messages yet. Send a test message to see it here."}):u.map(e=>t.jsxs("div",{style:{marginBottom:"10px",padding:"10px",backgroundColor:"#1a1a1a",borderRadius:"4px",borderLeft:`3px solid ${e.success?"#10b981":"#ef4444"}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[t.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:"#8b5cf6"},children:e.tool}),t.jsx("span",{style:{fontSize:"11px",color:"#888"},children:new Date(e.createdAt).toLocaleTimeString()})]}),t.jsxs("div",{style:{fontSize:"11px",color:"#888",marginBottom:"5px"},children:[e.sourceId," → ",e.targetId]}),e.result&&t.jsx("div",{style:{marginTop:"8px",fontSize:"11px",fontFamily:"monospace",backgroundColor:"#0a0a0a",padding:"8px",borderRadius:"4px",maxHeight:"150px",overflowY:"auto"},children:t.jsx("pre",{style:{margin:0,whiteSpace:"pre-wrap"},children:JSON.stringify(e.result,null,2)})})]},e.id)),t.jsx("div",{ref:S})]})]})]})};export{M as default};
