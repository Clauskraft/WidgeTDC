import{r as c,j as e,P as j,E as v,i as N,k as w,l as T}from"./ui-d27jHJxv.js";import{u as O}from"./useWidgetSync-PcBW9nb4.js";import"./vendor-BerfLJhL.js";import"./useMCP-C6vkw6pp.js";const D=[{id:"t1",title:"Implementer OAuth",status:"TODO",assignee:"Claus",priority:"high",tags:["backend","security"]},{id:"t2",title:"Design nyt Dashboard",status:"IN_PROGRESS",assignee:"AI",priority:"medium",tags:["frontend","ui"]},{id:"t3",title:"Fix Linter fejl",status:"DONE",assignee:"AI",priority:"low",tags:["maintenance"]}],r=[{id:"TODO",title:"To Do",color:"bg-slate-500/20 border-slate-500/30"},{id:"IN_PROGRESS",title:"In Progress",color:"bg-blue-500/20 border-blue-500/30"},{id:"REVIEW",title:"Review",color:"bg-purple-500/20 border-purple-500/30"},{id:"DONE",title:"Done",color:"bg-green-500/20 border-green-500/30"}],k=({widgetId:g})=>{const[a,x]=c.useState(D),[h,d]=c.useState(!1),[n,u]=c.useState("");O(g,{tasksCount:a.length,activeTasks:a.filter(t=>t.status!=="DONE").length,columns:r.map(t=>({id:t.id,count:a.filter(i=>i.status===t.id).length}))});const m=(t,i)=>{x(s=>s.map(o=>{if(o.id!==t)return o;const p=r.findIndex(y=>y.id===o.status);let l=i==="next"?p+1:p-1;return l<0&&(l=0),l>=r.length&&(l=r.length-1),{...o,status:r[l].id}}))},b=t=>{if(t.preventDefault(),!n.trim())return;const i={id:`t-${Date.now()}`,title:n,status:"TODO",assignee:"Unassigned",priority:"medium",tags:[]};x(s=>[...s,i]),u(""),d(!1)},f=t=>{switch(t){case"high":return"text-red-400";case"medium":return"text-yellow-400";default:return"text-blue-400"}};return e.jsxs("div",{className:"h-full flex flex-col","data-testid":"kanban-widget",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 px-1",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Projekt Tavle"}),e.jsxs("p",{className:"text-xs text-gray-400",children:[a.length," opgaver"]})]}),e.jsxs("button",{onClick:()=>d(!0),className:"px-3 py-1.5 bg-[#00B5CB] hover:bg-[#009eb3] text-[#051e3c] rounded-lg text-sm font-medium flex items-center gap-1 transition-colors",children:[e.jsx(j,{size:16})," Ny Opgave"]})]}),h&&e.jsxs("form",{onSubmit:b,className:"mb-4 p-3 bg-white/5 rounded-xl border border-white/10 animate-in fade-in slide-in-from-top-2",children:[e.jsx("input",{autoFocus:!0,type:"text",value:n,onChange:t=>u(t.target.value),placeholder:"Hvad skal gÃ¸res?",className:"w-full bg-transparent border-none text-white placeholder-gray-500 focus:ring-0 outline-none mb-2"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-3 py-1 text-xs text-gray-400 hover:text-white transition-colors",children:"Annuller"}),e.jsx("button",{type:"submit",disabled:!n.trim(),className:"px-3 py-1 bg-[#00B5CB]/20 text-[#00B5CB] hover:bg-[#00B5CB]/30 rounded-lg text-xs font-medium transition-colors disabled:opacity-50",children:"Opret"})]})]}),e.jsx("div",{className:"flex-1 flex gap-3 overflow-x-auto pb-2",children:r.map(t=>{const i=a.filter(s=>s.status===t.id);return e.jsxs("div",{className:"flex-1 min-w-[200px] flex flex-col bg-[#0B3E6F]/20 rounded-xl border border-white/5 overflow-hidden",children:[e.jsxs("div",{className:`p-2 border-b ${t.color} flex items-center justify-between`,children:[e.jsx("span",{className:"text-xs font-semibold text-gray-200 uppercase tracking-wider",children:t.title}),e.jsx("span",{className:"px-1.5 py-0.5 bg-black/20 rounded-full text-[10px] text-gray-300",children:i.length})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:[i.map(s=>e.jsxs("div",{className:"p-3 bg-[#051e3c]/60 hover:bg-[#051e3c]/80 border border-white/5 rounded-lg group transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-200 line-clamp-2",children:s.title}),e.jsx("button",{className:"opacity-0 group-hover:opacity-100 text-gray-500 hover:text-white transition-opacity",children:e.jsx(v,{size:14})})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-400",children:[e.jsx(N,{size:10})," ",s.assignee]}),e.jsx("div",{className:`ml-auto w-2 h-2 rounded-full ${f(s.priority)} bg-current`,title:`Prioritet: ${s.priority}`})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-2 border-t border-white/5 opacity-0 group-hover:opacity-100 transition-opacity delay-75",children:[e.jsx("button",{onClick:()=>m(s.id,"prev"),disabled:s.status==="TODO",className:"p-1 hover:bg-white/10 rounded text-gray-400 disabled:opacity-0",children:e.jsx(w,{size:12})}),e.jsx("button",{onClick:()=>m(s.id,"next"),disabled:s.status==="DONE",className:"p-1 hover:bg-white/10 rounded text-gray-400 disabled:opacity-0",children:e.jsx(T,{size:12})})]})]},s.id)),i.length===0&&e.jsx("div",{className:"text-center py-4 text-gray-500/50 text-xs italic border-2 border-dashed border-white/5 rounded-lg",children:"Tom"})]})]},t.id)})})]})};export{k as default};
