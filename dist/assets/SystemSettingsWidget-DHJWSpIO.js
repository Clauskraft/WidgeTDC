import{r as d,L as l,j as n}from"./ui-d27jHJxv.js";import{B as u}from"./Button-CUGYQXiP.js";import{u as h}from"./index-D3cQhnRP.js";import"./vendor-BerfLJhL.js";import"./grid-B9N6NCa2.js";function S(){const{state:{user:e}}=h(),[o,s]=d.useState(!1),r=async()=>{s(!0);const t=await fetch("/api/auth/aula/initiate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.id,orgId:e.org_id})}).then(a=>a.text());window.location.href=t},c=async(t,a)=>{await fetch("/api/auth/aula/callback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t,state:a,userId:e.id,orgId:e.org_id})})};return l.useEffect(()=>{const t=new URLSearchParams(window.location.hash.substring(1)),a=t.get("code"),i=t.get("state");a&&i&&(c(a,i),window.history.replaceState({},document.title,window.location.pathname))},[]),n.jsxs("div",{children:[n.jsx("h4",{children:"Aula Integration"}),n.jsx(u,{onClick:r,disabled:o,children:o?"Authenticating...":"Connect Aula via OAuth"}),n.jsxs("p",{children:["Status: ",e.aulaConnected?"Connected":"Not Connected"]})]})}export{S as default};
