import{r as d}from"./ui-d27jHJxv.js";const g=()=>{const[c,t]=d.useState(!1);return{send:d.useCallback(async(l,s,u={},e)=>{const f={id:(e==null?void 0:e.messageId)??crypto.randomUUID(),sourceId:(e==null?void 0:e.sourceId)??"widget",targetId:l,tool:s,payload:u,createdAt:new Date().toISOString()};t(!0);try{let r=(e==null?void 0:e.routePath)??"/api/mcp/route";typeof window<"u"&&window.location.origin==="null"&&(r=`http://localhost:3001${r}`);const a=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",...(e==null?void 0:e.headers)??{}},body:JSON.stringify(f),signal:e==null?void 0:e.signal});if(!a.ok)throw new Error(`MCP error: ${a.status}`);return await a.json()}catch(r){throw console.error("MCP send failed:",r),r}finally{t(!1)}},[]),isLoading:c}};export{g as u};
