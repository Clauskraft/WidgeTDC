import{j as e,ap as Z,a5 as ee,a4 as te,aq as fe,D as ve,ar as ye,ak as se,c as be,Q as we,T as ie,A as je,m as Ne,r as j,ah as ke,g as Ce,al as ae,V as Se,as as Ie,S as ne,a7 as re,y as Ee,F as Me,a9 as Ae,ad as oe,ac as le,R as ce,at as Oe}from"./ui-d27jHJxv.js";import{c as ze,p as De}from"./index-D3cQhnRP.js";import"./vendor-BerfLJhL.js";import"./grid-B9N6NCa2.js";const $e=[{id:"agent-security",name:"Security",role:"security",status:"active",currentTask:"Korrelerer trusselsdata fra NIS2-rapporter og interne logs",statusMessage:"Working",lastActivity:new Date().toISOString(),metrics:{tasksCompleted:47,tasksInProgress:3,alertsRaised:2}},{id:"agent-governance",name:"Governance",role:"governance",status:"warning",currentTask:"Evaluerer dataeksport og privatsikkerhed mod EU-retningslinjer",statusMessage:"Review - potentiel risiko identificeret",lastActivity:new Date().toISOString(),metrics:{tasksCompleted:31,tasksInProgress:2,alertsRaised:1}},{id:"agent-legal",name:"Legal",role:"legal",status:"idle",currentTask:void 0,statusMessage:"Klar til at fortolke lovgivning (AI-forordning, chat-kontrol)",lastActivity:new Date(Date.now()-3e5).toISOString(),metrics:{tasksCompleted:18,tasksInProgress:0,alertsRaised:0}},{id:"agent-data",name:"Data",role:"data",status:"active",currentTask:"Bearbejder datastrÃ¸mme om modellokalitet og supply-chain-risici",statusMessage:"Analyzing",lastActivity:new Date().toISOString(),metrics:{tasksCompleted:89,tasksInProgress:5,alertsRaised:0}},{id:"agent-orchestrator",name:"Orchestrator",role:"orchestrator",status:"active",currentTask:"Fordeler opgaver mellem agenter",statusMessage:"Coordinating",lastActivity:new Date().toISOString(),metrics:{tasksCompleted:156,tasksInProgress:6,alertsRaised:0}},{id:"agent-creative",name:"Creative",role:"creative",status:"idle",currentTask:void 0,statusMessage:"Klar til at generere rapporter, prÃ¦sentationer eller visualiseringer",lastActivity:new Date(Date.now()-6e5).toISOString(),metrics:{tasksCompleted:12,tasksInProgress:0,alertsRaised:0}}],Le=[{id:"card-digital-sovereignty",category:"digital-sovereignty",title:"Digital SuverÃ¦nitet",summary:"EU's ambition om forenkling af regelsÃ¦t og massive investeringer i cloud, AI og halvledere under 'Digital Decade 2025'. Fokus pÃ¥ teknologisk uafhÃ¦ngighed fra USA og Kina.",priority:"high",source:"EU Commission",timestamp:new Date().toISOString(),position:{x:100,y:150},size:{width:380,height:280},isCollapsed:!1,connections:["card-ai-security","card-privacy-chat"],tags:["EU","sovereignty","cloud","AI","semiconductors"]},{id:"card-nis2-threats",category:"nis2-threats",title:"NIS2-trusler",summary:"ENISA's observationer om supply-chain-angreb, identitetsbaserede angreb og risici fra misconfigurerede cloud IAM-opsÃ¦tninger. Kritiske infrastrukturer under Ã¸get pres.",priority:"critical",source:"ENISA",timestamp:new Date().toISOString(),position:{x:520,y:100},size:{width:380,height:280},isCollapsed:!1,connections:["card-ai-security"],tags:["NIS2","supply-chain","IAM","ENISA","threats"]},{id:"card-ai-security",category:"ai-security",title:"AI-sikkerhed",summary:"OpenAI/Microsoft implementerer biometrisk adgang og deny-by-default netvÃ¦rk. NIST's AI 800-1-udkast udpeger modeltyveri som kernerisiko. Fokus pÃ¥ model exfiltration prevention.",priority:"high",source:"NIST / OpenAI",timestamp:new Date().toISOString(),position:{x:940,y:150},size:{width:380,height:280},isCollapsed:!1,connections:["card-nis2-threats","card-digital-sovereignty"],tags:["AI","security","NIST","model-theft","biometric"]},{id:"card-privacy-chat",category:"privacy-chat",title:"Privatliv & Chat",summary:"EU's kompromis om chat-kontrol gÃ¸r scanning frivillig og garanterer at kryptering ikke undermineres. Balance mellem bÃ¸rnebeskyttelse og privatlivets fred.",priority:"medium",source:"EU Parliament",timestamp:new Date().toISOString(),position:{x:300,y:480},size:{width:380,height:280},isCollapsed:!1,connections:["card-digital-sovereignty"],tags:["privacy","encryption","chat-control","CSAM","E2EE"]}],Re=[{id:"doc-eu-digital-declaration",title:"EU's digitale suverÃ¦nitetserklÃ¦ring",source:"European Commission",type:"legislation",url:"https://digital-strategy.ec.europa.eu/",relevanceScore:.95,snippet:"Europa skal opbygge sin egen digitale kapacitet inden 2030..."},{id:"doc-enisa-nis2",title:"ENISA NIS2-rapport",source:"ENISA",type:"report",url:"https://www.enisa.europa.eu/",relevanceScore:.92,snippet:"Supply-chain-angreb er steget med 300% i 2024..."},{id:"doc-nist-ai-standard",title:"NIST AI 800-1 Standardudkast",source:"NIST",type:"standard",url:"https://www.nist.gov/ai",relevanceScore:.88,snippet:"Model exfiltration udgÃ¸r den primÃ¦re risiko for AI-systemer..."},{id:"doc-ai-act",title:"EU AI Act - Final Text",source:"EUR-Lex",type:"legislation",relevanceScore:.91,snippet:"HÃ¸jrisiko AI-systemer skal opfylde sÃ¦rlige krav til transparens..."}],Fe=[{id:"actor-france-germany",name:"Frankrig & Tyskland",type:"country",role:"DrivkrÃ¦fter bag digital suverÃ¦nitet",influence:"high",stance:"Pro-europÃ¦isk teknologisk uafhÃ¦ngighed"},{id:"actor-enisa",name:"ENISA",type:"organization",role:"EU's cybersikkerhedsagentur",influence:"high",stance:"Regulatorisk og rÃ¥dgivende"},{id:"actor-openai-msft",name:"OpenAI / Microsoft",type:"organization",role:"Ledende AI-udviklere",influence:"high",stance:"SÃ¦tter industristandarder for AI-sikkerhed"},{id:"actor-privacy-advocates",name:"PrivacyforkÃ¦mpere",type:"group",role:"Civilsamfundsorganisationer",influence:"medium",stance:"Mod masseovervÃ¥gning, for E2EE"}],Te=[{id:"incident-supply-chain",title:"Supply-chain kompromittering",type:"attack",date:"2024-11-15",severity:"critical",description:"Omfattende supply-chain-brud pÃ¥virker kritisk infrastruktur i flere EU-lande."},{id:"incident-identity-compromise",title:"Identitetskompromittering",type:"breach",date:"2024-11-20",severity:"high",description:"Identitetsbaserede angreb mod cloud IAM-systemer."},{id:"incident-ai-exfiltration",title:"AI Model Exfiltration forsÃ¸g",type:"attack",date:"2024-11-22",severity:"high",description:"ForsÃ¸g pÃ¥ at exfiltrere proprietÃ¦re AI-modeller opdaget."},{id:"incident-chat-control-debate",title:"Chat-kontrol debatten",type:"debate",date:"2024-11-25",severity:"medium",description:"IgangvÃ¦rende politisk debat om balance mellem privatliv og bÃ¸rnebeskyttelse."}],Ue=[{id:"policy-ai-act",name:"AI-forordningen",type:"external",jurisdiction:"EU",status:"active",relevance:"UdsÃ¦ttelse for hÃ¸jrisiko-systemer indtil 2026",complianceStatus:"partial"},{id:"policy-nis2",name:"NIS2-direktivet",type:"external",jurisdiction:"EU",status:"active",relevance:"SkÃ¦rpede krav til kritiske enheder",complianceStatus:"partial"},{id:"policy-gdpr-schrems",name:"GDPR & Schrems II",type:"external",jurisdiction:"EU",status:"active",relevance:"DataoverfÃ¸rsel til tredjeland",complianceStatus:"compliant"},{id:"policy-csam",name:"CSAM-kompromiset",type:"external",jurisdiction:"EU",status:"proposed",relevance:"Frivillig scanning, kryptering bevares",complianceStatus:"unknown"}],Pe=[{id:"node-digital-sovereignty",type:"trend",label:"Digital SuverÃ¦nitet",description:"EU's strategi for teknologisk uafhÃ¦ngighed",properties:{region:"EU",priority:"strategic"},position:{x:400,y:300},size:60},{id:"node-nis2",type:"policy",label:"NIS2",description:"Network and Information Security Directive",properties:{status:"active",deadline:"2024-10-17"},position:{x:250,y:180},size:50},{id:"node-ai-act",type:"policy",label:"AI Act",description:"EU's AI-forordning",properties:{status:"active",highRiskDelay:"2026"},position:{x:550,y:180},size:50},{id:"node-supply-chain",type:"threat",label:"Supply Chain Risk",description:"Risici i leverandÃ¸rkÃ¦der",properties:{severity:"critical",trend:"increasing"},position:{x:150,y:350},size:45},{id:"node-model-theft",type:"threat",label:"Model Theft",description:"AI model exfiltration risiko",properties:{severity:"high",actors:["state","criminal"]},position:{x:650,y:350},size:45},{id:"node-enisa",type:"actor",label:"ENISA",description:"EU Agency for Cybersecurity",properties:{type:"regulator",influence:"high"},position:{x:100,y:200},size:40},{id:"node-nist",type:"actor",label:"NIST",description:"National Institute of Standards and Technology",properties:{type:"standard-setter",country:"USA"},position:{x:700,y:200},size:40},{id:"node-chat-control",type:"policy",label:"Chat Control",description:"EU CSAM scanning proposal",properties:{status:"proposed",controversial:!0},position:{x:400,y:450},size:40}],Ye=[{id:"edge-ds-nis2",sourceId:"node-digital-sovereignty",targetId:"node-nis2",type:"involves",label:"Regulerer",weight:.9},{id:"edge-ds-ai",sourceId:"node-digital-sovereignty",targetId:"node-ai-act",type:"involves",label:"Regulerer",weight:.9},{id:"edge-nis2-supply",sourceId:"node-nis2",targetId:"node-supply-chain",type:"regulates",label:"Adresserer",weight:.85},{id:"edge-ai-theft",sourceId:"node-ai-act",targetId:"node-model-theft",type:"regulates",label:"Beskytter mod",weight:.8},{id:"edge-enisa-nis2",sourceId:"node-enisa",targetId:"node-nis2",type:"involves",label:"HÃ¥ndhÃ¦ver",weight:.95},{id:"edge-nist-theft",sourceId:"node-nist",targetId:"node-model-theft",type:"involves",label:"Standardiserer",weight:.75},{id:"edge-ds-chat",sourceId:"node-digital-sovereignty",targetId:"node-chat-control",type:"involves",label:"PÃ¥virker",weight:.6}],Q={viewport:{x:0,y:0,zoom:1},cards:Le,selectedCardId:null,hoveredCardId:null,agents:$e,neuralStream:{selectedCardId:null,documents:Re,actors:Fe,incidents:Te,policies:Ue,isLoading:!1},activeNeuralSection:"related-documents",mindmap:{nodes:Pe,edges:Ye,viewport:{x:0,y:0,zoom:1},selectedNodeId:null},showMindmap:!1,mindmapMode:"overlay",showAgentCouncil:!0,showNeuralStream:!0,isConnecting:!1,connectionSource:null,wsConnected:!1,lastUpdate:new Date().toISOString()},Be=ze()(De((t,p)=>({...Q,setViewport:s=>t({viewport:s}),setZoom:s=>t(i=>({viewport:{...i.viewport,zoom:Math.max(.1,Math.min(3,s))}})),pan:(s,i)=>t(n=>({viewport:{...n.viewport,x:n.viewport.x+s,y:n.viewport.y+i}})),resetViewport:()=>t({viewport:{x:0,y:0,zoom:1}}),selectCard:s=>{t({selectedCardId:s}),s&&p().updateNeuralContext(s)},hoverCard:s=>t({hoveredCardId:s}),moveCard:(s,i)=>t(n=>({cards:n.cards.map(r=>r.id===s?{...r,position:i}:r)})),resizeCard:(s,i)=>t(n=>({cards:n.cards.map(r=>r.id===s?{...r,size:i}:r)})),toggleCardCollapse:s=>t(i=>({cards:i.cards.map(n=>n.id===s?{...n,isCollapsed:!n.isCollapsed}:n)})),addCard:s=>t(i=>({cards:[...i.cards,s]})),removeCard:s=>t(i=>({cards:i.cards.filter(n=>n.id!==s),selectedCardId:i.selectedCardId===s?null:i.selectedCardId})),updateCard:(s,i)=>t(n=>({cards:n.cards.map(r=>r.id===s?{...r,...i}:r)})),connectCards:(s,i)=>t(n=>({cards:n.cards.map(r=>r.id===s&&!r.connections.includes(i)?{...r,connections:[...r.connections,i]}:r),isConnecting:!1,connectionSource:null})),disconnectCards:(s,i)=>t(n=>({cards:n.cards.map(r=>r.id===s?{...r,connections:r.connections.filter(v=>v!==i)}:r)})),updateAgentStatus:(s,i,n)=>t(r=>({agents:r.agents.map(v=>v.id===s?{...v,status:i,statusMessage:n,lastActivity:new Date().toISOString()}:v)})),updateAgentTask:(s,i)=>t(n=>({agents:n.agents.map(r=>r.id===s?{...r,currentTask:i,lastActivity:new Date().toISOString()}:r)})),toggleAgentCouncil:()=>t(s=>({showAgentCouncil:!s.showAgentCouncil})),setActiveNeuralSection:s=>t({activeNeuralSection:s}),updateNeuralContext:s=>t(i=>({neuralStream:{...i.neuralStream,selectedCardId:s}})),setNeuralLoading:s=>t(i=>({neuralStream:{...i.neuralStream,isLoading:s}})),toggleNeuralStream:()=>t(s=>({showNeuralStream:!s.showNeuralStream})),setNeuralDocuments:s=>t(i=>({neuralStream:{...i.neuralStream,documents:s}})),setNeuralActors:s=>t(i=>({neuralStream:{...i.neuralStream,actors:s}})),setNeuralIncidents:s=>t(i=>({neuralStream:{...i.neuralStream,incidents:s}})),setNeuralPolicies:s=>t(i=>({neuralStream:{...i.neuralStream,policies:s}})),toggleMindmap:()=>t(s=>({showMindmap:!s.showMindmap})),setMindmapMode:s=>t({mindmapMode:s}),addGraphNode:s=>t(i=>({mindmap:{...i.mindmap,nodes:[...i.mindmap.nodes,s]}})),removeGraphNode:s=>t(i=>({mindmap:{...i.mindmap,nodes:i.mindmap.nodes.filter(n=>n.id!==s),edges:i.mindmap.edges.filter(n=>n.sourceId!==s&&n.targetId!==s)}})),updateGraphNode:(s,i)=>t(n=>({mindmap:{...n.mindmap,nodes:n.mindmap.nodes.map(r=>r.id===s?{...r,...i}:r)}})),moveGraphNode:(s,i)=>t(n=>({mindmap:{...n.mindmap,nodes:n.mindmap.nodes.map(r=>r.id===s?{...r,position:i}:r)}})),selectGraphNode:s=>t(i=>({mindmap:{...i.mindmap,selectedNodeId:s}})),addGraphEdge:s=>t(i=>({mindmap:{...i.mindmap,edges:[...i.mindmap.edges,s]}})),removeGraphEdge:s=>t(i=>({mindmap:{...i.mindmap,edges:i.mindmap.edges.filter(n=>n.id!==s)}})),setMindmapViewport:s=>t(i=>({mindmap:{...i.mindmap,viewport:s}})),startConnecting:s=>t({isConnecting:!0,connectionSource:s}),cancelConnecting:()=>t({isConnecting:!1,connectionSource:null}),setWsConnected:s=>t({wsConnected:s}),setLastUpdate:s=>t({lastUpdate:s}),loadState:s=>t(i=>({...i,...s})),resetToDefault:()=>t(Q)}),{name:"strategic-cockpit-storage",partialize:t=>({viewport:t.viewport,cards:t.cards,showAgentCouncil:t.showAgentCouncil,showNeuralStream:t.showNeuralStream,showMindmap:t.showMindmap,mindmapMode:t.mindmapMode,mindmap:t.mindmap})})),y={cyan:"#00FFFF",magenta:"#FF00FF",green:"#00FF88",orange:"#FF8800",purple:"#8B5CF6",blue:"#3B82F6",red:"#EF4444",amber:"#F59E0B"},J={idle:"#6B7280",active:"#10B981",warning:"#F59E0B",blocked:"#EF4444"},H={"digital-sovereignty":y.cyan,"nis2-threats":y.orange,"ai-security":y.purple,"privacy-chat":y.magenta},Ge={critical:"#EF4444",high:"#F59E0B",medium:"#3B82F6",low:"#10B981"},W={threat:"#EF4444",policy:"#3B82F6",actor:"#8B5CF6",incident:"#F59E0B",project:"#10B981",decision:"#EC4899",trend:"#06B6D4",technology:"#6366F1"},Xe={security:be,governance:se,legal:ye,data:ve,orchestrator:Z,creative:fe},We={idle:Ne,active:je,warning:ie,blocked:we},_e=({agents:t,isExpanded:p,onToggle:s})=>e.jsxs("div",{className:`fixed bottom-0 left-0 right-0 z-50 transition-all duration-300 ease-out ${p?"h-32":"h-12"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-slate-950/80 backdrop-blur-xl border-t border-white/10"}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent"}),e.jsxs("div",{className:"relative h-full max-w-[1800px] mx-auto px-4",children:[e.jsxs("div",{className:"h-12 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:s,className:"flex items-center gap-2 text-white/60 hover:text-white transition-colors",children:[e.jsx(Z,{className:"w-4 h-4 text-cyan-400"}),e.jsx("span",{className:"text-sm font-medium",children:"Agent-RÃ¥det"}),p?e.jsx(ee,{className:"w-4 h-4"}):e.jsx(te,{className:"w-4 h-4"})]}),e.jsx("div",{className:"flex items-center gap-2 ml-4",children:t.map(i=>{const n=J[i.status];return e.jsxs("div",{className:"flex items-center gap-1.5",title:`${i.name}: ${i.statusMessage||i.status}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${i.status==="active"?"animate-pulse":""}`,style:{backgroundColor:n}}),e.jsx("span",{className:"text-xs text-white/40",children:i.name.charAt(0)})]},i.id)})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-white/40",children:[e.jsxs("span",{children:[t.filter(i=>i.status==="active").length," aktive Â·"," ",t.reduce((i,n)=>{var r;return i+(((r=n.metrics)==null?void 0:r.tasksInProgress)||0)},0)," opgaver"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse"}),"WebSocket Connected"]})]})]}),p&&e.jsx("div",{className:"flex gap-3 pb-3 overflow-x-auto",children:t.map(i=>{const n=Xe[i.role],r=We[i.status],v=J[i.status];return e.jsxs("div",{className:"flex-shrink-0 w-56 bg-white/5 rounded-lg border border-white/10 overflow-hidden hover:border-white/20 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 rounded",style:{backgroundColor:`${v}20`},children:e.jsx(n,{className:"w-3.5 h-3.5",style:{color:v}})}),e.jsx("span",{className:"text-sm font-medium text-white",children:i.name})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(r,{className:"w-3 h-3",style:{color:v}}),e.jsx("span",{className:"text-[10px] font-bold uppercase",style:{color:v},children:i.status})]})]}),e.jsxs("div",{className:"px-3 py-2",children:[i.currentTask?e.jsx("p",{className:"text-xs text-white/70 line-clamp-2",children:i.currentTask}):e.jsx("p",{className:"text-xs text-white/40 italic",children:i.statusMessage}),i.metrics&&e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-[10px] text-white/40",children:[e.jsxs("span",{children:[i.metrics.tasksCompleted," done"]}),e.jsxs("span",{children:[i.metrics.tasksInProgress," in progress"]}),i.metrics.alertsRaised>0&&e.jsxs("span",{className:"text-amber-400",children:[i.metrics.alertsRaised," alerts"]})]})]})]},i.id)})})]})]}),Ke={"digital-sovereignty":"ðŸ‡ªðŸ‡º","nis2-threats":"ðŸ›¡ï¸","ai-security":"ðŸ¤–","privacy-chat":"ðŸ”’"},He={"digital-sovereignty":"Digital SuverÃ¦nitet","nis2-threats":"NIS2-trusler","ai-security":"AI-sikkerhed","privacy-chat":"Privatliv & Chat"},Ze=({card:t,isSelected:p,isHovered:s,isConnecting:i,zoom:n,onSelect:r,onHover:v,onMove:u,onToggleCollapse:C,onStartConnect:o,onConnect:h})=>{const l=j.useRef(null),[x,w]=j.useState(!1),[N,S]=j.useState({x:0,y:0}),b=H[t.category],I=Ge[t.priority],E=g=>{var M;if(g.target instanceof HTMLElement&&g.target.closest(".drag-handle")){g.preventDefault(),w(!0);const a=(M=l.current)==null?void 0:M.getBoundingClientRect();a&&S({x:g.clientX-a.left,y:g.clientY-a.top})}};j.useEffect(()=>{if(!x)return;const g=a=>{const c=(a.clientX-N.x)/n,m=(a.clientY-N.y)/n;u({x:c,y:m})},M=()=>{w(!1)};return window.addEventListener("mousemove",g),window.addEventListener("mouseup",M),()=>{window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",M)}},[x,N,n,u]);const A=g=>new Date(g).toLocaleTimeString("da-DK",{hour:"2-digit",minute:"2-digit"});return e.jsx("div",{ref:l,className:`absolute transition-all duration-200 ${x?"cursor-grabbing z-50":""} ${p?"z-40":"z-10"}`,style:{left:t.position.x,top:t.position.y,width:t.size.width},onMouseDown:E,onClick:()=>{i?h():r()},onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),children:e.jsxs("div",{className:`relative rounded-xl overflow-hidden backdrop-blur-xl transition-all duration-200 ${p?"ring-2 ring-offset-2 ring-offset-slate-950":s?"ring-1 ring-white/20":""} ${i?"cursor-pointer ring-2 ring-cyan-500/50 animate-pulse":""}`,style:{background:`linear-gradient(135deg, ${b}15, ${b}05)`,borderColor:p?b:"rgba(255,255,255,0.1)",borderWidth:"1px",borderStyle:"solid",boxShadow:p?`0 0 30px ${b}30, 0 20px 40px rgba(0,0,0,0.3)`:"0 10px 30px rgba(0,0,0,0.2)",...p&&{ringColor:b}},children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5",style:{backgroundColor:b}}),e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-white/10 drag-handle cursor-grab",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"w-4 h-4 text-white/30"}),e.jsx("span",{className:"text-lg",children:Ke[t.category]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-[10px] font-medium uppercase tracking-wider",style:{color:b},children:He[t.category]}),e.jsx("h3",{className:"text-sm font-semibold text-white -mt-0.5",children:t.title})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full font-bold uppercase",style:{backgroundColor:`${I}20`,color:I},children:t.priority}),e.jsx("button",{onClick:g=>{g.stopPropagation(),C()},className:"p-1 hover:bg-white/10 rounded transition-colors",children:t.isCollapsed?e.jsx(ee,{className:"w-4 h-4 text-white/60"}):e.jsx(te,{className:"w-4 h-4 text-white/60"})})]})]}),!t.isCollapsed&&e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("p",{className:"text-sm text-white/80 leading-relaxed",children:t.summary}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.tags.slice(0,5).map(g=>e.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded bg-white/5 text-white/50 flex items-center gap-1",children:[e.jsx(Ce,{className:"w-2.5 h-2.5"}),g]},g))}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-white/40",children:[t.source&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ae,{className:"w-3 h-3"}),t.source]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Se,{className:"w-3 h-3"}),A(t.timestamp)]})]}),e.jsx("button",{onClick:g=>{g.stopPropagation(),o()},className:"p-1.5 hover:bg-white/10 rounded transition-colors group",title:"Connect to another card",children:e.jsx(Ie,{className:"w-3.5 h-3.5 text-white/40 group-hover:text-cyan-400 transition-colors"})})]}),t.connections.length>0&&e.jsxs("div",{className:"text-[10px] text-white/30",children:[t.connections.length," connection",t.connections.length!==1?"s":""]})]})]})})},K={"related-documents":{icon:Me,label:"Dokumenter",description:"Kilder, lovtekster og rapporter"},"related-actors":{icon:Ee,label:"AktÃ¸rer",description:"NÃ¸glepersoner og organisationer"},"related-incidents":{icon:ie,label:"HÃ¦ndelser",description:"Nylige og relevante incidents"},"affecting-policies":{icon:se,label:"Policies",description:"Regulerende politikker"}},Ve=({doc:t})=>{const p={legislation:y.blue,report:y.cyan,standard:y.purple,guidance:y.green,article:y.amber};return e.jsx("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10 hover:border-white/20 transition-all group",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded uppercase font-bold",style:{backgroundColor:`${p[t.type]}20`,color:p[t.type]},children:t.type}),e.jsxs("span",{className:"text-[10px] text-white/40",children:[Math.round(t.relevanceScore*100),"% match"]})]}),e.jsx("h4",{className:"text-sm font-medium text-white",children:t.title}),e.jsx("p",{className:"text-xs text-white/50 mt-1",children:t.source}),t.snippet&&e.jsxs("p",{className:"text-xs text-white/40 mt-2 line-clamp-2 italic",children:['"',t.snippet,'"']})]}),t.url&&e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 hover:bg-white/10 rounded opacity-0 group-hover:opacity-100 transition-all",children:e.jsx(ae,{className:"w-3.5 h-3.5 text-white/60"})})]})})},qe=({actor:t})=>{const p={high:y.red,medium:y.amber,low:y.green},s={country:"ðŸ›ï¸",organization:"ðŸ¢",person:"ðŸ‘¤",group:"ðŸ‘¥"};return e.jsx("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10 hover:border-white/20 transition-all",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-xl",children:s[t.type]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"text-sm font-medium text-white",children:t.name}),e.jsxs("span",{className:"text-[9px] px-1.5 py-0.5 rounded uppercase font-bold",style:{backgroundColor:`${p[t.influence]}20`,color:p[t.influence]},children:[t.influence," influence"]})]}),e.jsx("p",{className:"text-xs text-white/50 mt-1",children:t.role}),t.stance&&e.jsxs("p",{className:"text-xs text-white/40 mt-2 italic",children:['"',t.stance,'"']})]})]})})},Qe=({incident:t})=>{const p={critical:y.red,high:y.orange,medium:y.amber,low:y.green},s={breach:"ðŸ’¥",attack:"âš”ï¸",vulnerability:"ðŸ•³ï¸","policy-event":"ðŸ“‹",debate:"ðŸ’¬"};return e.jsx("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10 hover:border-white/20 transition-all",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-xl",children:s[t.type]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded uppercase font-bold",style:{backgroundColor:`${p[t.severity]}20`,color:p[t.severity]},children:t.severity}),e.jsx("span",{className:"text-[10px] text-white/40",children:t.date})]}),e.jsx("h4",{className:"text-sm font-medium text-white",children:t.title}),e.jsx("p",{className:"text-xs text-white/50 mt-1 line-clamp-2",children:t.description})]})]})})},Je=({policy:t})=>{const p={active:y.green,pending:y.amber,proposed:y.cyan,delayed:y.red},s={compliant:y.green,partial:y.amber,"non-compliant":y.red,unknown:"#6B7280"};return e.jsx("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10 hover:border-white/20 transition-all",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded uppercase font-bold",style:{backgroundColor:`${p[t.status]}20`,color:p[t.status]},children:t.status}),e.jsxs("span",{className:"text-[10px] text-white/40",children:[t.type==="external"?"ðŸŒ":"ðŸ "," ",t.jurisdiction]})]}),e.jsx("h4",{className:"text-sm font-medium text-white",children:t.name}),e.jsx("p",{className:"text-xs text-white/50 mt-1",children:t.relevance})]}),t.complianceStatus&&e.jsx("div",{className:"text-[9px] px-1.5 py-0.5 rounded uppercase font-bold",style:{backgroundColor:`${s[t.complianceStatus]}20`,color:s[t.complianceStatus]},children:t.complianceStatus})]})})},et=({context:t,activeSection:p,onSectionChange:s,onClose:i,selectedCardTitle:n})=>{const r=["related-documents","related-actors","related-incidents","affecting-policies"],v=()=>{switch(p){case"related-documents":return t.documents.map(u=>e.jsx(Ve,{doc:u},u.id));case"related-actors":return t.actors.map(u=>e.jsx(qe,{actor:u},u.id));case"related-incidents":return t.incidents.map(u=>e.jsx(Qe,{incident:u},u.id));case"affecting-policies":return t.policies.map(u=>e.jsx(Je,{policy:u},u.id))}};return e.jsxs("div",{className:"fixed right-0 top-0 bottom-0 w-96 z-40 flex flex-col",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-950/90 backdrop-blur-xl border-l border-white/10"}),e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-px bg-gradient-to-b from-cyan-500/50 via-purple-500/50 to-magenta-500/50"}),e.jsxs("div",{className:"relative flex flex-col h-full",children:[e.jsxs("div",{className:"flex-shrink-0 px-4 py-3 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-cyan-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Neural Stream"}),e.jsx("p",{className:"text-[10px] text-white/40",children:"Kontekstuel indsigt"})]})]}),e.jsx("button",{onClick:i,className:"p-1.5 hover:bg-white/10 rounded transition-colors",children:e.jsx(re,{className:"w-4 h-4 text-white/60"})})]}),n&&e.jsxs("div",{className:"mt-2 px-2 py-1.5 bg-white/5 rounded text-xs text-white/70",children:["Viser kontekst for: ",e.jsx("span",{className:"text-cyan-400 font-medium",children:n})]})]}),e.jsx("div",{className:"flex-shrink-0 flex border-b border-white/10",children:r.map(u=>{const C=K[u],o=C.icon,h=u===p;return e.jsxs("button",{onClick:()=>s(u),className:`flex-1 px-2 py-2.5 text-center transition-all relative ${h?"text-white":"text-white/40 hover:text-white/60"}`,children:[e.jsx(o,{className:"w-4 h-4 mx-auto mb-0.5"}),e.jsx("span",{className:"text-[10px]",children:C.label}),h&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-cyan-400"})]},u)})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:t.isLoading?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Ae,{className:"w-6 h-6 text-cyan-400 animate-spin"})}):v()}),e.jsx("div",{className:"flex-shrink-0 px-4 py-2 border-t border-white/10 bg-white/5",children:e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-white/40",children:[e.jsxs("span",{className:"font-medium text-white/60",children:[K[p].label,":"]}),e.jsx("span",{children:K[p].description})]})})]})]})},tt=({cards:t,connectionSource:p,cursorPosition:s,zoom:i,viewportOffset:n})=>{const r=o=>({x:o.position.x+o.size.width/2,y:o.position.y+(o.isCollapsed?30:o.size.height/2)}),v=(o,h,l)=>{const x=r(o),w=Math.atan2(l-x.y,h-x.x),N=o.size.width/2,S=(o.isCollapsed?60:o.size.height)/2,b=Math.cos(w),I=Math.sin(w);let E,A;if(Math.abs(b)*S>Math.abs(I)*N){const g=b>0?1:-1;E=x.x+g*N,A=x.y+g*N*Math.tan(w)}else{const g=I>0?1:-1;A=x.y+g*S,E=x.x+g*S/Math.tan(w)}return{x:E,y:A}},u=(o,h)=>{const l=h.x-o.x,x=h.y-o.y,w=Math.sqrt(l*l+x*x),N=Math.min(w*.3,100),S=(o.x+h.x)/2,b=(o.y+h.y)/2,I=-x/w,E=l/w,A=S+I*N*.3,g=b+E*N*.3;return`M ${o.x} ${o.y} Q ${A} ${g} ${h.x} ${h.y}`},C=[];return t.forEach(o=>{o.connections.forEach(h=>{const l=t.find(x=>x.id===h);l&&C.push({sourceCard:o,targetCard:l,id:`${o.id}-${h}`})})}),e.jsxs("svg",{className:"absolute inset-0 pointer-events-none",style:{width:"100%",height:"100%",overflow:"visible"},children:[e.jsxs("defs",{children:[e.jsxs("filter",{id:"connection-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"4",result:"blur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"blur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsx("marker",{id:"connection-arrow",markerWidth:"8",markerHeight:"6",refX:"7",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:e.jsx("path",{d:"M0,0 L0,6 L8,3 z",fill:"rgba(0,255,255,0.6)"})}),Object.entries(H).map(([o,h])=>e.jsxs("linearGradient",{id:`gradient-${o}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:h,stopOpacity:"0.3"}),e.jsx("stop",{offset:"50%",stopColor:h,stopOpacity:"0.8"}),e.jsx("stop",{offset:"100%",stopColor:h,stopOpacity:"0.3"})]},o))]}),C.map(({sourceCard:o,targetCard:h,id:l})=>{const x=r(h),w=r(o),N=v(o,x.x,x.y),S=v(h,w.x,w.y),b=u(N,S),I=H[o.category];return e.jsxs("g",{children:[e.jsx("path",{d:b,fill:"none",stroke:I,strokeWidth:"6",strokeOpacity:"0.1",filter:"url(#connection-glow)"}),e.jsx("path",{d:b,fill:"none",stroke:I,strokeWidth:"2",strokeOpacity:"0.6",strokeLinecap:"round",markerEnd:"url(#connection-arrow)"}),e.jsx("path",{d:b,fill:"none",stroke:I,strokeWidth:"2",strokeOpacity:"0.3",strokeDasharray:"8 12",strokeLinecap:"round",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"0",to:"-40",dur:"2s",repeatCount:"indefinite"})})]},l)}),p&&s&&e.jsx(e.Fragment,{children:(()=>{const o=t.find(w=>w.id===p);if(!o)return null;r(o);const h=v(o,s.x/i-n.x,s.y/i-n.y),l={x:s.x/i-n.x,y:s.y/i-n.y},x=u(h,l);return e.jsxs("g",{children:[e.jsx("path",{d:x,fill:"none",stroke:"#00FFFF",strokeWidth:"2",strokeOpacity:"0.8",strokeDasharray:"8 4",strokeLinecap:"round",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"0",to:"-24",dur:"0.5s",repeatCount:"indefinite"})}),e.jsx("circle",{cx:l.x,cy:l.y,r:"6",fill:"#00FFFF",fillOpacity:"0.3",children:e.jsx("animate",{attributeName:"r",values:"4;8;4",dur:"1s",repeatCount:"indefinite"})})]})})()})]})},st=({nodes:t,edges:p,viewport:s,selectedNodeId:i,mode:n,onClose:r,onNodeSelect:v,onNodeMove:u,onViewportChange:C})=>{const o=j.useRef(null),[h,l]=j.useState(!1),[x,w]=j.useState({x:0,y:0}),[N,S]=j.useState(null),[b,I]=j.useState({x:0,y:0});j.useEffect(()=>{const a=o.current;if(!a)return;const c=m=>{m.preventDefault();const k=m.deltaY>0?-.1:.1,O=Math.max(.3,Math.min(3,s.zoom+k));C({...s,zoom:O})};return a.addEventListener("wheel",c,{passive:!1}),()=>a.removeEventListener("wheel",c)},[s,C]);const E=a=>{(a.target===o.current||a.target.classList.contains("pan-area"))&&(l(!0),w({x:a.clientX-s.x,y:a.clientY-s.y}))};j.useEffect(()=>{if(!h)return;const a=m=>{C({...s,x:m.clientX-x.x,y:m.clientY-x.y})},c=()=>l(!1);return window.addEventListener("mousemove",a),window.addEventListener("mouseup",c),()=>{window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",c)}},[h,x,s,C]),j.useEffect(()=>{if(!N)return;const a=m=>{const k=(m.clientX-b.x-s.x)/s.zoom,O=(m.clientY-b.y-s.y)/s.zoom;u(N,{x:k,y:O})},c=()=>S(null);return window.addEventListener("mousemove",a),window.addEventListener("mouseup",c),()=>{window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",c)}},[N,b,s,u]);const A=(a,c,m)=>{a.stopPropagation();const k=a.target.getBoundingClientRect();S(c),I({x:a.clientX-k.left-k.width/2,y:a.clientY-k.top-k.height/2}),v(c)},g=a=>{const c=t.find(D=>D.id===a.sourceId),m=t.find(D=>D.id===a.targetId);if(!c||!m)return null;const k=m.position.x-c.position.x,O=m.position.y-c.position.y,$=Math.sqrt(k*k+O*O),z=(c.position.x+m.position.x)/2,V=(c.position.y+m.position.y)/2,T=-O/$,L=k/$,U=Math.min($*.2,50),P=z+T*U,Y=V+L*U,B=`M ${c.position.x} ${c.position.y} Q ${P} ${Y} ${m.position.x} ${m.position.y}`,G=W[c.type];return e.jsxs("g",{children:[e.jsx("path",{d:B,fill:"none",stroke:G,strokeWidth:1.5*a.weight,strokeOpacity:.4}),a.animated&&e.jsx("path",{d:B,fill:"none",stroke:G,strokeWidth:1,strokeDasharray:"4 4",strokeOpacity:.6,children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"0",to:"-16",dur:"1s",repeatCount:"indefinite"})}),a.label&&e.jsx("text",{x:P,y:Y,textAnchor:"middle",dominantBaseline:"middle",fontSize:"10",fill:"rgba(255,255,255,0.5)",className:"select-none pointer-events-none",children:a.label})]},a.id)},M=n==="overlay";return e.jsxs("div",{className:`${M?"fixed inset-0 z-50":"fixed left-0 top-0 bottom-32 w-96 z-40"}`,children:[e.jsx("div",{className:`absolute inset-0 ${M?"bg-slate-950/95":"bg-slate-950/90"} backdrop-blur-xl`,onClick:M?r:void 0}),!M&&e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-px bg-gradient-to-b from-purple-500/50 via-cyan-500/50 to-magenta-500/50"}),e.jsxs("div",{className:"absolute top-0 left-0 right-0 h-12 border-b border-white/10 bg-black/20 flex items-center justify-between px-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-400 animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-white",children:"Neo4j Mindmap"}),e.jsxs("span",{className:"text-xs text-white/40",children:[t.length," nodes Â· ",p.length," edges"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>C({...s,zoom:s.zoom+.2}),className:"p-1.5 hover:bg-white/10 rounded transition-colors",children:e.jsx(oe,{className:"w-4 h-4 text-white/60"})}),e.jsx("button",{onClick:()=>C({...s,zoom:s.zoom-.2}),className:"p-1.5 hover:bg-white/10 rounded transition-colors",children:e.jsx(le,{className:"w-4 h-4 text-white/60"})}),e.jsx("button",{onClick:()=>C({x:0,y:0,zoom:1}),className:"p-1.5 hover:bg-white/10 rounded transition-colors",children:e.jsx(ce,{className:"w-4 h-4 text-white/60"})}),e.jsx("button",{onClick:r,className:"p-1.5 hover:bg-white/10 rounded transition-colors",children:e.jsx(re,{className:"w-4 h-4 text-white/60"})})]})]}),e.jsx("div",{ref:o,className:"absolute inset-0 top-12 overflow-hidden cursor-grab pan-area",style:{cursor:h?"grabbing":"grab"},onMouseDown:E,children:e.jsxs("div",{className:"absolute",style:{transform:`translate(${s.x}px, ${s.y}px) scale(${s.zoom})`,transformOrigin:"0 0"},children:[e.jsxs("svg",{className:"absolute inset-0 pointer-events-none",style:{width:"2000px",height:"1500px"},children:[e.jsx("defs",{children:e.jsx("pattern",{id:"mindmap-grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"rgba(255,255,255,0.03)",strokeWidth:"1"})})}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#mindmap-grid)"})]}),e.jsx("svg",{className:"absolute inset-0 pointer-events-none",style:{width:"2000px",height:"1500px"},children:p.map(g)}),t.map(a=>{const c=a.color||W[a.type],m=a.id===i,k=a.isNew;return e.jsx("div",{className:`absolute rounded-full flex items-center justify-center cursor-pointer transition-all ${m?"ring-2 ring-offset-2 ring-offset-slate-950":""} ${k?"animate-pulse":""} ${N===a.id?"cursor-grabbing z-50":"hover:scale-110"}`,style:{left:a.position.x-a.size/2,top:a.position.y-a.size/2,width:a.size,height:a.size,backgroundColor:`${c}30`,borderColor:c,borderWidth:"2px",borderStyle:"solid",boxShadow:m?`0 0 20px ${c}50, 0 0 40px ${c}20`:`0 0 10px ${c}20`,...m&&{ringColor:c}},onMouseDown:O=>A(O,a.id),children:e.jsx("span",{className:"text-xs font-medium text-white text-center px-1 select-none",children:a.label.length>10?`${a.label.slice(0,10)}...`:a.label})},a.id)})]})}),i&&e.jsx("div",{className:"absolute bottom-4 left-4 right-4 bg-black/60 backdrop-blur-md rounded-lg border border-white/10 p-4",children:(()=>{const a=t.find(m=>m.id===i);if(!a)return null;const c=a.color||W[a.type];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:c}}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",style:{color:c},children:a.type})]}),e.jsx("h4",{className:"text-sm font-semibold text-white",children:a.label}),a.description&&e.jsx("p",{className:"text-xs text-white/60 mt-1",children:a.description}),Object.keys(a.properties).length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:Object.entries(a.properties).slice(0,4).map(([m,k])=>e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/10 text-white/50",children:[m,": ",String(k)]},m))})]})})()}),e.jsxs("div",{className:"absolute top-16 right-4 bg-black/40 backdrop-blur-sm rounded-lg border border-white/10 p-3",children:[e.jsx("span",{className:"text-[10px] text-white/40 uppercase tracking-wider block mb-2",children:"Node Types"}),e.jsx("div",{className:"space-y-1.5",children:Object.entries(W).slice(0,5).map(([a,c])=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:c}}),e.jsx("span",{className:"text-[10px] text-white/60 capitalize",children:a})]},a))})]})]})},lt=({widgetId:t="strategic-cockpit",config:p})=>{const s=j.useRef(null),[i,n]=j.useState(),[r,v]=j.useState(!1),[u,C]=j.useState({x:0,y:0}),[o,h]=j.useState(!1),{viewport:l,cards:x,selectedCardId:w,hoveredCardId:N,agents:S,neuralStream:b,activeNeuralSection:I,mindmap:E,showMindmap:A,mindmapMode:g,showAgentCouncil:M,showNeuralStream:a,isConnecting:c,connectionSource:m,wsConnected:k,lastUpdate:O,setViewport:$,setZoom:z,pan:V,resetViewport:T,selectCard:L,hoverCard:U,moveCard:P,toggleCardCollapse:Y,connectCards:B,startConnecting:G,cancelConnecting:D,toggleAgentCouncil:q,setActiveNeuralSection:de,toggleNeuralStream:X,toggleMindmap:R,setMindmapMode:it,selectGraphNode:pe,moveGraphNode:me,setMindmapViewport:xe,resetToDefault:he}=Be();j.useEffect(()=>{const d=s.current;if(!d)return;const f=F=>{F.preventDefault();const ge=F.deltaY>0?-.1:.1;z(l.zoom+ge)};return d.addEventListener("wheel",f,{passive:!1}),()=>d.removeEventListener("wheel",f)},[l.zoom,z]);const ue=d=>{(d.target===s.current||d.target.classList.contains("canvas-bg"))&&(c?D():(v(!0),C({x:d.clientX-l.x,y:d.clientY-l.y}),L(null)))};j.useEffect(()=>{if(!r)return;const d=F=>{$({...l,x:F.clientX-u.x,y:F.clientY-u.y})},f=()=>v(!1);return window.addEventListener("mousemove",d),window.addEventListener("mouseup",f),()=>{window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",f)}},[r,u,l,$]),j.useEffect(()=>{if(!c){n(void 0);return}const d=f=>{n({x:f.clientX,y:f.clientY})};return window.addEventListener("mousemove",d),()=>window.removeEventListener("mousemove",d)},[c]),j.useEffect(()=>{const d=f=>{f.key==="Escape"&&(c?D():A?R():L(null)),(f.key==="+"||f.key==="=")&&z(l.zoom+.2),f.key==="-"&&z(l.zoom-.2),f.key==="0"&&T(),f.key==="m"&&f.ctrlKey&&R(),f.key==="n"&&f.ctrlKey&&X(),f.key==="a"&&f.ctrlKey&&q()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[c,A,l.zoom,D,R,L,z,T,X,q]);const _=x.find(d=>d.id===w);return e.jsxs("div",{className:"relative w-full h-full min-h-[600px] bg-slate-950 overflow-hidden",children:[e.jsx("header",{className:"absolute top-0 left-0 right-0 z-30 h-14 border-b border-white/10 bg-black/40 backdrop-blur-xl",children:e.jsxs("div",{className:"h-full px-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-cyan-500/20 to-purple-500/20 border border-cyan-500/30",children:e.jsx(Oe,{className:"w-5 h-5 text-cyan-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-bold text-white",children:"Strategic Cockpit"}),e.jsx("p",{className:"text-[10px] text-white/40",children:"Glass, Neon & The Graph"})]})]}),e.jsxs("div",{className:"hidden lg:flex items-center gap-4 ml-4 pl-4 border-l border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-rose-500 animate-pulse"}),e.jsxs("span",{className:"text-xs text-white/60",children:[x.filter(d=>d.priority==="critical").length," Critical"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e.jsxs("span",{className:"text-xs text-white/60",children:[S.filter(d=>d.status==="active").length," Active Agents"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center bg-white/5 rounded-lg p-0.5",children:[e.jsxs("button",{onClick:R,className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-md text-xs transition-all ${A?"bg-purple-500/30 text-purple-300":"text-white/50 hover:text-white"}`,children:[e.jsx(Z,{className:"w-3.5 h-3.5"}),"Mindmap"]}),e.jsxs("button",{onClick:X,className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-md text-xs transition-all ${a?"bg-cyan-500/30 text-cyan-300":"text-white/50 hover:text-white"}`,children:[e.jsx(ne,{className:"w-3.5 h-3.5"}),"Neural Stream"]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-white/5 rounded-lg px-2 py-1",children:[e.jsx("button",{onClick:()=>z(l.zoom-.2),className:"p-1 hover:bg-white/10 rounded transition-colors",children:e.jsx(le,{className:"w-3.5 h-3.5 text-white/60"})}),e.jsxs("span",{className:"text-xs text-white/50 w-12 text-center",children:[Math.round(l.zoom*100),"%"]}),e.jsx("button",{onClick:()=>z(l.zoom+.2),className:"p-1 hover:bg-white/10 rounded transition-colors",children:e.jsx(oe,{className:"w-3.5 h-3.5 text-white/60"})})]}),e.jsx("button",{onClick:he,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",title:"Reset to default",children:e.jsx(ce,{className:"w-4 h-4 text-white/60"})})]})]})}),e.jsxs("div",{ref:s,className:"absolute inset-0 top-14 overflow-hidden",style:{cursor:r?"grabbing":c?"crosshair":"grab",paddingBottom:M?o?"128px":"48px":"0",paddingRight:a?"384px":"0"},onMouseDown:ue,children:[e.jsx("div",{className:"absolute inset-0 canvas-bg",style:{backgroundImage:`
              radial-gradient(circle at 50% 50%, rgba(0, 255, 255, 0.03) 0%, transparent 50%),
              linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px),
              linear-gradient(90deg, rgba(255,255,255,0.02) 1px, transparent 1px)
            `,backgroundSize:"100% 100%, 50px 50px, 50px 50px",backgroundPosition:`center, ${l.x}px ${l.y}px, ${l.x}px ${l.y}px`}}),e.jsxs("div",{className:"absolute",style:{transform:`translate(${l.x}px, ${l.y}px) scale(${l.zoom})`,transformOrigin:"0 0"},children:[e.jsx(tt,{cards:x,connectionSource:m,cursorPosition:i,zoom:l.zoom,viewportOffset:{x:l.x,y:l.y}}),x.map(d=>e.jsx(Ze,{card:d,isSelected:d.id===w,isHovered:d.id===N,isConnecting:c&&m!==d.id,zoom:l.zoom,onSelect:()=>L(d.id),onHover:f=>U(f?d.id:null),onMove:f=>P(d.id,f),onToggleCollapse:()=>Y(d.id),onStartConnect:()=>G(d.id),onConnect:()=>{m&&m!==d.id&&B(m,d.id)}},d.id))]}),c&&e.jsx("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 px-4 py-2 bg-cyan-500/20 backdrop-blur-md rounded-full border border-cyan-500/50",children:e.jsx("span",{className:"text-sm text-cyan-400",children:"Click another card to connect Â· Press ESC to cancel"})})]}),a&&e.jsx(et,{context:b,activeSection:I,onSectionChange:de,onClose:X,selectedCardTitle:_==null?void 0:_.title}),A&&e.jsx(st,{nodes:E.nodes,edges:E.edges,viewport:E.viewport,selectedNodeId:E.selectedNodeId,mode:g,onClose:R,onNodeSelect:pe,onNodeMove:me,onViewportChange:xe}),M&&e.jsx(_e,{agents:S,isExpanded:o,onToggle:()=>h(!o)}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 h-6 bg-black/60 border-t border-white/10 flex items-center justify-between px-4 text-[10px] text-white/40",style:{marginBottom:M?o?"128px":"48px":"0"},children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{children:[x.length," observation cards"]}),e.jsxs("span",{children:[x.reduce((d,f)=>d+f.connections.length,0)," connections"]}),e.jsxs("span",{children:[E.nodes.length," graph nodes"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{children:"Keyboard: + - 0 Esc Ctrl+M Ctrl+N"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${k?"bg-emerald-400":"bg-rose-400"}`}),k?"WebSocket Connected":"Disconnected"]})]})]})]})};export{lt as StrategicCockpitWidget,lt as default};
