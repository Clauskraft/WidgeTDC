import{r as o,j as e}from"./ui-d27jHJxv.js";import{G as j}from"./index-CHxrVzz6.js";import{B as b}from"./Button-CUGYQXiP.js";import"./vendor-BerfLJhL.js";var x={};const k=r=>new Promise((c,n)=>{const a=new FileReader;a.readAsDataURL(r),a.onload=()=>c(a.result.split(",")[1]),a.onerror=i=>n(i)}),V=()=>{const[r,c]=o.useState(null),[n,a]=o.useState(null),[i,m]=o.useState(""),[f,u]=o.useState(!1),[p,t]=o.useState(null),g=l=>{var d;const s=(d=l.target.files)==null?void 0:d[0];if(s&&s.type.startsWith("video/")){if(s.size>50*1024*1024){t("Filen er for stor. Maksimal størrelse er 50MB.");return}c(s),a(URL.createObjectURL(s)),m(""),t(null)}else t("Vælg venligst en gyldig videofil.")},y=async()=>{if(!r||!x.API_KEY){t("Vælg en videofil og sørg for, at API-nøglen er sat.");return}u(!0),t(null),m("");try{const l=new j({apiKey:x.API_KEY}),s=await k(r),d={inlineData:{mimeType:r.type,data:s}},v={text:"Beskriv detaljeret, hvad der sker i denne video."},h=await l.models.generateContent({model:"gemini-2.5-pro",contents:{parts:[d,v]}});m(h.text)}catch(l){console.error("Video analysis failed:",l),t("Videoanalyse fejlede. Filen kan være for stor eller i et format, der ikke understøttes. Se konsollen for detaljer.")}finally{u(!1)}};return e.jsx("div",{className:"h-full flex flex-col -m-4",children:e.jsxs("div",{className:"flex-1 p-4 space-y-4 overflow-y-auto",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center",children:[e.jsx("input",{type:"file",accept:"video/*",onChange:g,className:"hidden",id:"video-upload"}),e.jsxs("label",{htmlFor:"video-upload",className:"ms-focusable cursor-pointer",children:[e.jsx("p",{children:"Klik for at vælge en video"}),e.jsx("p",{className:"text-xs text-gray-500",children:"MP4, WEBM, etc. (Maks 50MB)"})]})]}),n&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("video",{src:n,controls:!0,className:"w-full rounded-md max-h-64"}),e.jsx(b,{onClick:y,disabled:f||!r,className:"w-full",children:f?"Analyserer...":"Analyser Video"})]}),p&&e.jsx("p",{className:"text-red-500 text-sm",children:p}),i&&e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Analyse Resultat:"}),e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:i})]})]})})};export{V as default};
