import{r as a,j as e,b as p,R as j,T as b,A as d,F as f,c as w,G as N}from"./ui-d27jHJxv.js";import{u as y}from"./useMCP-C6vkw6pp.js";import"./vendor-BerfLJhL.js";const I=()=>{const{send:x}=y(),[m,u]=a.useState([]),[n,i]=a.useState(!0),[l,c]=a.useState(null),r=async()=>{var s,o;i(!0);try{const t=await x("agent-orchestrator","ingestion.status",{});if(t&&t.success){const h=[{id:"email-reader",name:"Email Ingestor",type:"ingestion",status:"running",lastRun:new Date().toISOString(),itemsProcessed:((s=t.sources)==null?void 0:s.emails)||0},{id:"news-monitor",name:"News Monitor",type:"ingestion",status:"running",lastRun:new Date().toISOString(),itemsProcessed:((o=t.sources)==null?void 0:o.news)||0},{id:"threat-hunter",name:"Threat Hunter",type:"analysis",status:"idle",lastRun:new Date().toISOString(),itemsProcessed:0},{id:"wiki-librarian",name:"Wiki Librarian",type:"maintenance",status:"idle",lastRun:new Date().toISOString(),itemsProcessed:t.totalDocuments||0}];u(h),c(null)}}catch(t){console.warn("Agent status failed:",t),c("Kunne ikke forbinde til Agent Grid")}finally{i(!1)}};a.useEffect(()=>{r();const s=setInterval(r,5e3);return()=>clearInterval(s)},[]);const g=s=>{switch(s){case"ingestion":return e.jsx(N,{size:16,className:"text-blue-400"});case"analysis":return e.jsx(w,{size:16,className:"text-red-400"});case"maintenance":return e.jsx(f,{size:16,className:"text-green-400"});default:return e.jsx(d,{size:16})}};return e.jsxs("div",{className:"h-full flex flex-col -m-4","data-testid":"agent-status-widget",children:[e.jsxs("div",{className:"p-4 border-b border-white/10 bg-[#0B3E6F]/20 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{size:18,className:"text-[#00B5CB]"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Agent Status"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Active Autonomous Agents"})]})]}),e.jsx("button",{onClick:r,disabled:n,className:`p-2 rounded-lg hover:bg-white/10 text-gray-300 transition-colors ${n?"animate-spin":""}`,children:e.jsx(j,{size:16})})]}),e.jsx("div",{className:"flex-1 p-4 space-y-3 overflow-y-auto",children:l?e.jsxs("div",{className:"text-center py-8 text-red-400 bg-red-500/10 rounded-xl border border-red-500/20",children:[e.jsx(b,{className:"mx-auto mb-2"}),e.jsx("p",{children:l})]}):m.map(s=>e.jsxs("div",{className:"bg-[#0B3E6F]/20 border border-white/5 rounded-xl p-3 flex items-center justify-between group hover:border-[#00B5CB]/30 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-black/20 rounded-lg",children:g(s.type)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-200 text-sm",children:s.name}),e.jsxs("p",{className:"text-[10px] text-gray-500 flex items-center gap-1",children:[e.jsx(d,{size:8})," ",s.status.toUpperCase()]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-white",children:s.itemsProcessed}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"items"})]})]},s.id))})]})};export{I as default};
