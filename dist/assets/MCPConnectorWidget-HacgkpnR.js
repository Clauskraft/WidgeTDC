import{j as e,r as o}from"./ui-d27jHJxv.js";import{B as m}from"./Button-CUGYQXiP.js";import"./vendor-BerfLJhL.js";const S={Close:()=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:e.jsx("path",{d:"M14.7 2.7c.4-.4.4-1 0-1.4s-1-.4-1.4 0L8 6.6 2.7 1.3c-.4-.4-1-.4-1.4 0s-.4 1 0 1.4L6.6 8l-5.3 5.3c-.4.4-.4 1 0 1.4.2.2.5.3.7.3s.5-.1.7-.3L8 9.4l5.3 5.3c.2.2.5.3.7.3s.5-.1.7-.3c.4-.4.4-1 0-1.4L9.4 8l5.3-5.3z"})})},F=r=>e.jsx("svg",{...r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7a8 8 0 0116 0"})}),I=r=>e.jsx("svg",{...r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),L=r=>e.jsx("svg",{...r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),q=({status:r})=>{const n={connected:{color:"bg-green-500",text:"Forbundet"},disconnected:{color:"bg-gray-400",text:"Afbrudt"},error:{color:"bg-red-500",text:"Fejl"},testing:{color:"bg-yellow-500 animate-pulse",text:"Tester..."}};return e.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium",children:[e.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${n[r].color}`}),e.jsx("span",{children:n[r].text})]})},f=[{id:"postgresql",name:"PostgreSQL",category:"Database",icon:F,fields:[{name:"host",label:"Host",type:"text",placeholder:"f.eks. localhost",required:!0},{name:"port",label:"Port",type:"number",placeholder:"5432",required:!0},{name:"database",label:"Database",type:"text",placeholder:"mydatabase",required:!0},{name:"user",label:"Bruger",type:"text",placeholder:"admin",required:!0},{name:"password",label:"Adgangskode",type:"password",placeholder:"••••••••",required:!0}]},{id:"rest_api",name:"REST API",category:"API",icon:I,fields:[{name:"base_url",label:"Base URL",type:"text",placeholder:"https://api.example.com",required:!0},{name:"api_key",label:"API Nøgle",type:"password",placeholder:"Indsæt din API nøgle",required:!1}]},{id:"csv_upload",name:"CSV Fil",category:"File",icon:L,fields:[{name:"file_path",label:"Filsti",type:"text",placeholder:"/path/to/your/file.csv",required:!0}]}],M=()=>{const[r,n]=o.useState("list"),[g,x]=o.useState([]),[l,h]=o.useState(null),[c,d]=o.useState({}),[i,u]=o.useState("idle"),p=s=>{h(s),d({name:`${s.name} Forbindelse`}),u("idle"),n("configure")},b=()=>{h(null),d({}),n(r==="configure"?"select_source":"list")},y=s=>{d(t=>({...t,[s.target.name]:s.target.value}))},j=async()=>{u("testing"),await new Promise(t=>setTimeout(t,1500));const s=Math.random()>.3;u(s?"success":"error")},v=()=>{if(!l)return;const s={id:`conn-${Date.now()}`,name:c.name||"Unavngiven Forbindelse",dataSourceId:l.id,status:"connected",config:{...c}};x(t=>[...t,s]),n("list")},w=s=>{x(t=>t.filter(a=>a.id!==s))},k=()=>e.jsxs("div",{className:"space-y-3",children:[e.jsx(m,{onClick:()=>n("select_source"),className:"w-full",children:"Opret Ny Forbindelse"}),g.length>0?g.map(s=>{const t=f.find(a=>a.id===s.dataSourceId);return e.jsxs("div",{className:"p-3 flex items-center justify-between rounded-lg bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t&&e.jsx(t.icon,{className:"w-6 h-6 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.name}),e.jsx(q,{status:s.status})]})]}),e.jsx("button",{onClick:()=>w(s.id),className:"ms-icon-button ms-focusable w-6 h-6 text-gray-500 dark:text-gray-400 hover:text-red-500 dark:hover:text-red-400",title:"Slet forbindelse",children:e.jsx(S.Close,{})})]},s.id)}):e.jsx("p",{className:"text-center text-gray-500 py-4",children:"Ingen forbindelser oprettet."})]}),N=()=>e.jsxs("div",{children:[e.jsx("button",{onClick:b,className:"ms-focusable text-sm mb-4",children:"← Tilbage"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:f.map(s=>e.jsxs("div",{onClick:()=>p(s),onKeyDown:t=>{(t.key===" "||t.key==="Enter")&&p(s)},tabIndex:0,className:"ms-focusable p-4 flex flex-col items-center justify-center gap-2 rounded-lg border-2 border-gray-200 dark:border-gray-700 hover:border-blue-500 dark:hover:border-blue-500 cursor-pointer transition-colors",children:[e.jsx(s.icon,{className:"w-10 h-10 text-gray-600 dark:text-gray-300"}),e.jsx("span",{className:"font-semibold text-center",children:s.name})]},s.id))})]}),C=()=>{if(!l)return null;const s={idle:"bg-gray-500 hover:bg-gray-600",testing:"bg-yellow-500 cursor-wait",success:"bg-green-500",error:"bg-red-500"},t={idle:"Test Forbindelse",testing:"Tester...",success:"Succes!",error:"Fejl - Prøv igen"};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:b,className:"ms-focusable text-sm mb-2",children:"← Tilbage til valg"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l.icon,{className:"w-8 h-8 text-gray-600 dark:text-gray-300"}),e.jsxs("h3",{className:"text-xl font-bold",children:["Konfigurer ",l.name]})]}),e.jsx("input",{type:"text",name:"name",value:c.name||"",onChange:y,placeholder:"Navn på forbindelse",className:"ms-focusable w-full p-2 rounded-lg border bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600"}),l.fields.map(a=>e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium",children:[a.label,a.required&&"*"]}),e.jsx("input",{name:a.name,type:a.type,placeholder:a.placeholder,value:c[a.name]||"",onChange:y,required:a.required,className:"ms-focusable w-full mt-1 p-2 rounded-lg border bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600"})]},a.name)),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(m,{onClick:j,disabled:i==="testing",variant:"subtle",className:`flex-1 text-white ${s[i]}`,children:t[i]}),e.jsx(m,{onClick:v,disabled:i!=="success",className:"flex-1",children:"Gem Forbindelse"})]})]})};return e.jsxs("div",{className:"h-full -m-4 p-4",children:[r==="list"&&k(),r==="select_source"&&N(),r==="configure"&&C()]})};export{M as default};
