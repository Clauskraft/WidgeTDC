import{r as o,j as e}from"./ui-d27jHJxv.js";import"./vendor-BerfLJhL.js";const w=()=>{const[s,m]=o.useState(""),[d,g]=o.useState(""),[l,h]=o.useState(""),[i,p]=o.useState(!1),[x,y]=o.useState(""),[a,b]=o.useState([]),[c,f]=o.useState(""),j=async t=>{t.preventDefault(),p(!0),f("");try{const r=await fetch("/api/mcp/route",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tool:"cma.context",payload:{userQuery:s,widgetData:d,keywords:l.split(",").map(n=>n.trim()).filter(n=>n)},context:{orgId:"org-1",userId:"user-1"}})});if(!r.ok)throw new Error("Failed to get contextual prompt");const u=await r.json();y(u.response),b(u.memories||[])}catch(r){f(r.message||"An error occurred")}finally{p(!1)}};return e.jsxs("div",{style:{padding:"20px",height:"100%",display:"flex",flexDirection:"column",backgroundColor:"#1a1a1a",color:"#ffffff"},children:[e.jsx("h2",{style:{margin:"0 0 20px 0",fontSize:"20px",fontWeight:"600"},children:"üß† CMA Decision Assistant"}),e.jsxs("form",{onSubmit:j,style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px"},children:"Decision Question"}),e.jsx("textarea",{value:s,onChange:t=>m(t.target.value),placeholder:"What decision do you need help with?",style:{width:"100%",minHeight:"60px",padding:"10px",backgroundColor:"#2a2a2a",border:"1px solid #444",borderRadius:"4px",color:"#ffffff",fontSize:"14px",resize:"vertical"},required:!0})]}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px"},children:"Additional Context (Optional)"}),e.jsx("input",{type:"text",value:d,onChange:t=>g(t.target.value),placeholder:"Any additional context...",style:{width:"100%",padding:"10px",backgroundColor:"#2a2a2a",border:"1px solid #444",borderRadius:"4px",color:"#ffffff",fontSize:"14px"}})]}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px"},children:"Keywords (comma-separated)"}),e.jsx("input",{type:"text",value:l,onChange:t=>h(t.target.value),placeholder:"decision, architecture, budget...",style:{width:"100%",padding:"10px",backgroundColor:"#2a2a2a",border:"1px solid #444",borderRadius:"4px",color:"#ffffff",fontSize:"14px"}})]}),e.jsx("button",{type:"submit",disabled:i,style:{width:"100%",padding:"12px",backgroundColor:i?"#555":"#0070f3",color:"#ffffff",border:"none",borderRadius:"4px",fontSize:"14px",fontWeight:"600",cursor:i?"not-allowed":"pointer"},children:i?"Loading...":"Get Contextual Recommendations"})]}),c&&e.jsx("div",{style:{padding:"10px",backgroundColor:"#ff3333",borderRadius:"4px",marginBottom:"15px",fontSize:"14px"},children:c}),a.length>0&&e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsxs("h3",{style:{fontSize:"16px",marginBottom:"10px",fontWeight:"600"},children:["üìö Related Memories (",a.length,")"]}),e.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",backgroundColor:"#2a2a2a",borderRadius:"4px",padding:"10px"},children:a.map(t=>e.jsxs("div",{style:{marginBottom:"10px",paddingBottom:"10px",borderBottom:"1px solid #444"},children:[e.jsx("div",{style:{fontSize:"13px",color:"#ccc"},children:t.content}),e.jsxs("div",{style:{fontSize:"11px",color:"#888",marginTop:"5px"},children:["Importance: ","‚≠ê".repeat(t.importance)]})]},t.id))})]}),x&&e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[e.jsx("h3",{style:{fontSize:"16px",marginBottom:"10px",fontWeight:"600"},children:"üí° Contextual Prompt"}),e.jsx("div",{style:{flex:1,backgroundColor:"#2a2a2a",borderRadius:"4px",padding:"15px",fontSize:"13px",lineHeight:"1.6",overflowY:"auto",whiteSpace:"pre-wrap"},children:x})]})]})};export{w as default};
